{"version":3,"file":"jcampconverter.js","sources":["../src/createTree.js","../src/complexChromatogram.js","../src/convertToFloatArray.js","../src/parse/fastParseXYData.js","../src/parse/parsePeakTable.js","../src/parse/parseXYA.js","../node_modules/is-any-array/src/index.js","../node_modules/median-quickselect/lib/median-quickselect.min.js","../node_modules/ml-array-median/lib-es6/index.js","../src/2d/convertTo3DZ.js","../src/2d/generateContourLines.js","../src/2d/add2D.js","../src/profiling.js","../src/simpleChromatogram.js","../node_modules/object-keys/isArguments.js","../node_modules/object-keys/index.js","../node_modules/utils-copy-error/lib/copy.js","../node_modules/utils-copy/lib/typedarrays.js","../node_modules/d3-array/build/d3-array.js","../node_modules/ml-fft/src/fftlib.js","../node_modules/ml-stat/array.js","../node_modules/ml-stat/matrix.js","../node_modules/ml-matrix-convolution/node_modules/ml-fft/src/fftlib.js","../node_modules/nmr-processing/src/constants/gyromagneticRatio.js","../src/postProcessingNMR.js","../src/postProcessing.js","../src/prepareNtuplesDatatable.js","../src/prepareSpectrum.js","../src/convert.js"],"sourcesContent":["export default function createTree(jcamp, options = {}) {\n  const { flatten = false } = options;\n  if (typeof jcamp !== 'string') {\n    throw new TypeError('the JCAMP should be a string');\n  }\n\n  let lines = jcamp.split(/[\\r\\n]+/);\n  let flat = [];\n  let stack = [];\n  let result = [];\n  let current;\n  let ntupleLevel = 0;\n\n  let spaces = jcamp.includes('## ');\n\n  for (let i = 0; i < lines.length; i++) {\n    let line = lines[i];\n    let labelLine = spaces ? line.replace(/ /g, '') : line;\n\n    if (labelLine.substring(0, 9) === '##NTUPLES') {\n      ntupleLevel++;\n    }\n\n    if (labelLine.substring(0, 7) === '##TITLE') {\n      let title = [labelLine.substring(8).trim()];\n      for (let j = i + 1; j < lines.length; j++) {\n        if (lines[j].startsWith('##')) {\n          break;\n        } else {\n          title.push(lines[j].trim());\n        }\n      }\n      stack.push({\n        title: title.join('\\n'),\n        jcamp: `${line}\\n`,\n        children: [],\n      });\n      current = stack[stack.length - 1];\n      flat.push(current);\n    } else if (labelLine.substring(0, 5) === '##END' && ntupleLevel === 0) {\n      current.jcamp += `${line}\\n`;\n      let finished = stack.pop();\n      if (stack.length !== 0) {\n        current = stack[stack.length - 1];\n        current.children.push(finished);\n      } else {\n        current = undefined;\n        result.push(finished);\n      }\n    } else if (current && current.jcamp) {\n      current.jcamp += `${line}\\n`;\n      let match = labelLine.match(/^##(.*?)=(.+)/);\n      if (match) {\n        let canonicDataLabel = match[1].replace(/[ _-]/g, '').toUpperCase();\n        if (canonicDataLabel === 'DATATYPE') {\n          current.dataType = match[2].trim();\n        }\n      }\n    }\n\n    if (labelLine.substring(0, 5) === '##END' && ntupleLevel > 0) {\n      ntupleLevel--;\n    }\n  }\n  if (flatten) {\n    flat.forEach((entry) => {\n      entry.children = undefined;\n    });\n    return flat;\n  } else {\n    return result;\n  }\n}\n","const GC_MS_FIELDS = ['TIC', '.RIC', 'SCANNUMBER'];\n\nexport function complexChromatogram(result) {\n  let spectra = result.spectra;\n  let length = spectra.length;\n  let chromatogram = {\n    times: new Array(length),\n    series: {\n      ms: {\n        dimension: 2,\n        data: new Array(length),\n      },\n    },\n  };\n\n  let existingGCMSFields = [];\n  for (let i = 0; i < GC_MS_FIELDS.length; i++) {\n    let label = convertMSFieldToLabel(GC_MS_FIELDS[i]);\n    if (spectra[0][label]) {\n      existingGCMSFields.push(label);\n      chromatogram.series[label] = {\n        dimension: 1,\n        data: new Array(length),\n      };\n    }\n  }\n\n  for (let i = 0; i < length; i++) {\n    let spectrum = spectra[i];\n    chromatogram.times[i] = spectrum.pageValue;\n    for (let j = 0; j < existingGCMSFields.length; j++) {\n      chromatogram.series[existingGCMSFields[j]].data[i] = parseFloat(\n        spectrum[existingGCMSFields[j]],\n      );\n    }\n    if (spectrum.data) {\n      chromatogram.series.ms.data[i] = [spectrum.data.x, spectrum.data.y];\n    }\n  }\n  result.chromatogram = chromatogram;\n}\n\nexport function isMSField(canonicDataLabel) {\n  return GC_MS_FIELDS.indexOf(canonicDataLabel) !== -1;\n}\n\nexport function convertMSFieldToLabel(value) {\n  return value.toLowerCase().replace(/[^a-z0-9]/g, '');\n}\n","export default function convertToFloatArray(stringArray) {\n  let floatArray = [];\n  for (let i = 0; i < stringArray.length; i++) {\n    floatArray.push(parseFloat(stringArray[i]));\n  }\n  return floatArray;\n}\n","export default function fastParseXYData(spectrum, value) {\n  // TODO need to deal with result\n  //  console.log(value);\n  // we check if deltaX is defined otherwise we calculate it\n\n  let yFactor = spectrum.yFactor;\n  let deltaX = spectrum.deltaX;\n\n  spectrum.isXYdata = true;\n  let currentData = { x: [], y: [] };\n  spectrum.data = currentData;\n\n  let currentX = spectrum.firstX;\n  let currentY = spectrum.firstY;\n\n  // we skip the first line\n  //\n  let endLine = false;\n  let ascii;\n  let i = 0;\n  for (; i < value.length; i++) {\n    ascii = value.charCodeAt(i);\n    if (ascii === 13 || ascii === 10) {\n      endLine = true;\n    } else {\n      if (endLine) break;\n    }\n  }\n\n  // we proceed taking the i after the first line\n  let newLine = true;\n  let isDifference = false;\n  let isLastDifference = false;\n  let lastDifference = 0;\n  let isDuplicate = false;\n  let inComment = false;\n  let currentValue = 0; // can be a difference or a duplicate\n  let lastValue = 0; // must be the real last value\n  let isNegative = false;\n  let inValue = false;\n  let skipFirstValue = false;\n  let decimalPosition = 0;\n  for (; i <= value.length; i++) {\n    if (i === value.length) ascii = 13;\n    else ascii = value.charCodeAt(i);\n    if (inComment) {\n      // we should ignore the text if we are after $$\n      if (ascii === 13 || ascii === 10) {\n        newLine = true;\n        inComment = false;\n      }\n    } else {\n      // when is it a new value ?\n      // when it is not a digit, . or comma\n      // it is a number that is either new or we continue\n      if (ascii <= 57 && ascii >= 48) {\n        // a number\n        inValue = true;\n        if (decimalPosition > 0) {\n          currentValue += (ascii - 48) / Math.pow(10, decimalPosition++);\n        } else {\n          currentValue *= 10;\n          currentValue += ascii - 48;\n        }\n      } else if (ascii === 44 || ascii === 46) {\n        // a \",\" or \".\"\n        inValue = true;\n        decimalPosition++;\n      } else {\n        if (inValue) {\n          // need to process the previous value\n          if (newLine) {\n            newLine = false; // we don't check the X value\n            // console.log(\"NEW LINE\",isDifference, lastDifference);\n            // if new line and lastDifference, the first value is just a check !\n            // that we don't check ...\n            if (isLastDifference) skipFirstValue = true;\n          } else {\n            // need to deal with duplicate and differences\n            if (skipFirstValue) {\n              skipFirstValue = false;\n            } else {\n              if (isDifference) {\n                lastDifference = isNegative ? 0 - currentValue : currentValue;\n                isLastDifference = true;\n                isDifference = false;\n              } else if (!isDuplicate) {\n                lastValue = isNegative ? 0 - currentValue : currentValue;\n              }\n              let duplicate = isDuplicate ? currentValue - 1 : 1;\n              for (let j = 0; j < duplicate; j++) {\n                if (isLastDifference) {\n                  currentY += lastDifference;\n                } else {\n                  currentY = lastValue;\n                }\n                currentData.x.push(currentX);\n                currentData.y.push(currentY * yFactor);\n                currentX += deltaX;\n              }\n            }\n          }\n          isNegative = false;\n          currentValue = 0;\n          decimalPosition = 0;\n          inValue = false;\n          isDuplicate = false;\n        }\n\n        // positive SQZ digits @ A B C D E F G H I (ascii 64-73)\n        if (ascii < 74 && ascii > 63) {\n          inValue = true;\n          isLastDifference = false;\n          currentValue = ascii - 64;\n        } else if (ascii > 96 && ascii < 106) {\n          // negative SQZ digits a b c d e f g h i (ascii 97-105)\n          inValue = true;\n          isLastDifference = false;\n          currentValue = ascii - 96;\n          isNegative = true;\n        } else if (ascii === 115) {\n          // DUP digits S T U V W X Y Z s (ascii 83-90, 115)\n          inValue = true;\n          isDuplicate = true;\n          currentValue = 9;\n        } else if (ascii > 82 && ascii < 91) {\n          inValue = true;\n          isDuplicate = true;\n          currentValue = ascii - 82;\n        } else if (ascii > 73 && ascii < 83) {\n          // positive DIF digits % J K L M N O P Q R (ascii 37, 74-82)\n          inValue = true;\n          isDifference = true;\n          currentValue = ascii - 73;\n        } else if (ascii > 105 && ascii < 115) {\n          // negative DIF digits j k l m n o p q r (ascii 106-114)\n          inValue = true;\n          isDifference = true;\n          currentValue = ascii - 105;\n          isNegative = true;\n        } else if (ascii === 36 && value.charCodeAt(i + 1) === 36) {\n          // $ sign, we need to check the next one\n          inValue = true;\n          inComment = true;\n        } else if (ascii === 37) {\n          // positive DIF digits % J K L M N O P Q R (ascii 37, 74-82)\n          inValue = true;\n          isDifference = true;\n          currentValue = 0;\n          isNegative = false;\n        } else if (ascii === 45) {\n          // a \"-\"\n          // check if after there is a number, decimal or comma\n          let ascii2 = value.charCodeAt(i + 1);\n          if (\n            (ascii2 >= 48 && ascii2 <= 57) ||\n            ascii2 === 44 ||\n            ascii2 === 46\n          ) {\n            inValue = true;\n            if (!newLine) isLastDifference = false;\n            isNegative = true;\n          }\n        } else if (ascii === 13 || ascii === 10) {\n          newLine = true;\n          inComment = false;\n        }\n        // and now analyse the details ... space or tabulation\n        // if \"+\" we just don't care\n      }\n    }\n  }\n}\n","const removeCommentRegExp = /\\$\\$.*/;\nconst peakTableSplitRegExp = /[,\\t ]+/;\n\nexport default function parsePeakTable(spectrum, value, result) {\n  spectrum.isPeaktable = true;\n\n  if (!spectrum.variables || Object.keys(spectrum.variables) === 2) {\n    parseXY(spectrum, value, result);\n  } else {\n    parseXYZ(spectrum, value, result);\n  }\n\n  // we will add the data in the variables\n  if (spectrum.variables) {\n    for (let key in spectrum.variables) {\n      spectrum.variables[key].data = spectrum.data[key];\n    }\n  }\n}\n\nfunction parseXY(spectrum, value, result) {\n  let currentData = { x: [], y: [] };\n  spectrum.data = currentData;\n\n  // counts for around 20% of the time\n  let lines = value.split(/,? *,?[;\\r\\n]+ */);\n\n  for (let i = 1; i < lines.length; i++) {\n    let values = lines[i]\n      .trim()\n      .replace(removeCommentRegExp, '')\n      .split(peakTableSplitRegExp);\n    if (values.length % 2 === 0) {\n      for (let j = 0; j < values.length; j = j + 2) {\n        // takes around 40% of the time to add and parse the 2 values nearly exclusively because of parseFloat\n        currentData.x.push(parseFloat(values[j]) * spectrum.xFactor);\n        currentData.y.push(parseFloat(values[j + 1]) * spectrum.yFactor);\n      }\n    } else {\n      result.logs.push(`Format error: ${values}`);\n    }\n  }\n}\n\nfunction parseXYZ(spectrum, value, result) {\n  let currentData = {};\n  let variables = Object.keys(spectrum.variables);\n  let numberOfVariables = variables.length;\n  variables.forEach((variable) => (currentData[variable] = []));\n  spectrum.data = currentData;\n\n  // counts for around 20% of the time\n  let lines = value.split(/,? *,?[;\\r\\n]+ */);\n\n  for (let i = 1; i < lines.length; i++) {\n    let values = lines[i]\n      .trim()\n      .replace(removeCommentRegExp, '')\n      .split(peakTableSplitRegExp);\n    if (values.length % numberOfVariables === 0) {\n      for (let j = 0; j < values.length; j++) {\n        // todo should try to find a xFactor (y, ...)\n        currentData[variables[j % numberOfVariables]].push(\n          parseFloat(values[j]),\n        );\n      }\n    } else {\n      result.logs.push(`Format error: ${values}`);\n    }\n  }\n}\n","export default function parseXYA(spectrum, value) {\n  let removeSymbolRegExp = /(\\(+|\\)+|<+|>+|\\s+)/g;\n\n  spectrum.isXYAdata = true;\n  let values;\n  let currentData = { x: [], y: [] };\n  spectrum.data = currentData;\n\n  let lines = value.split(/,? *,?[;\\r\\n]+ */);\n\n  for (let i = 1; i < lines.length; i++) {\n    values = lines[i].trim().replace(removeSymbolRegExp, '').split(',');\n    currentData.x.push(parseFloat(values[0]));\n    currentData.y.push(parseFloat(values[1]));\n  }\n}\n","'use strict';\n\nconst toString = Object.prototype.toString;\n\nfunction isAnyArray(object) {\n  return toString.call(object).endsWith('Array]');\n}\n\nmodule.exports = isAnyArray;\n","(function(){function a(d){for(var e=0,f=d.length-1,g=void 0,h=void 0,i=void 0,j=c(e,f);!0;){if(f<=e)return d[j];if(f==e+1)return d[e]>d[f]&&b(d,e,f),d[j];for(g=c(e,f),d[g]>d[f]&&b(d,g,f),d[e]>d[f]&&b(d,e,f),d[g]>d[e]&&b(d,g,e),b(d,g,e+1),h=e+1,i=f;!0;){do h++;while(d[e]>d[h]);do i--;while(d[i]>d[e]);if(i<h)break;b(d,h,i)}b(d,e,i),i<=j&&(e=h),i>=j&&(f=i-1)}}var b=function b(d,e,f){var _ref;return _ref=[d[f],d[e]],d[e]=_ref[0],d[f]=_ref[1],_ref},c=function c(d,e){return~~((d+e)/2)};'undefined'!=typeof module&&module.exports?module.exports=a:window.median=a})();\n","import isArray from 'is-any-array';\nimport quickSelectMedian from 'median-quickselect';\n\n/**\n * Computes the median of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction median(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  return quickSelectMedian(input.slice());\n}\n\nexport default median;\n","import getMedian from 'ml-array-median';\n\nexport default function convertTo3DZ(spectra) {\n  let minZ = spectra[0].data.y[0];\n  let maxZ = minZ;\n  let ySize = spectra.length;\n  let xSize = spectra[0].data.x.length;\n\n  let z = new Array(ySize);\n  for (let i = 0; i < ySize; i++) {\n    z[i] = spectra[i].data.y;\n    for (let j = 0; j < xSize; j++) {\n      let value = z[i][j];\n      if (value < minZ) minZ = value;\n      if (value > maxZ) maxZ = value;\n    }\n  }\n\n  const firstX = spectra[0].data.x[0];\n  const lastX = spectra[0].data.x[spectra[0].data.x.length - 1]; // has to be -2 because it is a 1D array [x,y,x,y,...]\n  const firstY = spectra[0].pageValue;\n  const lastY = spectra[ySize - 1].pageValue;\n\n  // Because the min / max value are the only information about the matrix if we invert\n  // min and max we need to invert the array\n  if (firstX > lastX) {\n    for (let spectrum of z) {\n      spectrum.reverse();\n    }\n  }\n  if (firstY > lastY) {\n    z.reverse();\n  }\n\n  return {\n    z: z,\n    minX: Math.min(firstX, lastX),\n    maxX: Math.max(firstX, lastX),\n    minY: Math.min(firstY, lastY),\n    maxY: Math.max(firstY, lastY),\n    minZ: minZ,\n    maxZ: maxZ,\n    noise: getMedian(z[0].map(Math.abs)),\n  };\n}\n","export default function generateContourLines(zData, options) {\n  let noise = zData.noise;\n  let z = zData.z;\n  let povarHeight0, povarHeight1, povarHeight2, povarHeight3;\n  let isOver0, isOver1, isOver2, isOver3;\n  let nbSubSpectra = z.length;\n  let nbPovars = z[0].length;\n  let pAx, pAy, pBx, pBy;\n\n  let x0 = zData.minX;\n  let xN = zData.maxX;\n  let dx = (xN - x0) / (nbPovars - 1);\n  let y0 = zData.minY;\n  let yN = zData.maxY;\n  let dy = (yN - y0) / (nbSubSpectra - 1);\n  let minZ = zData.minZ;\n  let maxZ = zData.maxZ;\n\n  // System.out.prvarln('y0 '+y0+' yN '+yN);\n  // -------------------------\n  // Povars attribution\n  //\n  // 0----1\n  // |  / |\n  // | /  |\n  // 2----3\n  //\n  // ---------------------d------\n\n  let iter = options.nbContourLevels * 2;\n  let contourLevels = new Array(iter);\n  let lineZValue;\n  for (let level = 0; level < iter; level++) {\n    // multiply by 2 for positif and negatif\n    let contourLevel = {};\n    contourLevels[level] = contourLevel;\n    let side = level % 2;\n    let factor =\n      (maxZ - options.noiseMultiplier * noise) *\n      Math.exp((level >> 1) - options.nbContourLevels);\n    if (side === 0) {\n      lineZValue = factor + options.noiseMultiplier * noise;\n    } else {\n      lineZValue = 0 - factor - options.noiseMultiplier * noise;\n    }\n    let lines = [];\n    contourLevel.zValue = lineZValue;\n    contourLevel.lines = lines;\n\n    if (lineZValue <= minZ || lineZValue >= maxZ) continue;\n\n    for (let iSubSpectra = 0; iSubSpectra < nbSubSpectra - 1; iSubSpectra++) {\n      let subSpectra = z[iSubSpectra];\n      let subSpectraAfter = z[iSubSpectra + 1];\n      for (let povar = 0; povar < nbPovars - 1; povar++) {\n        povarHeight0 = subSpectra[povar];\n        povarHeight1 = subSpectra[povar + 1];\n        povarHeight2 = subSpectraAfter[povar];\n        povarHeight3 = subSpectraAfter[povar + 1];\n\n        isOver0 = povarHeight0 > lineZValue;\n        isOver1 = povarHeight1 > lineZValue;\n        isOver2 = povarHeight2 > lineZValue;\n        isOver3 = povarHeight3 > lineZValue;\n\n        // Example povar0 is over the plane and povar1 and\n        // povar2 are below, we find the varersections and add\n        // the segment\n        if (isOver0 !== isOver1 && isOver0 !== isOver2) {\n          pAx =\n            povar + (lineZValue - povarHeight0) / (povarHeight1 - povarHeight0);\n          pAy = iSubSpectra;\n          pBx = povar;\n          pBy =\n            iSubSpectra +\n            (lineZValue - povarHeight0) / (povarHeight2 - povarHeight0);\n          lines.push(pAx * dx + x0);\n          lines.push(pAy * dy + y0);\n          lines.push(pBx * dx + x0);\n          lines.push(pBy * dy + y0);\n        }\n        // remove push does not help !!!!\n        if (isOver3 !== isOver1 && isOver3 !== isOver2) {\n          pAx = povar + 1;\n          pAy =\n            iSubSpectra +\n            1 -\n            (lineZValue - povarHeight3) / (povarHeight1 - povarHeight3);\n          pBx =\n            povar +\n            1 -\n            (lineZValue - povarHeight3) / (povarHeight2 - povarHeight3);\n          pBy = iSubSpectra + 1;\n          lines.push(pAx * dx + x0);\n          lines.push(pAy * dy + y0);\n          lines.push(pBx * dx + x0);\n          lines.push(pBy * dy + y0);\n        }\n        // test around the diagonal\n        if (isOver1 !== isOver2) {\n          pAx =\n            (povar +\n              1 -\n              (lineZValue - povarHeight1) / (povarHeight2 - povarHeight1)) *\n              dx +\n            x0;\n          pAy =\n            (iSubSpectra +\n              (lineZValue - povarHeight1) / (povarHeight2 - povarHeight1)) *\n              dy +\n            y0;\n          if (isOver1 !== isOver0) {\n            pBx =\n              povar +\n              1 -\n              (lineZValue - povarHeight1) / (povarHeight0 - povarHeight1);\n            pBy = iSubSpectra;\n            lines.push(pAx);\n            lines.push(pAy);\n            lines.push(pBx * dx + x0);\n            lines.push(pBy * dy + y0);\n          }\n          if (isOver2 !== isOver0) {\n            pBx = povar;\n            pBy =\n              iSubSpectra +\n              1 -\n              (lineZValue - povarHeight2) / (povarHeight0 - povarHeight2);\n            lines.push(pAx);\n            lines.push(pAy);\n            lines.push(pBx * dx + x0);\n            lines.push(pBy * dy + y0);\n          }\n          if (isOver1 !== isOver3) {\n            pBx = povar + 1;\n            pBy =\n              iSubSpectra +\n              (lineZValue - povarHeight1) / (povarHeight3 - povarHeight1);\n            lines.push(pAx);\n            lines.push(pAy);\n            lines.push(pBx * dx + x0);\n            lines.push(pBy * dy + y0);\n          }\n          if (isOver2 !== isOver3) {\n            pBx =\n              povar +\n              (lineZValue - povarHeight2) / (povarHeight3 - povarHeight2);\n            pBy = iSubSpectra + 1;\n            lines.push(pAx);\n            lines.push(pAy);\n            lines.push(pBx * dx + x0);\n            lines.push(pBy * dy + y0);\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    minX: zData.minX,\n    maxX: zData.maxX,\n    minY: zData.minY,\n    maxY: zData.maxY,\n    segments: contourLevels,\n  };\n}\n","import convertTo3DZ from './convertTo3DZ';\nimport generateContourLines from './generateContourLines';\n\nexport default function add2D(result, options) {\n  let zData = convertTo3DZ(result.spectra);\n  if (!options.noContour) {\n    result.contourLines = generateContourLines(zData, options);\n    delete zData.z;\n  }\n  result.minMax = zData;\n}\n","export default function profiling(result, action, options) {\n  if (result.profiling) {\n    result.profiling.push({\n      action,\n      time: Date.now() - options.start,\n    });\n  }\n}\n","export default function simpleChromatogram(result) {\n  let data = result.spectra[0].data;\n  result.chromatogram = {\n    times: data.x.slice(),\n    series: {\n      intensity: {\n        dimension: 1,\n        data: data.y.slice(),\n      },\n    },\n  };\n}\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\n// modified from https://github.com/es-shims/es5-shim\nvar has = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\nvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\nvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\nvar dontEnums = [\n\t'toString',\n\t'toLocaleString',\n\t'valueOf',\n\t'hasOwnProperty',\n\t'isPrototypeOf',\n\t'propertyIsEnumerable',\n\t'constructor'\n];\nvar equalsConstructorPrototype = function (o) {\n\tvar ctor = o.constructor;\n\treturn ctor && ctor.prototype === o;\n};\nvar excludedKeys = {\n\t$applicationCache: true,\n\t$console: true,\n\t$external: true,\n\t$frame: true,\n\t$frameElement: true,\n\t$frames: true,\n\t$innerHeight: true,\n\t$innerWidth: true,\n\t$outerHeight: true,\n\t$outerWidth: true,\n\t$pageXOffset: true,\n\t$pageYOffset: true,\n\t$parent: true,\n\t$scrollLeft: true,\n\t$scrollTop: true,\n\t$scrollX: true,\n\t$scrollY: true,\n\t$self: true,\n\t$webkitIndexedDB: true,\n\t$webkitStorageInfo: true,\n\t$window: true\n};\nvar hasAutomationEqualityBug = (function () {\n\t/* global window */\n\tif (typeof window === 'undefined') { return false; }\n\tfor (var k in window) {\n\t\ttry {\n\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\ttry {\n\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}());\nvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t/* global window */\n\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\treturn equalsConstructorPrototype(o);\n\t}\n\ttry {\n\t\treturn equalsConstructorPrototype(o);\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar keysShim = function keys(object) {\n\tvar isObject = object !== null && typeof object === 'object';\n\tvar isFunction = toStr.call(object) === '[object Function]';\n\tvar isArguments = isArgs(object);\n\tvar isString = isObject && toStr.call(object) === '[object String]';\n\tvar theKeys = [];\n\n\tif (!isObject && !isFunction && !isArguments) {\n\t\tthrow new TypeError('Object.keys called on a non-object');\n\t}\n\n\tvar skipProto = hasProtoEnumBug && isFunction;\n\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\ttheKeys.push(String(i));\n\t\t}\n\t}\n\n\tif (isArguments && object.length > 0) {\n\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\ttheKeys.push(String(j));\n\t\t}\n\t} else {\n\t\tfor (var name in object) {\n\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\ttheKeys.push(String(name));\n\t\t\t}\n\t\t}\n\t}\n\n\tif (hasDontEnumBug) {\n\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t}\n\t\t}\n\t}\n\treturn theKeys;\n};\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\treturn (Object.keys(arguments) || '').length === 2;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tvar originalKeys = Object.keys;\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t} else {\n\t\t\t\t\treturn originalKeys(object);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\n// MODULES //\n\nvar deepCopy = require( 'utils-copy' );\nvar getKeys = require( 'object-keys' ).shim();\n\n\n// COPY ERROR //\n\n/**\n* FUNCTION: copy( error )\n*\tCopies an error.\n*\n* @param {Error|TypeError|SyntaxError|URIError|ReferenceError|RangeError|RangeError|EvalError} error - error to copy\n* @returns {Error|TypeError|SyntaxError|URIError|ReferenceError|RangeError|RangeError|EvalError} error copy\n*/\nfunction copy( error ) {\n\t/* jshint newcap:false */\n\tvar keys;\n\tvar desc;\n\tvar key;\n\tvar err;\n\tvar i;\n\tif ( !( error instanceof Error ) ) {\n\t\tthrow new TypeError( 'invalid input argument. Must provide an error object. Value: `' + error + '`.' );\n\t}\n\t// Create a new error...\n\terr = new error.constructor( error.message );\n\n\t// If a `stack` property is present, copy it over...\n\tif ( error.stack ) {\n\t\terr.stack = error.stack;\n\t}\n\t// Node.js specific (system errors)...\n\tif ( error.code ) {\n\t\terr.code = error.code;\n\t}\n\tif ( error.errno ) {\n\t\terr.errno = error.errno;\n\t}\n\tif ( error.syscall ) {\n\t\terr.syscall = error.syscall;\n\t}\n\t// Any enumerable properties...\n\tkeys = getKeys( error );\n\tfor ( i = 0; i < keys.length; i++ ) {\n\t\tkey = keys[ i ];\n\t\tdesc = Object.getOwnPropertyDescriptor( error, key );\n\t\tif ( desc.hasOwnProperty( 'value' ) ) {\n\t\t\tdesc.value = deepCopy( error[ key ] );\n\t\t}\n\t\tObject.defineProperty( err, key, desc );\n\t}\n\treturn err;\n} // end FUNCTION copy()\n\n\n// EXPORTS //\n\nmodule.exports = copy;\n","'use strict';\n\n// MODULES //\n\nvar objectKeys = require( 'object-keys' );\n\n\n// TYPED ARRAY FUNCTIONS //\n\n/**\n* Create functions for copying typed arrays.\n*/\nvar typedArrays = {\n\t'Int8Array': null,\n\t'Uint8Array': null,\n\t'Uint8ClampedArray': null,\n\t'Int16Array': null,\n\t'Uint16Array': null,\n\t'Int32Array': null,\n\t'Uint32Array': null,\n\t'Float32Array': null,\n\t'Float64Array': null\n};\n\n(function createTypedArrayFcns() {\n\t/* jshint evil:true */\n\tvar keys = objectKeys( typedArrays );\n\tvar len = keys.length;\n\tvar key;\n\tvar i;\n\tfor ( i = 0; i < len; i++ ) {\n\t\tkey = keys[ i ];\n\t\ttypedArrays[ key ] = new Function( 'arr', 'return new '+key+'( arr );' );\n\t}\n})();\n\n\n// EXPORTS //\n\nmodule.exports = typedArrays;\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3_array = {})));\n}(this, function (exports) { 'use strict';\n\n  function ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  function bisector(compare) {\n    if (compare.length === 1) compare = ascendingComparator(compare);\n    return {\n      left: function(a, x, lo, hi) {\n        if (lo == null) lo = 0;\n        if (hi == null) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) < 0) lo = mid + 1;\n          else hi = mid;\n        }\n        return lo;\n      },\n      right: function(a, x, lo, hi) {\n        if (lo == null) lo = 0;\n        if (hi == null) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) > 0) hi = mid;\n          else lo = mid + 1;\n        }\n        return lo;\n      }\n    };\n  }\n\n  function ascendingComparator(f) {\n    return function(d, x) {\n      return ascending(f(d), x);\n    };\n  }\n\n  var ascendingBisect = bisector(ascending);\n  var bisectRight = ascendingBisect.right;\n  var bisectLeft = ascendingBisect.left;\n\n  function descending(a, b) {\n    return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  }\n\n  function number$1(x) {\n    return x === null ? NaN : +x;\n  }\n\n  function variance(array, f) {\n    var n = array.length,\n        m = 0,\n        a,\n        d,\n        s = 0,\n        i = -1,\n        j = 0;\n\n    if (f == null) {\n      while (++i < n) {\n        if (!isNaN(a = number$1(array[i]))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    else {\n      while (++i < n) {\n        if (!isNaN(a = number$1(f(array[i], i, array)))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    if (j > 1) return s / (j - 1);\n  }\n\n  function deviation(array, f) {\n    var v = variance(array, f);\n    return v ? Math.sqrt(v) : v;\n  }\n\n  function extent(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b,\n        c;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = c = b; break; }\n      while (++i < n) if ((b = array[i]) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = c = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n\n    return [a, c];\n  }\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function identity(x) {\n    return x;\n  }\n\n  function range(start, stop, step) {\n    start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n    var i = -1,\n        n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n        range = new Array(n);\n\n    while (++i < n) {\n      range[i] = start + i * step;\n    }\n\n    return range;\n  }\n\n  var e10 = Math.sqrt(50);\n  var e5 = Math.sqrt(10);\n  var e2 = Math.sqrt(2);\n  function ticks(start, stop, count) {\n    var step = tickStep(start, stop, count);\n    return range(\n      Math.ceil(start / step) * step,\n      Math.floor(stop / step) * step + step / 2, // inclusive\n      step\n    );\n  }\n\n  function tickStep(start, stop, count) {\n    var step0 = Math.abs(stop - start) / Math.max(0, count),\n        step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n        error = step0 / step1;\n    if (error >= e10) step1 *= 10;\n    else if (error >= e5) step1 *= 5;\n    else if (error >= e2) step1 *= 2;\n    return stop < start ? -step1 : step1;\n  }\n\n  function sturges(values) {\n    return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n  }\n\n  function number(x) {\n    return +x;\n  }\n\n  function histogram() {\n    var value = identity,\n        domain = extent,\n        threshold = sturges;\n\n    function histogram(data) {\n      var i,\n          n = data.length,\n          x,\n          values = new Array(n);\n\n      // Coerce values to numbers.\n      for (i = 0; i < n; ++i) {\n        values[i] = +value(data[i], i, data);\n      }\n\n      var xz = domain(values),\n          x0 = +xz[0],\n          x1 = +xz[1],\n          tz = threshold(values, x0, x1);\n\n      // Convert number of thresholds into uniform thresholds.\n      if (!Array.isArray(tz)) tz = ticks(x0, x1, +tz);\n\n      // Coerce thresholds to numbers, ignoring any outside the domain.\n      var m = tz.length;\n      for (i = 0; i < m; ++i) tz[i] = +tz[i];\n      while (tz[0] <= x0) tz.shift(), --m;\n      while (tz[m - 1] >= x1) tz.pop(), --m;\n\n      var bins = new Array(m + 1),\n          bin;\n\n      // Initialize bins.\n      for (i = 0; i <= m; ++i) {\n        bin = bins[i] = [];\n        bin.x0 = i > 0 ? tz[i - 1] : x0;\n        bin.x1 = i < m ? tz[i] : x1;\n      }\n\n      // Assign data to bins by value, ignoring any outside the domain.\n      for (i = 0; i < n; ++i) {\n        x = values[i];\n        if (x0 <= x && x <= x1) {\n          bins[bisectRight(tz, x, 0, m)].push(data[i]);\n        }\n      }\n\n      return bins;\n    }\n\n    histogram.value = function(_) {\n      return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), histogram) : value;\n    };\n\n    histogram.domain = function(_) {\n      return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), histogram) : domain;\n    };\n\n    histogram.thresholds = function(_) {\n      if (!arguments.length) return threshold;\n      threshold = typeof _ === \"function\" ? _\n          : Array.isArray(_) ? constant(Array.prototype.map.call(_, number))\n          : constant(+_);\n      return histogram;\n    };\n\n    return histogram;\n  }\n\n  function quantile(array, p, f) {\n    if (f == null) f = number$1;\n    if (!(n = array.length)) return;\n    if ((p = +p) <= 0 || n < 2) return +f(array[0], 0, array);\n    if (p >= 1) return +f(array[n - 1], n - 1, array);\n    var n,\n        h = (n - 1) * p,\n        i = Math.floor(h),\n        a = +f(array[i], i, array),\n        b = +f(array[i + 1], i + 1, array);\n    return a + (b - a) * (h - i);\n  }\n\n  function freedmanDiaconis(values, min, max) {\n    values.sort(ascending);\n    return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(values.length, -1 / 3)));\n  }\n\n  function scott(values, min, max) {\n    return Math.ceil((max - min) / (3.5 * deviation(values) * Math.pow(values.length, -1 / 3)));\n  }\n\n  function max(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = array[i]) != null && b > a) a = b;\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b > a) a = b;\n    }\n\n    return a;\n  }\n\n  function mean(array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1,\n        j = n;\n\n    if (f == null) {\n      while (++i < n) if (!isNaN(a = number$1(array[i]))) s += a; else --j;\n    }\n\n    else {\n      while (++i < n) if (!isNaN(a = number$1(f(array[i], i, array)))) s += a; else --j;\n    }\n\n    if (j) return s / j;\n  }\n\n  function median(array, f) {\n    var numbers = [],\n        n = array.length,\n        a,\n        i = -1;\n\n    if (f == null) {\n      while (++i < n) if (!isNaN(a = number$1(array[i]))) numbers.push(a);\n    }\n\n    else {\n      while (++i < n) if (!isNaN(a = number$1(f(array[i], i, array)))) numbers.push(a);\n    }\n\n    return quantile(numbers.sort(ascending), 0.5);\n  }\n\n  function merge(arrays) {\n    var n = arrays.length,\n        m,\n        i = -1,\n        j = 0,\n        merged,\n        array;\n\n    while (++i < n) j += arrays[i].length;\n    merged = new Array(j);\n\n    while (--n >= 0) {\n      array = arrays[n];\n      m = array.length;\n      while (--m >= 0) {\n        merged[--j] = array[m];\n      }\n    }\n\n    return merged;\n  }\n\n  function min(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = array[i]) != null && a > b) a = b;\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null && a > b) a = b;\n    }\n\n    return a;\n  }\n\n  function pairs(array) {\n    var i = 0, n = array.length - 1, p = array[0], pairs = new Array(n < 0 ? 0 : n);\n    while (i < n) pairs[i] = [p, p = array[++i]];\n    return pairs;\n  }\n\n  function permute(array, indexes) {\n    var i = indexes.length, permutes = new Array(i);\n    while (i--) permutes[i] = array[indexes[i]];\n    return permutes;\n  }\n\n  function scan(array, compare) {\n    if (!(n = array.length)) return;\n    var i = 0,\n        n,\n        j = 0,\n        xi,\n        xj = array[j];\n\n    if (!compare) compare = ascending;\n\n    while (++i < n) if (compare(xi = array[i], xj) < 0 || compare(xj, xj) !== 0) xj = xi, j = i;\n\n    if (compare(xj, xj) === 0) return j;\n  }\n\n  function shuffle(array, i0, i1) {\n    var m = (i1 == null ? array.length : i1) - (i0 = i0 == null ? 0 : +i0),\n        t,\n        i;\n\n    while (m) {\n      i = Math.random() * m-- | 0;\n      t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n\n    return array;\n  }\n\n  function sum(array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1;\n\n    if (f == null) {\n      while (++i < n) if (a = +array[i]) s += a; // Note: zero and null are equivalent.\n    }\n\n    else {\n      while (++i < n) if (a = +f(array[i], i, array)) s += a;\n    }\n\n    return s;\n  }\n\n  function transpose(matrix) {\n    if (!(n = matrix.length)) return [];\n    for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n      for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n        row[j] = matrix[j][i];\n      }\n    }\n    return transpose;\n  }\n\n  function length(d) {\n    return d.length;\n  }\n\n  function zip() {\n    return transpose(arguments);\n  }\n\n  var version = \"0.7.1\";\n\n  exports.version = version;\n  exports.bisect = bisectRight;\n  exports.bisectRight = bisectRight;\n  exports.bisectLeft = bisectLeft;\n  exports.ascending = ascending;\n  exports.bisector = bisector;\n  exports.descending = descending;\n  exports.deviation = deviation;\n  exports.extent = extent;\n  exports.histogram = histogram;\n  exports.thresholdFreedmanDiaconis = freedmanDiaconis;\n  exports.thresholdScott = scott;\n  exports.thresholdSturges = sturges;\n  exports.max = max;\n  exports.mean = mean;\n  exports.median = median;\n  exports.merge = merge;\n  exports.min = min;\n  exports.pairs = pairs;\n  exports.permute = permute;\n  exports.quantile = quantile;\n  exports.range = range;\n  exports.scan = scan;\n  exports.shuffle = shuffle;\n  exports.sum = sum;\n  exports.ticks = ticks;\n  exports.tickStep = tickStep;\n  exports.transpose = transpose;\n  exports.variance = variance;\n  exports.zip = zip;\n\n}));","/**\n * Fast Fourier Transform module\n * 1D-FFT/IFFT, 2D-FFT/IFFT (radix-2)\n */\nvar FFT = (function(){\n  var FFT;  \n  \n  if(typeof exports !== 'undefined') {\n    FFT = exports;   // for CommonJS\n  } else {\n    FFT = {};\n  }\n  \n  var version = {\n    release: '0.3.0',\n    date: '2013-03'\n  };\n  FFT.toString = function() {\n    return \"version \" + version.release + \", released \" + version.date;\n  };\n\n  // core operations\n  var _n = 0,          // order\n      _bitrev = null,  // bit reversal table\n      _cstb = null;    // sin/cos table\n\n  var core = {\n    init : function(n) {\n      if(n !== 0 && (n & (n - 1)) === 0) {\n        _n = n;\n        core._initArray();\n        core._makeBitReversalTable();\n        core._makeCosSinTable();\n      } else {\n        throw new Error(\"init: radix-2 required\");\n      }\n    },\n    // 1D-FFT\n    fft1d : function(re, im) {\n      core.fft(re, im, 1);\n    },\n    // 1D-IFFT\n    ifft1d : function(re, im) {\n      var n = 1/_n;\n      core.fft(re, im, -1);\n      for(var i=0; i<_n; i++) {\n        re[i] *= n;\n        im[i] *= n;\n      }\n    },\n     // 1D-IFFT\n    bt1d : function(re, im) {\n      core.fft(re, im, -1);\n    },\n    // 2D-FFT Not very useful if the number of rows have to be equal to cols\n    fft2d : function(re, im) {\n      var tre = [],\n          tim = [],\n          i = 0;\n      // x-axis\n      for(var y=0; y<_n; y++) {\n        i = y*_n;\n        for(var x1=0; x1<_n; x1++) {\n          tre[x1] = re[x1 + i];\n          tim[x1] = im[x1 + i];\n        }\n        core.fft1d(tre, tim);\n        for(var x2=0; x2<_n; x2++) {\n          re[x2 + i] = tre[x2];\n          im[x2 + i] = tim[x2];\n        }\n      }\n      // y-axis\n      for(var x=0; x<_n; x++) {\n        for(var y1=0; y1<_n; y1++) {\n          i = x + y1*_n;\n          tre[y1] = re[i];\n          tim[y1] = im[i];\n        }\n        core.fft1d(tre, tim);\n        for(var y2=0; y2<_n; y2++) {\n          i = x + y2*_n;\n          re[i] = tre[y2];\n          im[i] = tim[y2];\n        }\n      }\n    },\n    // 2D-IFFT\n    ifft2d : function(re, im) {\n      var tre = [],\n          tim = [],\n          i = 0;\n      // x-axis\n      for(var y=0; y<_n; y++) {\n        i = y*_n;\n        for(var x1=0; x1<_n; x1++) {\n          tre[x1] = re[x1 + i];\n          tim[x1] = im[x1 + i];\n        }\n        core.ifft1d(tre, tim);\n        for(var x2=0; x2<_n; x2++) {\n          re[x2 + i] = tre[x2];\n          im[x2 + i] = tim[x2];\n        }\n      }\n      // y-axis\n      for(var x=0; x<_n; x++) {\n        for(var y1=0; y1<_n; y1++) {\n          i = x + y1*_n;\n          tre[y1] = re[i];\n          tim[y1] = im[i];\n        }\n        core.ifft1d(tre, tim);\n        for(var y2=0; y2<_n; y2++) {\n          i = x + y2*_n;\n          re[i] = tre[y2];\n          im[i] = tim[y2];\n        }\n      }\n    },\n    // core operation of FFT\n    fft : function(re, im, inv) {\n      var d, h, ik, m, tmp, wr, wi, xr, xi,\n          n4 = _n >> 2;\n      // bit reversal\n      for(var l=0; l<_n; l++) {\n        m = _bitrev[l];\n        if(l < m) {\n          tmp = re[l];\n          re[l] = re[m];\n          re[m] = tmp;\n          tmp = im[l];\n          im[l] = im[m];\n          im[m] = tmp;\n        }\n      }\n      // butterfly operation\n      for(var k=1; k<_n; k<<=1) {\n        h = 0;\n        d = _n/(k << 1);\n        for(var j=0; j<k; j++) {\n          wr = _cstb[h + n4];\n          wi = inv*_cstb[h];\n          for(var i=j; i<_n; i+=(k<<1)) {\n            ik = i + k;\n            xr = wr*re[ik] + wi*im[ik];\n            xi = wr*im[ik] - wi*re[ik];\n            re[ik] = re[i] - xr;\n            re[i] += xr;\n            im[ik] = im[i] - xi;\n            im[i] += xi;\n          }\n          h += d;\n        }\n      }\n    },\n    // initialize the array (supports TypedArray)\n    _initArray : function() {\n      if(typeof Uint32Array !== 'undefined') {\n        _bitrev = new Uint32Array(_n);\n      } else {\n        _bitrev = [];\n      }\n      if(typeof Float64Array !== 'undefined') {\n        _cstb = new Float64Array(_n*1.25);\n      } else {\n        _cstb = [];\n      }\n    },\n    // zero padding\n    _paddingZero : function() {\n      // TODO\n    },\n    // makes bit reversal table\n    _makeBitReversalTable : function() {\n      var i = 0,\n          j = 0,\n          k = 0;\n      _bitrev[0] = 0;\n      while(++i < _n) {\n        k = _n >> 1;\n        while(k <= j) {\n          j -= k;\n          k >>= 1;\n        }\n        j += k;\n        _bitrev[i] = j;\n      }\n    },\n    // makes trigonometiric function table\n    _makeCosSinTable : function() {\n      var n2 = _n >> 1,\n          n4 = _n >> 2,\n          n8 = _n >> 3,\n          n2p4 = n2 + n4,\n          t = Math.sin(Math.PI/_n),\n          dc = 2*t*t,\n          ds = Math.sqrt(dc*(2 - dc)),\n          c = _cstb[n4] = 1,\n          s = _cstb[0] = 0;\n      t = 2*dc;\n      for(var i=1; i<n8; i++) {\n        c -= dc;\n        dc += t*c;\n        s += ds;\n        ds -= t*s;\n        _cstb[i] = s;\n        _cstb[n4 - i] = c;\n      }\n      if(n8 !== 0) {\n        _cstb[n8] = Math.sqrt(0.5);\n      }\n      for(var j=0; j<n4; j++) {\n        _cstb[n2 - j]  = _cstb[j];\n      }\n      for(var k=0; k<n2p4; k++) {\n        _cstb[k + n2] = -_cstb[k];\n      }\n    }\n  };\n  // aliases (public APIs)\n  var apis = ['init', 'fft1d', 'ifft1d', 'fft2d', 'ifft2d'];\n  for(var i=0; i<apis.length; i++) {\n    FFT[apis[i]] = core[apis[i]];\n  }\n  FFT.bt = core.bt1d;\n  FFT.fft = core.fft1d;\n  FFT.ifft = core.ifft1d;\n  \n  return FFT;\n}).call(this);\n","'use strict';\n\nfunction compareNumbers(a, b) {\n    return a - b;\n}\n\n/**\n * Computes the sum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.sum = function sum(values) {\n    var sum = 0;\n    for (var i = 0; i < values.length; i++) {\n        sum += values[i];\n    }\n    return sum;\n};\n\n/**\n * Computes the maximum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.max = function max(values) {\n    var max = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] > max) max = values[i];\n    }\n    return max;\n};\n\n/**\n * Computes the minimum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.min = function min(values) {\n    var min = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] < min) min = values[i];\n    }\n    return min;\n};\n\n/**\n * Computes the min and max of the given values\n * @param {Array} values\n * @returns {{min: number, max: number}}\n */\nexports.minMax = function minMax(values) {\n    var min = values[0];\n    var max = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] < min) min = values[i];\n        if (values[i] > max) max = values[i];\n    }\n    return {\n        min: min,\n        max: max\n    };\n};\n\n/**\n * Computes the arithmetic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.arithmeticMean = function arithmeticMean(values) {\n    var sum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        sum += values[i];\n    }\n    return sum / l;\n};\n\n/**\n * {@link arithmeticMean}\n */\nexports.mean = exports.arithmeticMean;\n\n/**\n * Computes the geometric mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.geometricMean = function geometricMean(values) {\n    var mul = 1;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        mul *= values[i];\n    }\n    return Math.pow(mul, 1 / l);\n};\n\n/**\n * Computes the mean of the log of the given values\n * If the return value is exponentiated, it gives the same result as the\n * geometric mean.\n * @param {Array} values\n * @returns {number}\n */\nexports.logMean = function logMean(values) {\n    var lnsum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        lnsum += Math.log(values[i]);\n    }\n    return lnsum / l;\n};\n\n/**\n * Computes the weighted grand mean for a list of means and sample sizes\n * @param {Array} means - Mean values for each set of samples\n * @param {Array} samples - Number of original values for each set of samples\n * @returns {number}\n */\nexports.grandMean = function grandMean(means, samples) {\n    var sum = 0;\n    var n = 0;\n    var l = means.length;\n    for (var i = 0; i < l; i++) {\n        sum += samples[i] * means[i];\n        n += samples[i];\n    }\n    return sum / n;\n};\n\n/**\n * Computes the truncated mean of the given values using a given percentage\n * @param {Array} values\n * @param {number} percent - The percentage of values to keep (range: [0,1])\n * @param {boolean} [alreadySorted=false]\n * @returns {number}\n */\nexports.truncatedMean = function truncatedMean(values, percent, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n    var l = values.length;\n    var k = Math.floor(l * percent);\n    var sum = 0;\n    for (var i = k; i < (l - k); i++) {\n        sum += values[i];\n    }\n    return sum / (l - 2 * k);\n};\n\n/**\n * Computes the harmonic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.harmonicMean = function harmonicMean(values) {\n    var sum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        if (values[i] === 0) {\n            throw new RangeError('value at index ' + i + 'is zero');\n        }\n        sum += 1 / values[i];\n    }\n    return l / sum;\n};\n\n/**\n * Computes the contraharmonic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.contraHarmonicMean = function contraHarmonicMean(values) {\n    var r1 = 0;\n    var r2 = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        r1 += values[i] * values[i];\n        r2 += values[i];\n    }\n    if (r2 < 0) {\n        throw new RangeError('sum of values is negative');\n    }\n    return r1 / r2;\n};\n\n/**\n * Computes the median of the given values\n * @param {Array} values\n * @param {boolean} [alreadySorted=false]\n * @returns {number}\n */\nexports.median = function median(values, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n    var l = values.length;\n    var half = Math.floor(l / 2);\n    if (l % 2 === 0) {\n        return (values[half - 1] + values[half]) * 0.5;\n    } else {\n        return values[half];\n    }\n};\n\n/**\n * Computes the variance of the given values\n * @param {Array} values\n * @param {boolean} [unbiased=true] - if true, divide by (n-1); if false, divide by n.\n * @returns {number}\n */\nexports.variance = function variance(values, unbiased) {\n    if (unbiased === undefined) unbiased = true;\n    var theMean = exports.mean(values);\n    var theVariance = 0;\n    var l = values.length;\n\n    for (var i = 0; i < l; i++) {\n        var x = values[i] - theMean;\n        theVariance += x * x;\n    }\n\n    if (unbiased) {\n        return theVariance / (l - 1);\n    } else {\n        return theVariance / l;\n    }\n};\n\n/**\n * Computes the standard deviation of the given values\n * @param {Array} values\n * @param {boolean} [unbiased=true] - if true, divide by (n-1); if false, divide by n.\n * @returns {number}\n */\nexports.standardDeviation = function standardDeviation(values, unbiased) {\n    return Math.sqrt(exports.variance(values, unbiased));\n};\n\nexports.standardError = function standardError(values) {\n    return exports.standardDeviation(values) / Math.sqrt(values.length);\n};\n\n/**\n * IEEE Transactions on biomedical engineering, vol. 52, no. 1, january 2005, p. 76-\n * Calculate the standard deviation via the Median of the absolute deviation\n *  The formula for the standard deviation only holds for Gaussian random variables.\n * @returns {{mean: number, stdev: number}}\n */\nexports.robustMeanAndStdev = function robustMeanAndStdev(y) {\n    var mean = 0, stdev = 0;\n    var length = y.length, i = 0;\n    for (i = 0; i < length; i++) {\n        mean += y[i];\n    }\n    mean /= length;\n    var averageDeviations = new Array(length);\n    for (i = 0; i < length; i++)\n        averageDeviations[i] = Math.abs(y[i] - mean);\n    averageDeviations.sort(compareNumbers);\n    if (length % 2 === 1) {\n        stdev = averageDeviations[(length - 1) / 2] / 0.6745;\n    } else {\n        stdev = 0.5 * (averageDeviations[length / 2] + averageDeviations[length / 2 - 1]) / 0.6745;\n    }\n\n    return {\n        mean: mean,\n        stdev: stdev\n    };\n};\n\nexports.quartiles = function quartiles(values, alreadySorted) {\n    if (typeof (alreadySorted) === 'undefined') alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n\n    var quart = values.length / 4;\n    var q1 = values[Math.ceil(quart) - 1];\n    var q2 = exports.median(values, true);\n    var q3 = values[Math.ceil(quart * 3) - 1];\n\n    return {q1: q1, q2: q2, q3: q3};\n};\n\nexports.pooledStandardDeviation = function pooledStandardDeviation(samples, unbiased) {\n    return Math.sqrt(exports.pooledVariance(samples, unbiased));\n};\n\nexports.pooledVariance = function pooledVariance(samples, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var sum = 0;\n    var length = 0, l = samples.length;\n    for (var i = 0; i < l; i++) {\n        var values = samples[i];\n        var vari = exports.variance(values);\n\n        sum += (values.length - 1) * vari;\n\n        if (unbiased)\n            length += values.length - 1;\n        else\n            length += values.length;\n    }\n    return sum / length;\n};\n\nexports.mode = function mode(values) {\n    var l = values.length,\n        itemCount = new Array(l),\n        i;\n    for (i = 0; i < l; i++) {\n        itemCount[i] = 0;\n    }\n    var itemArray = new Array(l);\n    var count = 0;\n\n    for (i = 0; i < l; i++) {\n        var index = itemArray.indexOf(values[i]);\n        if (index >= 0)\n            itemCount[index]++;\n        else {\n            itemArray[count] = values[i];\n            itemCount[count] = 1;\n            count++;\n        }\n    }\n\n    var maxValue = 0, maxIndex = 0;\n    for (i = 0; i < count; i++) {\n        if (itemCount[i] > maxValue) {\n            maxValue = itemCount[i];\n            maxIndex = i;\n        }\n    }\n\n    return itemArray[maxIndex];\n};\n\nexports.covariance = function covariance(vector1, vector2, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var mean1 = exports.mean(vector1);\n    var mean2 = exports.mean(vector2);\n\n    if (vector1.length !== vector2.length)\n        throw 'Vectors do not have the same dimensions';\n\n    var cov = 0, l = vector1.length;\n    for (var i = 0; i < l; i++) {\n        var x = vector1[i] - mean1;\n        var y = vector2[i] - mean2;\n        cov += x * y;\n    }\n\n    if (unbiased)\n        return cov / (l - 1);\n    else\n        return cov / l;\n};\n\nexports.skewness = function skewness(values, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var theMean = exports.mean(values);\n\n    var s2 = 0, s3 = 0, l = values.length;\n    for (var i = 0; i < l; i++) {\n        var dev = values[i] - theMean;\n        s2 += dev * dev;\n        s3 += dev * dev * dev;\n    }\n    var m2 = s2 / l;\n    var m3 = s3 / l;\n\n    var g = m3 / (Math.pow(m2, 3 / 2.0));\n    if (unbiased) {\n        var a = Math.sqrt(l * (l - 1));\n        var b = l - 2;\n        return (a / b) * g;\n    } else {\n        return g;\n    }\n};\n\nexports.kurtosis = function kurtosis(values, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var theMean = exports.mean(values);\n    var n = values.length, s2 = 0, s4 = 0;\n\n    for (var i = 0; i < n; i++) {\n        var dev = values[i] - theMean;\n        s2 += dev * dev;\n        s4 += dev * dev * dev * dev;\n    }\n    var m2 = s2 / n;\n    var m4 = s4 / n;\n\n    if (unbiased) {\n        var v = s2 / (n - 1);\n        var a = (n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3));\n        var b = s4 / (v * v);\n        var c = ((n - 1) * (n - 1)) / ((n - 2) * (n - 3));\n\n        return a * b - 3 * c;\n    } else {\n        return m4 / (m2 * m2) - 3;\n    }\n};\n\nexports.entropy = function entropy(values, eps) {\n    if (typeof (eps) === 'undefined') eps = 0;\n    var sum = 0, l = values.length;\n    for (var i = 0; i < l; i++)\n        sum += values[i] * Math.log(values[i] + eps);\n    return -sum;\n};\n\nexports.weightedMean = function weightedMean(values, weights) {\n    var sum = 0, l = values.length;\n    for (var i = 0; i < l; i++)\n        sum += values[i] * weights[i];\n    return sum;\n};\n\nexports.weightedStandardDeviation = function weightedStandardDeviation(values, weights) {\n    return Math.sqrt(exports.weightedVariance(values, weights));\n};\n\nexports.weightedVariance = function weightedVariance(values, weights) {\n    var theMean = exports.weightedMean(values, weights);\n    var vari = 0, l = values.length;\n    var a = 0, b = 0;\n\n    for (var i = 0; i < l; i++) {\n        var z = values[i] - theMean;\n        var w = weights[i];\n\n        vari += w * (z * z);\n        b += w;\n        a += w * w;\n    }\n\n    return vari * (b / (b * b - a));\n};\n\nexports.center = function center(values, inPlace) {\n    if (typeof (inPlace) === 'undefined') inPlace = false;\n\n    var result = values;\n    if (!inPlace)\n        result = [].concat(values);\n\n    var theMean = exports.mean(result), l = result.length;\n    for (var i = 0; i < l; i++)\n        result[i] -= theMean;\n};\n\nexports.standardize = function standardize(values, standardDev, inPlace) {\n    if (typeof (standardDev) === 'undefined') standardDev = exports.standardDeviation(values);\n    if (typeof (inPlace) === 'undefined') inPlace = false;\n    var l = values.length;\n    var result = inPlace ? values : new Array(l);\n    for (var i = 0; i < l; i++)\n        result[i] = values[i] / standardDev;\n    return result;\n};\n\nexports.cumulativeSum = function cumulativeSum(array) {\n    var l = array.length;\n    var result = new Array(l);\n    result[0] = array[0];\n    for (var i = 1; i < l; i++)\n        result[i] = result[i - 1] + array[i];\n    return result;\n};\n","'use strict';\n\nvar arrayStat = require('./array');\n\nfunction compareNumbers(a, b) {\n    return a - b;\n}\n\nexports.max = function max(matrix) {\n    var max = -Infinity;\n    for (var i = 0; i < matrix.length; i++) {\n        for (var j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j] > max) max = matrix[i][j];\n        }\n    }\n    return max;\n};\n\nexports.min = function min(matrix) {\n    var min = Infinity;\n    for (var i = 0; i < matrix.length; i++) {\n        for (var j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j] < min) min = matrix[i][j];\n        }\n    }\n    return min;\n};\n\nexports.minMax = function minMax(matrix) {\n    var min = Infinity;\n    var max = -Infinity;\n    for (var i = 0; i < matrix.length; i++) {\n        for (var j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j] < min) min = matrix[i][j];\n            if (matrix[i][j] > max) max = matrix[i][j];\n        }\n    }\n    return {\n        min:min,\n        max:max\n    };\n};\n\nexports.entropy = function entropy(matrix, eps) {\n    if (typeof (eps) === 'undefined') {\n        eps = 0;\n    }\n    var sum = 0,\n        l1 = matrix.length,\n        l2 = matrix[0].length;\n    for (var i = 0; i < l1; i++) {\n        for (var j = 0; j < l2; j++) {\n            sum += matrix[i][j] * Math.log(matrix[i][j] + eps);\n        }\n    }\n    return -sum;\n};\n\nexports.mean = function mean(matrix, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        theMean, N, i, j;\n\n    if (dimension === -1) {\n        theMean = [0];\n        N = rows * cols;\n        for (i = 0; i < rows; i++) {\n            for (j = 0; j < cols; j++) {\n                theMean[0] += matrix[i][j];\n            }\n        }\n        theMean[0] /= N;\n    } else if (dimension === 0) {\n        theMean = new Array(cols);\n        N = rows;\n        for (j = 0; j < cols; j++) {\n            theMean[j] = 0;\n            for (i = 0; i < rows; i++) {\n                theMean[j] += matrix[i][j];\n            }\n            theMean[j] /= N;\n        }\n    } else if (dimension === 1) {\n        theMean = new Array(rows);\n        N = cols;\n        for (j = 0; j < rows; j++) {\n            theMean[j] = 0;\n            for (i = 0; i < cols; i++) {\n                theMean[j] += matrix[j][i];\n            }\n            theMean[j] /= N;\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n    return theMean;\n};\n\nexports.sum = function sum(matrix, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        theSum, i, j;\n\n    if (dimension === -1) {\n        theSum = [0];\n        for (i = 0; i < rows; i++) {\n            for (j = 0; j < cols; j++) {\n                theSum[0] += matrix[i][j];\n            }\n        }\n    } else if (dimension === 0) {\n        theSum = new Array(cols);\n        for (j = 0; j < cols; j++) {\n            theSum[j] = 0;\n            for (i = 0; i < rows; i++) {\n                theSum[j] += matrix[i][j];\n            }\n        }\n    } else if (dimension === 1) {\n        theSum = new Array(rows);\n        for (j = 0; j < rows; j++) {\n            theSum[j] = 0;\n            for (i = 0; i < cols; i++) {\n                theSum[j] += matrix[j][i];\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n    return theSum;\n};\n\nexports.product = function product(matrix, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        theProduct, i, j;\n\n    if (dimension === -1) {\n        theProduct = [1];\n        for (i = 0; i < rows; i++) {\n            for (j = 0; j < cols; j++) {\n                theProduct[0] *= matrix[i][j];\n            }\n        }\n    } else if (dimension === 0) {\n        theProduct = new Array(cols);\n        for (j = 0; j < cols; j++) {\n            theProduct[j] = 1;\n            for (i = 0; i < rows; i++) {\n                theProduct[j] *= matrix[i][j];\n            }\n        }\n    } else if (dimension === 1) {\n        theProduct = new Array(rows);\n        for (j = 0; j < rows; j++) {\n            theProduct[j] = 1;\n            for (i = 0; i < cols; i++) {\n                theProduct[j] *= matrix[j][i];\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n    return theProduct;\n};\n\nexports.standardDeviation = function standardDeviation(matrix, means, unbiased) {\n    var vari = exports.variance(matrix, means, unbiased), l = vari.length;\n    for (var i = 0; i < l; i++) {\n        vari[i] = Math.sqrt(vari[i]);\n    }\n    return vari;\n};\n\nexports.variance = function variance(matrix, means, unbiased) {\n    if (typeof (unbiased) === 'undefined') {\n        unbiased = true;\n    }\n    means = means || exports.mean(matrix);\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length;\n    var vari = new Array(cols);\n\n    for (var j = 0; j < cols; j++) {\n        var sum1 = 0, sum2 = 0, x = 0;\n        for (var i = 0; i < rows; i++) {\n            x = matrix[i][j] - means[j];\n            sum1 += x;\n            sum2 += x * x;\n        }\n        if (unbiased) {\n            vari[j] = (sum2 - ((sum1 * sum1) / rows)) / (rows - 1);\n        } else {\n            vari[j] = (sum2 - ((sum1 * sum1) / rows)) / rows;\n        }\n    }\n    return vari;\n};\n\nexports.median = function median(matrix) {\n    var rows = matrix.length, cols = matrix[0].length;\n    var medians = new Array(cols);\n\n    for (var i = 0; i < cols; i++) {\n        var data = new Array(rows);\n        for (var j = 0; j < rows; j++) {\n            data[j] = matrix[j][i];\n        }\n        data.sort(compareNumbers);\n        var N = data.length;\n        if (N % 2 === 0) {\n            medians[i] = (data[N / 2] + data[(N / 2) - 1]) * 0.5;\n        } else {\n            medians[i] = data[Math.floor(N / 2)];\n        }\n    }\n    return medians;\n};\n\nexports.mode = function mode(matrix) {\n    var rows = matrix.length,\n        cols = matrix[0].length,\n        modes = new Array(cols),\n        i, j;\n    for (i = 0; i < cols; i++) {\n        var itemCount = new Array(rows);\n        for (var k = 0; k < rows; k++) {\n            itemCount[k] = 0;\n        }\n        var itemArray = new Array(rows);\n        var count = 0;\n\n        for (j = 0; j < rows; j++) {\n            var index = itemArray.indexOf(matrix[j][i]);\n            if (index >= 0) {\n                itemCount[index]++;\n            } else {\n                itemArray[count] = matrix[j][i];\n                itemCount[count] = 1;\n                count++;\n            }\n        }\n\n        var maxValue = 0, maxIndex = 0;\n        for (j = 0; j < count; j++) {\n            if (itemCount[j] > maxValue) {\n                maxValue = itemCount[j];\n                maxIndex = j;\n            }\n        }\n\n        modes[i] = itemArray[maxIndex];\n    }\n    return modes;\n};\n\nexports.skewness = function skewness(matrix, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var means = exports.mean(matrix);\n    var n = matrix.length, l = means.length;\n    var skew = new Array(l);\n\n    for (var j = 0; j < l; j++) {\n        var s2 = 0, s3 = 0;\n        for (var i = 0; i < n; i++) {\n            var dev = matrix[i][j] - means[j];\n            s2 += dev * dev;\n            s3 += dev * dev * dev;\n        }\n\n        var m2 = s2 / n;\n        var m3 = s3 / n;\n        var g = m3 / Math.pow(m2, 3 / 2);\n\n        if (unbiased) {\n            var a = Math.sqrt(n * (n - 1));\n            var b = n - 2;\n            skew[j] = (a / b) * g;\n        } else {\n            skew[j] = g;\n        }\n    }\n    return skew;\n};\n\nexports.kurtosis = function kurtosis(matrix, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var means = exports.mean(matrix);\n    var n = matrix.length, m = matrix[0].length;\n    var kurt = new Array(m);\n\n    for (var j = 0; j < m; j++) {\n        var s2 = 0, s4 = 0;\n        for (var i = 0; i < n; i++) {\n            var dev = matrix[i][j] - means[j];\n            s2 += dev * dev;\n            s4 += dev * dev * dev * dev;\n        }\n        var m2 = s2 / n;\n        var m4 = s4 / n;\n\n        if (unbiased) {\n            var v = s2 / (n - 1);\n            var a = (n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3));\n            var b = s4 / (v * v);\n            var c = ((n - 1) * (n - 1)) / ((n - 2) * (n - 3));\n            kurt[j] = a * b - 3 * c;\n        } else {\n            kurt[j] = m4 / (m2 * m2) - 3;\n        }\n    }\n    return kurt;\n};\n\nexports.standardError = function standardError(matrix) {\n    var samples = matrix.length;\n    var standardDeviations = exports.standardDeviation(matrix);\n    var l = standardDeviations.length;\n    var standardErrors = new Array(l);\n    var sqrtN = Math.sqrt(samples);\n\n    for (var i = 0; i < l; i++) {\n        standardErrors[i] = standardDeviations[i] / sqrtN;\n    }\n    return standardErrors;\n};\n\nexports.covariance = function covariance(matrix, dimension) {\n    return exports.scatter(matrix, undefined, dimension);\n};\n\nexports.scatter = function scatter(matrix, divisor, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    if (typeof (divisor) === 'undefined') {\n        if (dimension === 0) {\n            divisor = matrix.length - 1;\n        } else if (dimension === 1) {\n            divisor = matrix[0].length - 1;\n        }\n    }\n    var means = exports.mean(matrix, dimension);\n    var rows = matrix.length;\n    if (rows === 0) {\n        return [[]];\n    }\n    var cols = matrix[0].length,\n        cov, i, j, s, k;\n\n    if (dimension === 0) {\n        cov = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            cov[i] = new Array(cols);\n        }\n        for (i = 0; i < cols; i++) {\n            for (j = i; j < cols; j++) {\n                s = 0;\n                for (k = 0; k < rows; k++) {\n                    s += (matrix[k][j] - means[j]) * (matrix[k][i] - means[i]);\n                }\n                s /= divisor;\n                cov[i][j] = s;\n                cov[j][i] = s;\n            }\n        }\n    } else if (dimension === 1) {\n        cov = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            cov[i] = new Array(rows);\n        }\n        for (i = 0; i < rows; i++) {\n            for (j = i; j < rows; j++) {\n                s = 0;\n                for (k = 0; k < cols; k++) {\n                    s += (matrix[j][k] - means[j]) * (matrix[i][k] - means[i]);\n                }\n                s /= divisor;\n                cov[i][j] = s;\n                cov[j][i] = s;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    return cov;\n};\n\nexports.correlation = function correlation(matrix) {\n    var means = exports.mean(matrix),\n        standardDeviations = exports.standardDeviation(matrix, true, means),\n        scores = exports.zScores(matrix, means, standardDeviations),\n        rows = matrix.length,\n        cols = matrix[0].length,\n        i, j;\n\n    var cor = new Array(cols);\n    for (i = 0; i < cols; i++) {\n        cor[i] = new Array(cols);\n    }\n    for (i = 0; i < cols; i++) {\n        for (j = i; j < cols; j++) {\n            var c = 0;\n            for (var k = 0, l = scores.length; k < l; k++) {\n                c += scores[k][j] * scores[k][i];\n            }\n            c /= rows - 1;\n            cor[i][j] = c;\n            cor[j][i] = c;\n        }\n    }\n    return cor;\n};\n\nexports.zScores = function zScores(matrix, means, standardDeviations) {\n    means = means || exports.mean(matrix);\n    if (typeof (standardDeviations) === 'undefined') standardDeviations = exports.standardDeviation(matrix, true, means);\n    return exports.standardize(exports.center(matrix, means, false), standardDeviations, true);\n};\n\nexports.center = function center(matrix, means, inPlace) {\n    means = means || exports.mean(matrix);\n    var result = matrix,\n        l = matrix.length,\n        i, j, jj;\n\n    if (!inPlace) {\n        result = new Array(l);\n        for (i = 0; i < l; i++) {\n            result[i] = new Array(matrix[i].length);\n        }\n    }\n\n    for (i = 0; i < l; i++) {\n        var row = result[i];\n        for (j = 0, jj = row.length; j < jj; j++) {\n            row[j] = matrix[i][j] - means[j];\n        }\n    }\n    return result;\n};\n\nexports.standardize = function standardize(matrix, standardDeviations, inPlace) {\n    if (typeof (standardDeviations) === 'undefined') standardDeviations = exports.standardDeviation(matrix);\n    var result = matrix,\n        l = matrix.length,\n        i, j, jj;\n\n    if (!inPlace) {\n        result = new Array(l);\n        for (i = 0; i < l; i++) {\n            result[i] = new Array(matrix[i].length);\n        }\n    }\n\n    for (i = 0; i < l; i++) {\n        var resultRow = result[i];\n        var sourceRow = matrix[i];\n        for (j = 0, jj = resultRow.length; j < jj; j++) {\n            if (standardDeviations[j] !== 0 && !isNaN(standardDeviations[j])) {\n                resultRow[j] = sourceRow[j] / standardDeviations[j];\n            }\n        }\n    }\n    return result;\n};\n\nexports.weightedVariance = function weightedVariance(matrix, weights) {\n    var means = exports.mean(matrix);\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length;\n    var vari = new Array(cols);\n\n    for (var j = 0; j < cols; j++) {\n        var sum = 0;\n        var a = 0, b = 0;\n\n        for (var i = 0; i < rows; i++) {\n            var z = matrix[i][j] - means[j];\n            var w = weights[i];\n\n            sum += w * (z * z);\n            b += w;\n            a += w * w;\n        }\n\n        vari[j] = sum * (b / (b * b - a));\n    }\n\n    return vari;\n};\n\nexports.weightedMean = function weightedMean(matrix, weights, dimension) {\n    if (typeof (dimension) === 'undefined') {\n        dimension = 0;\n    }\n    var rows = matrix.length;\n    if (rows === 0) return [];\n    var cols = matrix[0].length,\n        means, i, ii, j, w, row;\n\n    if (dimension === 0) {\n        means = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            means[i] = 0;\n        }\n        for (i = 0; i < rows; i++) {\n            row = matrix[i];\n            w = weights[i];\n            for (j = 0; j < cols; j++) {\n                means[j] += row[j] * w;\n            }\n        }\n    } else if (dimension === 1) {\n        means = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            means[i] = 0;\n        }\n        for (j = 0; j < rows; j++) {\n            row = matrix[j];\n            w = weights[j];\n            for (i = 0; i < cols; i++) {\n                means[j] += row[i] * w;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    var weightSum = arrayStat.sum(weights);\n    if (weightSum !== 0) {\n        for (i = 0, ii = means.length; i < ii; i++) {\n            means[i] /= weightSum;\n        }\n    }\n    return means;\n};\n\nexports.weightedCovariance = function weightedCovariance(matrix, weights, means, dimension) {\n    dimension = dimension || 0;\n    means = means || exports.weightedMean(matrix, weights, dimension);\n    var s1 = 0, s2 = 0;\n    for (var i = 0, ii = weights.length; i < ii; i++) {\n        s1 += weights[i];\n        s2 += weights[i] * weights[i];\n    }\n    var factor = s1 / (s1 * s1 - s2);\n    return exports.weightedScatter(matrix, weights, means, factor, dimension);\n};\n\nexports.weightedScatter = function weightedScatter(matrix, weights, means, factor, dimension) {\n    dimension = dimension || 0;\n    means = means || exports.weightedMean(matrix, weights, dimension);\n    if (typeof (factor) === 'undefined') {\n        factor = 1;\n    }\n    var rows = matrix.length;\n    if (rows === 0) {\n        return [[]];\n    }\n    var cols = matrix[0].length,\n        cov, i, j, k, s;\n\n    if (dimension === 0) {\n        cov = new Array(cols);\n        for (i = 0; i < cols; i++) {\n            cov[i] = new Array(cols);\n        }\n        for (i = 0; i < cols; i++) {\n            for (j = i; j < cols; j++) {\n                s = 0;\n                for (k = 0; k < rows; k++) {\n                    s += weights[k] * (matrix[k][j] - means[j]) * (matrix[k][i] - means[i]);\n                }\n                cov[i][j] = s * factor;\n                cov[j][i] = s * factor;\n            }\n        }\n    } else if (dimension === 1) {\n        cov = new Array(rows);\n        for (i = 0; i < rows; i++) {\n            cov[i] = new Array(rows);\n        }\n        for (i = 0; i < rows; i++) {\n            for (j = i; j < rows; j++) {\n                s = 0;\n                for (k = 0; k < cols; k++) {\n                    s += weights[k] * (matrix[j][k] - means[j]) * (matrix[i][k] - means[i]);\n                }\n                cov[i][j] = s * factor;\n                cov[j][i] = s * factor;\n            }\n        }\n    } else {\n        throw new Error('Invalid dimension');\n    }\n\n    return cov;\n};\n","/**\n * Fast Fourier Transform module\n * 1D-FFT/IFFT, 2D-FFT/IFFT (radix-2)\n */\nvar FFT = (function(){\n  var FFT;  \n  \n  if(typeof exports !== 'undefined') {\n    FFT = exports;   // for CommonJS\n  } else {\n    FFT = {};\n  }\n  \n  var version = {\n    release: '0.3.0',\n    date: '2013-03'\n  };\n  FFT.toString = function() {\n    return \"version \" + version.release + \", released \" + version.date;\n  };\n\n  // core operations\n  var _n = 0,          // order\n      _bitrev = null,  // bit reversal table\n      _cstb = null;    // sin/cos table\n\n  var core = {\n    init : function(n) {\n      if(n !== 0 && (n & (n - 1)) === 0) {\n        _n = n;\n        core._initArray();\n        core._makeBitReversalTable();\n        core._makeCosSinTable();\n      } else {\n        throw new Error(\"init: radix-2 required\");\n      }\n    },\n    // 1D-FFT\n    fft1d : function(re, im) {\n      core.fft(re, im, 1);\n    },\n    // 1D-IFFT\n    ifft1d : function(re, im) {\n      var n = 1/_n;\n      core.fft(re, im, -1);\n      for(var i=0; i<_n; i++) {\n        re[i] *= n;\n        im[i] *= n;\n      }\n    },\n     // 1D-IFFT\n    bt1d : function(re, im) {\n      core.fft(re, im, -1);\n    },\n    // 2D-FFT Not very useful if the number of rows have to be equal to cols\n    fft2d : function(re, im) {\n      var tre = [],\n          tim = [],\n          i = 0;\n      // x-axis\n      for(var y=0; y<_n; y++) {\n        i = y*_n;\n        for(var x1=0; x1<_n; x1++) {\n          tre[x1] = re[x1 + i];\n          tim[x1] = im[x1 + i];\n        }\n        core.fft1d(tre, tim);\n        for(var x2=0; x2<_n; x2++) {\n          re[x2 + i] = tre[x2];\n          im[x2 + i] = tim[x2];\n        }\n      }\n      // y-axis\n      for(var x=0; x<_n; x++) {\n        for(var y1=0; y1<_n; y1++) {\n          i = x + y1*_n;\n          tre[y1] = re[i];\n          tim[y1] = im[i];\n        }\n        core.fft1d(tre, tim);\n        for(var y2=0; y2<_n; y2++) {\n          i = x + y2*_n;\n          re[i] = tre[y2];\n          im[i] = tim[y2];\n        }\n      }\n    },\n    // 2D-IFFT\n    ifft2d : function(re, im) {\n      var tre = [],\n          tim = [],\n          i = 0;\n      // x-axis\n      for(var y=0; y<_n; y++) {\n        i = y*_n;\n        for(var x1=0; x1<_n; x1++) {\n          tre[x1] = re[x1 + i];\n          tim[x1] = im[x1 + i];\n        }\n        core.ifft1d(tre, tim);\n        for(var x2=0; x2<_n; x2++) {\n          re[x2 + i] = tre[x2];\n          im[x2 + i] = tim[x2];\n        }\n      }\n      // y-axis\n      for(var x=0; x<_n; x++) {\n        for(var y1=0; y1<_n; y1++) {\n          i = x + y1*_n;\n          tre[y1] = re[i];\n          tim[y1] = im[i];\n        }\n        core.ifft1d(tre, tim);\n        for(var y2=0; y2<_n; y2++) {\n          i = x + y2*_n;\n          re[i] = tre[y2];\n          im[i] = tim[y2];\n        }\n      }\n    },\n    // core operation of FFT\n    fft : function(re, im, inv) {\n      var d, h, ik, m, tmp, wr, wi, xr, xi,\n          n4 = _n >> 2;\n      // bit reversal\n      for(var l=0; l<_n; l++) {\n        m = _bitrev[l];\n        if(l < m) {\n          tmp = re[l];\n          re[l] = re[m];\n          re[m] = tmp;\n          tmp = im[l];\n          im[l] = im[m];\n          im[m] = tmp;\n        }\n      }\n      // butterfly operation\n      for(var k=1; k<_n; k<<=1) {\n        h = 0;\n        d = _n/(k << 1);\n        for(var j=0; j<k; j++) {\n          wr = _cstb[h + n4];\n          wi = inv*_cstb[h];\n          for(var i=j; i<_n; i+=(k<<1)) {\n            ik = i + k;\n            xr = wr*re[ik] + wi*im[ik];\n            xi = wr*im[ik] - wi*re[ik];\n            re[ik] = re[i] - xr;\n            re[i] += xr;\n            im[ik] = im[i] - xi;\n            im[i] += xi;\n          }\n          h += d;\n        }\n      }\n    },\n    // initialize the array (supports TypedArray)\n    _initArray : function() {\n      if(typeof Uint32Array !== 'undefined') {\n        _bitrev = new Uint32Array(_n);\n      } else {\n        _bitrev = [];\n      }\n      if(typeof Float64Array !== 'undefined') {\n        _cstb = new Float64Array(_n*1.25);\n      } else {\n        _cstb = [];\n      }\n    },\n    // zero padding\n    _paddingZero : function() {\n      // TODO\n    },\n    // makes bit reversal table\n    _makeBitReversalTable : function() {\n      var i = 0,\n          j = 0,\n          k = 0;\n      _bitrev[0] = 0;\n      while(++i < _n) {\n        k = _n >> 1;\n        while(k <= j) {\n          j -= k;\n          k >>= 1;\n        }\n        j += k;\n        _bitrev[i] = j;\n      }\n    },\n    // makes trigonometiric function table\n    _makeCosSinTable : function() {\n      var n2 = _n >> 1,\n          n4 = _n >> 2,\n          n8 = _n >> 3,\n          n2p4 = n2 + n4,\n          t = Math.sin(Math.PI/_n),\n          dc = 2*t*t,\n          ds = Math.sqrt(dc*(2 - dc)),\n          c = _cstb[n4] = 1,\n          s = _cstb[0] = 0;\n      t = 2*dc;\n      for(var i=1; i<n8; i++) {\n        c -= dc;\n        dc += t*c;\n        s += ds;\n        ds -= t*s;\n        _cstb[i] = s;\n        _cstb[n4 - i] = c;\n      }\n      if(n8 !== 0) {\n        _cstb[n8] = Math.sqrt(0.5);\n      }\n      for(var j=0; j<n4; j++) {\n        _cstb[n2 - j]  = _cstb[j];\n      }\n      for(var k=0; k<n2p4; k++) {\n        _cstb[k + n2] = -_cstb[k];\n      }\n    }\n  };\n  // aliases (public APIs)\n  var apis = ['init', 'fft1d', 'ifft1d', 'fft2d', 'ifft2d'];\n  for(var i=0; i<apis.length; i++) {\n    FFT[apis[i]] = core[apis[i]];\n  }\n  FFT.bt = core.bt1d;\n  FFT.fft = core.fft1d;\n  FFT.ifft = core.ifft1d;\n  \n  return FFT;\n}).call(this);\n","// source: https://en.wikipedia.org/wiki/Gyromagnetic_ratio\n\nexport const gyromagneticRatio = {\n  '1H': 267.52218744e6,\n  '2H': 41.065e6,\n  '3H': 285.3508e6,\n  '3He': -203.789e6,\n  '7Li': 103.962e6,\n  '13C': 67.28284e6,\n  '14N': 19.331e6,\n  '15N': -27.116e6,\n  '17O': -36.264e6,\n  '19F': 251.662e6,\n  '23Na': 70.761e6,\n  '27Al': 69.763e6,\n  '29Si': -53.19e6,\n  '31P': 108.291e6,\n  '57Fe': 8.681e6,\n  '63Cu': 71.118e6,\n  '67Zn': 16.767e6,\n  '129Xe': -73.997e6,\n};\n","import { gyromagneticRatio } from 'nmr-processing';\n\nexport default function postProcessingNMR(entriesFlat) {\n  // specific NMR functions\n  let observeFrequency = 0;\n  let shiftOffsetVal = 0;\n\n  for (let entry of entriesFlat) {\n    for (let spectrum of entry.spectra) {\n      if (entry.ntuples && entry.ntuples.symbol) {\n        if (!observeFrequency && spectrum.observeFrequency) {\n          observeFrequency = spectrum.observeFrequency;\n        }\n        if (!shiftOffsetVal && spectrum.shiftOffsetVal) {\n          shiftOffsetVal = spectrum.shiftOffsetVal;\n        }\n      } else {\n        observeFrequency = spectrum.observeFrequency;\n        shiftOffsetVal = spectrum.shiftOffsetVal;\n      }\n\n      if (observeFrequency) {\n        if (spectrum.xUnits && spectrum.xUnits.toUpperCase().includes('HZ')) {\n          spectrum.xUnits = 'PPM';\n          spectrum.xFactor = spectrum.xFactor / observeFrequency;\n          spectrum.firstX = spectrum.firstX / observeFrequency;\n          spectrum.lastX = spectrum.lastX / observeFrequency;\n          spectrum.deltaX = spectrum.deltaX / observeFrequency;\n          for (let i = 0; i < spectrum.data.x.length; i++) {\n            spectrum.data.x[i] /= observeFrequency;\n          }\n        }\n      }\n      if (shiftOffsetVal) {\n        let shift = spectrum.firstX - shiftOffsetVal;\n        spectrum.firstX = spectrum.firstX - shift;\n        spectrum.lastX = spectrum.lastX - shift;\n        for (let i = 0; i < spectrum.data.x.length; i++) {\n          spectrum.data.x[i] -= shift;\n        }\n      }\n\n      if (\n        observeFrequency &&\n        entry.ntuples &&\n        entry.ntuples.symbol &&\n        entry.ntuples.nucleus\n      ) {\n        let unit = '';\n        let pageSymbolIndex = entry.ntuples.symbol.indexOf(spectrum.pageSymbol);\n        if (entry.ntuples.units && entry.ntuples.units[pageSymbolIndex]) {\n          unit = entry.ntuples.units[pageSymbolIndex];\n        }\n        if (unit !== 'PPM') {\n          if (pageSymbolIndex !== 0) {\n            throw Error('Not sure about this ntuples format');\n          }\n\n          let ratio0 = gyromagneticRatio[entry.ntuples.nucleus[0]];\n          let ratio1 = gyromagneticRatio[entry.ntuples.nucleus[1]];\n          if (!ratio0 || !ratio1) {\n            throw Error('Problem with determination of gyromagnetic ratio');\n          }\n          let ratio = (ratio0 / ratio1) * observeFrequency;\n          spectrum.pageValue /= ratio;\n        }\n      }\n    }\n  }\n}\n","import add2D from './2d/add2D';\nimport { complexChromatogram } from './complexChromatogram';\nimport profiling from './profiling';\nimport simpleChromatogram from './simpleChromatogram';\nimport postProcessingNMR from './postProcessingNMR';\n\nexport default function postProcessing(entriesFlat, result, options) {\n  // converting Hz to ppm\n  postProcessingNMR(entriesFlat);\n\n  for (let entry of entriesFlat) {\n    if (Object.keys(entry.ntuples).length > 0) {\n      let newNtuples = [];\n      let keys = Object.keys(entry.ntuples);\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        let values = entry.ntuples[key];\n        for (let j = 0; j < values.length; j++) {\n          if (!newNtuples[j]) newNtuples[j] = {};\n          newNtuples[j][key] = values[j];\n        }\n      }\n      entry.ntuples = newNtuples;\n    }\n\n    if (entry.twoD && options.wantXY) {\n      add2D(entry, options);\n\n      profiling(result, 'Finished countour plot calculation', options);\n\n      if (!options.keepSpectra) {\n        delete entry.spectra;\n      }\n    }\n\n    // maybe it is a GC (HPLC) / MS. In this case we add a new format\n    if (options.chromatogram) {\n      if (entry.spectra.length > 1) {\n        complexChromatogram(entry);\n      } else {\n        simpleChromatogram(entry);\n      }\n      profiling(result, 'Finished chromatogram calculation', options);\n    }\n  }\n}\n","export default function prepareNtuplesDatatable(currentEntry, spectrum, kind) {\n  let xIndex = -1;\n  let yIndex = -1;\n  let firstVariable = '';\n  let secondVariable = '';\n  if (kind.indexOf('++') > 0) {\n    firstVariable = kind.replace(/.*\\(([a-zA-Z0-9]+)\\+\\+.*/, '$1');\n    secondVariable = kind.replace(/.*\\.\\.([a-zA-Z0-9]+).*/, '$1');\n  } else {\n    kind = kind.replace(/[^a-zA-Z]/g, '');\n    firstVariable = kind.charAt(0);\n    secondVariable = kind.charAt(1);\n    spectrum.variables = {};\n    for (let symbol of kind) {\n      let index = currentEntry.ntuples.symbol.indexOf(symbol);\n      if (index === -1) throw Error(`Symbol undefined: ${symbol}`);\n      spectrum.variables[symbol] = {};\n      for (let key in currentEntry.ntuples) {\n        if (currentEntry.ntuples[key][index]) {\n          spectrum.variables[symbol][key.replace(/^var/, '')] =\n            currentEntry.ntuples[key][index];\n        }\n      }\n    }\n  }\n  xIndex = currentEntry.ntuples.symbol.indexOf(firstVariable);\n  yIndex = currentEntry.ntuples.symbol.indexOf(secondVariable);\n\n  if (xIndex === -1) xIndex = 0;\n  if (yIndex === -1) yIndex = 0;\n\n  if (currentEntry.ntuples.first) {\n    if (currentEntry.ntuples.first.length > xIndex) {\n      spectrum.firstX = currentEntry.ntuples.first[xIndex];\n    }\n    if (currentEntry.ntuples.first.length > yIndex) {\n      spectrum.firstY = currentEntry.ntuples.first[yIndex];\n    }\n  }\n  if (currentEntry.ntuples.last) {\n    if (currentEntry.ntuples.last.length > xIndex) {\n      spectrum.lastX = currentEntry.ntuples.last[xIndex];\n    }\n    if (currentEntry.ntuples.last.length > yIndex) {\n      spectrum.lastY = currentEntry.ntuples.last[yIndex];\n    }\n  }\n  if (\n    currentEntry.ntuples.vardim &&\n    currentEntry.ntuples.vardim.length > xIndex\n  ) {\n    spectrum.nbPoints = currentEntry.ntuples.vardim[xIndex];\n  }\n  if (currentEntry.ntuples.factor) {\n    if (currentEntry.ntuples.factor.length > xIndex) {\n      spectrum.xFactor = currentEntry.ntuples.factor[xIndex];\n    }\n    if (currentEntry.ntuples.factor.length > yIndex) {\n      spectrum.yFactor = currentEntry.ntuples.factor[yIndex];\n    }\n  }\n  if (currentEntry.ntuples.units) {\n    if (currentEntry.ntuples.units.length > xIndex) {\n      if (\n        currentEntry.ntuples.varname &&\n        currentEntry.ntuples.varname[xIndex]\n      ) {\n        spectrum.xUnits = `${currentEntry.ntuples.varname[xIndex]} [${currentEntry.ntuples.units[xIndex]}]`;\n      } else {\n        spectrum.xUnits = currentEntry.ntuples.units[xIndex];\n      }\n    }\n    if (currentEntry.ntuples.units.length > yIndex) {\n      if (\n        currentEntry.ntuples.varname &&\n        currentEntry.ntuples.varname[yIndex]\n      ) {\n        spectrum.yUnits = `${currentEntry.ntuples.varname[yIndex]} [${currentEntry.ntuples.units[yIndex]}]`;\n      } else {\n        spectrum.yUnits = currentEntry.ntuples.units[yIndex];\n      }\n    }\n  }\n}\n","export default function prepareSpectrum(spectrum) {\n  if (!spectrum.xFactor) spectrum.xFactor = 1;\n  if (!spectrum.yFactor) spectrum.yFactor = 1;\n}\n","import { isMSField, convertMSFieldToLabel } from './complexChromatogram';\nimport convertToFloatArray from './convertToFloatArray';\nimport fastParseXYData from './parse/fastParseXYData';\nimport parsePeakTable from './parse/parsePeakTable';\nimport parseXYA from './parse/parseXYA';\nimport postProcessing from './postProcessing';\nimport prepareNtuplesDatatable from './prepareNtuplesDatatable';\nimport prepareSpectrum from './prepareSpectrum';\nimport profiling from './profiling';\n\n// the following RegExp can only be used for XYdata, some peakTables have values with a \"E-5\" ...\nconst ntuplesSeparator = /[ \\t]*,[ \\t]*/;\n\nclass Spectrum {}\n\nconst defaultOptions = {\n  keepRecordsRegExp: /^$/,\n  canonicDataLabels: true,\n  canonicMetadataLabels: false,\n  dynamicTyping: true,\n  withoutXY: false,\n  chromatogram: false,\n  keepSpectra: false,\n  noContour: false,\n  nbContourLevels: 7,\n  noiseMultiplier: 5,\n  profiling: false,\n};\n\n/**\n *\n * @param {text} jcamp\n * @param {object} [options]\n * @param {number} [options.keepRecordsRegExp=/^$/] By default we don't keep meta information\n * @param {number} [options.canonicDataLabels=true] Canonize the Labels (uppercase without symbol)\n * @param {number} [options.canonicMetadataLabels=false] Canonize the metadata Labels (uppercase without symbol)\n * @param {number} [options.dynamicTyping=false] Convert numbers to Number\n * @param {number} [options.withoutXY=false] Remove the XY data\n * @param {number} [options.chromatogram=false] Special post-processing for GC / HPLC / MS\n * @param {number} [options.keepSpectra=false] Force to keep the spectra in case of 2D\n * @param {number} [options.noContour=false] Don't calculate countour in case of 2D\n * @param {number} [options.nbContourLevels=7] Number of positive / negative contour levels to calculate\n * @param {number} [options.noiseMultiplier=5] Define for 2D the level as 5 times the median as default\n * @param {number} [options.profiling=false] Add profiling information\n */\n\nexport default function convert(jcamp, options = {}) {\n  options = Object.assign({}, defaultOptions, options);\n  options.wantXY = !options.withoutXY;\n  options.start = Date.now();\n\n  let entriesFlat = [];\n\n  let result = {\n    profiling: options.profiling ? [] : false,\n    logs: [],\n    entries: [],\n  };\n\n  let tmpResult = { children: [] };\n  let currentEntry = tmpResult;\n  let parentsStack = [];\n\n  let spectrum = new Spectrum();\n\n  if (typeof jcamp !== 'string') {\n    throw new TypeError('the JCAMP should be a string');\n  }\n\n  profiling(result, 'Before split to LDRS', options);\n\n  let ldrs = jcamp.replace(/[\\r\\n]+##/g, '\\n##').split('\\n##');\n\n  profiling(result, 'Split to LDRS', options);\n\n  if (ldrs[0]) ldrs[0] = ldrs[0].replace(/^[\\r\\n ]*##/, '');\n\n  for (let ldr of ldrs) {\n    // This is a new LDR\n    let position = ldr.indexOf('=');\n    let dataLabel = position > 0 ? ldr.substring(0, position) : ldr;\n    let dataValue = position > 0 ? ldr.substring(position + 1).trim() : '';\n\n    let canonicDataLabel = dataLabel.replace(/[_ -]/g, '').toUpperCase();\n\n    if (canonicDataLabel === 'DATATABLE') {\n      let endLine = dataValue.indexOf('\\n');\n      if (endLine === -1) endLine = dataValue.indexOf('\\r');\n      if (endLine > 0) {\n        // ##DATA TABLE= (X++(I..I)), XYDATA\n        // We need to find the variables\n\n        let infos = dataValue.substring(0, endLine).split(/[ ,;\\t]+/);\n        prepareNtuplesDatatable(currentEntry, spectrum, infos[0]);\n\n        spectrum.datatable = infos[0];\n        if (infos[1] && infos[1].indexOf('PEAKS') > -1) {\n          canonicDataLabel = 'PEAKTABLE';\n        } else if (\n          infos[1] &&\n          (infos[1].indexOf('XYDATA') || infos[0].indexOf('++') > 0)\n        ) {\n          canonicDataLabel = 'XYDATA';\n          spectrum.deltaX =\n            (spectrum.lastX - spectrum.firstX) / (spectrum.nbPoints - 1);\n        }\n      }\n    }\n\n    if (canonicDataLabel === 'XYDATA') {\n      if (options.wantXY) {\n        prepareSpectrum(spectrum);\n        // well apparently we should still consider it is a PEAK TABLE if there are no '++' after\n        if (dataValue.match(/.*\\+\\+.*/)) {\n          // ex: (X++(Y..Y))\n          if (!spectrum.deltaX) {\n            spectrum.deltaX =\n              (spectrum.lastX - spectrum.firstX) / (spectrum.nbPoints - 1);\n          }\n          fastParseXYData(spectrum, dataValue, result);\n        } else {\n          parsePeakTable(spectrum, dataValue, result);\n        }\n        currentEntry.spectra.push(spectrum);\n        spectrum = new Spectrum();\n      }\n      continue;\n    } else if (canonicDataLabel === 'PEAKTABLE') {\n      if (options.wantXY) {\n        prepareSpectrum(spectrum);\n        parsePeakTable(spectrum, dataValue, result);\n        currentEntry.spectra.push(spectrum);\n        spectrum = new Spectrum();\n      }\n      continue;\n    }\n    if (canonicDataLabel === 'PEAKASSIGNMENTS') {\n      if (options.wantXY) {\n        if (dataValue.match(/.*(XYA).*/)) {\n          // ex: (XYA)\n          parseXYA(spectrum, dataValue);\n        }\n        currentEntry.spectra.push(spectrum);\n        spectrum = new Spectrum();\n      }\n      continue;\n    }\n\n    if (canonicDataLabel === 'TITLE') {\n      let parentEntry = currentEntry;\n      if (!parentEntry.children) {\n        parentEntry.children = [];\n      }\n      currentEntry = {\n        spectra: [],\n        ntuples: {},\n        info: {},\n        meta: {},\n      };\n      parentEntry.children.push(currentEntry);\n      parentsStack.push(parentEntry);\n      entriesFlat.push(currentEntry);\n      currentEntry.title = dataValue;\n    } else if (canonicDataLabel === 'DATATYPE') {\n      currentEntry.dataType = dataValue;\n      if (dataValue.toLowerCase().indexOf('nd') > -1) {\n        currentEntry.twoD = true;\n      }\n    } else if (canonicDataLabel === 'NTUPLES') {\n      if (dataValue.toLowerCase().indexOf('nd') > -1) {\n        currentEntry.twoD = true;\n      }\n    } else if (canonicDataLabel === 'DATACLASS') {\n      currentEntry.dataClass = dataValue;\n    } else if (canonicDataLabel === 'XUNITS') {\n      spectrum.xUnits = dataValue;\n    } else if (canonicDataLabel === 'YUNITS') {\n      spectrum.yUnits = dataValue;\n    } else if (canonicDataLabel === 'FIRSTX') {\n      spectrum.firstX = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'LASTX') {\n      spectrum.lastX = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'FIRSTY') {\n      spectrum.firstY = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'LASTY') {\n      spectrum.lastY = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'NPOINTS') {\n      spectrum.nbPoints = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'XFACTOR') {\n      spectrum.xFactor = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'YFACTOR') {\n      spectrum.yFactor = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'MAXX') {\n      spectrum.maxX = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'MINX') {\n      spectrum.minX = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'MAXY') {\n      spectrum.maxY = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'MINY') {\n      spectrum.minY = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'DELTAX') {\n      spectrum.deltaX = parseFloat(dataValue);\n    } else if (\n      canonicDataLabel === '.OBSERVEFREQUENCY' ||\n      canonicDataLabel === '$SFO1'\n    ) {\n      if (!spectrum.observeFrequency) {\n        spectrum.observeFrequency = parseFloat(dataValue);\n      }\n    } else if (canonicDataLabel === '.OBSERVENUCLEUS') {\n      if (!spectrum.xType) {\n        currentEntry.xType = dataValue.replace(/[^a-zA-Z0-9]/g, '');\n      }\n    } else if (canonicDataLabel === '$OFFSET') {\n      // OFFSET for Bruker spectra\n      currentEntry.shiftOffsetNum = 0;\n      if (!spectrum.shiftOffsetVal) {\n        spectrum.shiftOffsetVal = parseFloat(dataValue);\n      }\n    } else if (canonicDataLabel === '$REFERENCEPOINT') {\n      // OFFSET for Varian spectra\n      // if we activate this part it does not work for ACD specmanager\n      //         } else if (canonicDataLabel=='.SHIFTREFERENCE') {   // OFFSET FOR Bruker Spectra\n      //                 var parts = dataValue.split(/ *, */);\n      //                 currentEntry.shiftOffsetNum = parseInt(parts[2].trim());\n      //                 spectrum.shiftOffsetVal = parseFloat(parts[3].trim());\n    } else if (canonicDataLabel === 'VARNAME') {\n      currentEntry.ntuples.varname = dataValue.split(ntuplesSeparator);\n    } else if (canonicDataLabel === 'SYMBOL') {\n      currentEntry.ntuples.symbol = dataValue.split(ntuplesSeparator);\n    } else if (canonicDataLabel === 'VARTYPE') {\n      currentEntry.ntuples.vartype = dataValue.split(ntuplesSeparator);\n    } else if (canonicDataLabel === 'VARFORM') {\n      currentEntry.ntuples.varform = dataValue.split(ntuplesSeparator);\n    } else if (canonicDataLabel === 'VARDIM') {\n      currentEntry.ntuples.vardim = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === 'UNITS') {\n      currentEntry.ntuples.units = dataValue.split(ntuplesSeparator);\n    } else if (canonicDataLabel === 'FACTOR') {\n      currentEntry.ntuples.factor = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === 'FIRST') {\n      currentEntry.ntuples.first = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === 'LAST') {\n      currentEntry.ntuples.last = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === 'MIN') {\n      currentEntry.ntuples.min = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === 'MAX') {\n      currentEntry.ntuples.max = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === '.NUCLEUS') {\n      if (currentEntry.ntuples) {\n        currentEntry.ntuples.nucleus = dataValue.split(ntuplesSeparator);\n      }\n      if (currentEntry.twoD) {\n        currentEntry.yType = dataValue.split(ntuplesSeparator)[0];\n      }\n    } else if (canonicDataLabel === 'PAGE') {\n      spectrum.page = dataValue.trim();\n      spectrum.pageValue = parseFloat(dataValue.replace(/^.*=/, ''));\n      spectrum.pageSymbol = spectrum.page.replace(/[=].*/, '');\n    } else if (canonicDataLabel === 'RETENTIONTIME') {\n      spectrum.pageValue = parseFloat(dataValue);\n    } else if (isMSField(canonicDataLabel)) {\n      spectrum[convertMSFieldToLabel(canonicDataLabel)] = dataValue;\n    } else if (canonicDataLabel === 'SAMPLEDESCRIPTION') {\n      spectrum.sampleDescription = dataValue;\n    } else if (canonicDataLabel === 'END') {\n      currentEntry = parentsStack.pop();\n    }\n\n    if (\n      currentEntry &&\n      currentEntry.info &&\n      currentEntry.meta &&\n      canonicDataLabel.match(options.keepRecordsRegExp)\n    ) {\n      let value = dataValue.trim();\n      let target, label;\n      if (dataLabel.startsWith('$')) {\n        label = options.canonicMetadataLabels\n          ? canonicDataLabel.substring(1)\n          : dataLabel.substring(1);\n        target = currentEntry.meta;\n      } else {\n        label = options.canonicDataLabels ? canonicDataLabel : dataLabel;\n        target = currentEntry.info;\n      }\n\n      if (options.dynamicTyping) {\n        let parsedValue = Number.parseFloat(value);\n        if (!Number.isNaN(parsedValue)) value = parsedValue;\n      }\n      if (target[label]) {\n        if (!Array.isArray(target[label])) {\n          target[label] = [target[label]];\n        }\n        target[label].push(value);\n      } else {\n        target[label] = value;\n      }\n    }\n  }\n\n  profiling(result, 'Finished parsing', options);\n\n  postProcessing(entriesFlat, result, options);\n\n  profiling(result, 'Total time', options);\n\n  /*\n  if (result.children && result.children.length>0) {\n    result = { ...result, ...result.children[0] };\n  }\n  */\n  result.entries = tmpResult.children;\n  result.flatten = entriesFlat;\n\n  return result;\n}\n"],"names":["createTree","jcamp","options","flatten","TypeError","lines","split","flat","stack","result","current","ntupleLevel","spaces","includes","i","length","line","labelLine","replace","substring","title","trim","j","startsWith","push","join","children","finished","pop","undefined","match","canonicDataLabel","toUpperCase","dataType","forEach","entry","GC_MS_FIELDS","complexChromatogram","spectra","chromatogram","times","Array","series","ms","dimension","data","existingGCMSFields","label","convertMSFieldToLabel","spectrum","pageValue","parseFloat","x","y","isMSField","indexOf","value","toLowerCase","convertToFloatArray","stringArray","floatArray","fastParseXYData","yFactor","deltaX","isXYdata","currentData","currentX","firstX","currentY","firstY","endLine","ascii","charCodeAt","newLine","isDifference","isLastDifference","lastDifference","isDuplicate","inComment","currentValue","lastValue","isNegative","inValue","skipFirstValue","decimalPosition","Math","pow","duplicate","ascii2","removeCommentRegExp","peakTableSplitRegExp","parsePeakTable","isPeaktable","variables","Object","keys","parseXY","parseXYZ","key","values","xFactor","logs","numberOfVariables","variable","parseXYA","removeSymbolRegExp","isXYAdata","toString","prototype","isAnyArray","object","call","endsWith","a","d","e","f","g","h","c","b","_ref","module","exports","window","median","input","isArray","quickSelectMedian","slice","convertTo3DZ","minZ","maxZ","ySize","xSize","z","lastX","lastY","reverse","minX","min","maxX","max","minY","maxY","noise","getMedian","map","abs","generateContourLines","zData","povarHeight0","povarHeight1","povarHeight2","povarHeight3","isOver0","isOver1","isOver2","isOver3","nbSubSpectra","nbPovars","pAx","pAy","pBx","pBy","x0","xN","dx","y0","yN","dy","iter","nbContourLevels","contourLevels","lineZValue","level","contourLevel","side","factor","noiseMultiplier","exp","zValue","iSubSpectra","subSpectra","subSpectraAfter","povar","segments","add2D","noContour","contourLines","minMax","profiling","action","time","Date","now","start","simpleChromatogram","intensity","toStr","isArguments","str","isArgs","callee","has","hasOwnProperty","isEnumerable","propertyIsEnumerable","hasDontEnumBug","hasProtoEnumBug","dontEnums","equalsConstructorPrototype","o","ctor","constructor","excludedKeys","$applicationCache","$console","$external","$frame","$frameElement","$frames","$innerHeight","$innerWidth","$outerHeight","$outerWidth","$pageXOffset","$pageYOffset","$parent","$scrollLeft","$scrollTop","$scrollX","$scrollY","$self","$webkitIndexedDB","$webkitStorageInfo","$window","hasAutomationEqualityBug","k","equalsConstructorPrototypeIfNotBuggy","keysShim","isObject","isFunction","isString","theKeys","skipProto","String","name","skipConstructor","shim","shimObjectKeys","keysWorksWithArguments","arguments","originalKeys","getKeys","require$$0","typedArrays","createTypedArrayFcns","objectKeys","len","Function","global","factory","this","ascending","NaN","bisector","compare","ascendingComparator","left","lo","hi","mid","right","ascendingBisect","bisectRight","bisectLeft","descending","number$1","variance","array","n","m","s","isNaN","deviation","v","sqrt","extent","constant","identity","range","stop","step","ceil","e10","e5","e2","ticks","count","tickStep","floor","step0","step1","log","LN10","error","sturges","LN2","number","histogram","domain","threshold","xz","x1","tz","shift","bins","bin","_","thresholds","quantile","p","freedmanDiaconis","sort","scott","mean","numbers","merge","arrays","merged","pairs","permute","indexes","permutes","scan","xi","xj","shuffle","i0","i1","t","random","sum","transpose","matrix","row","zip","version","bisect","thresholdFreedmanDiaconis","thresholdScott","thresholdSturges","FFT","release","date","_n","_bitrev","_cstb","core","init","_initArray","_makeBitReversalTable","_makeCosSinTable","Error","fft1d","re","im","fft","ifft1d","bt1d","fft2d","tre","tim","x2","y1","y2","ifft2d","inv","ik","tmp","wr","wi","xr","n4","l","Uint32Array","Float64Array","_paddingZero","n2","n8","n2p4","sin","PI","dc","ds","apis","bt","ifft","compareNumbers","arithmeticMean","geometricMean","mul","logMean","lnsum","grandMean","means","samples","truncatedMean","percent","alreadySorted","concat","harmonicMean","RangeError","contraHarmonicMean","r1","r2","half","unbiased","theMean","theVariance","standardDeviation","standardError","robustMeanAndStdev","stdev","averageDeviations","quartiles","quart","q1","q2","q3","pooledStandardDeviation","pooledVariance","vari","mode","itemCount","itemArray","index","maxValue","maxIndex","covariance","vector1","vector2","mean1","mean2","cov","skewness","s2","s3","dev","m2","m3","kurtosis","s4","m4","entropy","eps","weightedMean","weights","weightedStandardDeviation","weightedVariance","w","center","inPlace","standardize","standardDev","cumulativeSum","Infinity","l1","l2","rows","cols","N","theSum","product","theProduct","sum1","sum2","medians","modes","skew","kurt","standardDeviations","standardErrors","sqrtN","scatter","divisor","correlation","scores","zScores","cor","jj","resultRow","sourceRow","ii","weightSum","arrayStat","weightedCovariance","s1","weightedScatter","gyromagneticRatio","postProcessingNMR","entriesFlat","observeFrequency","shiftOffsetVal","ntuples","symbol","xUnits","nucleus","unit","pageSymbolIndex","pageSymbol","units","ratio0","ratio1","ratio","postProcessing","newNtuples","twoD","wantXY","keepSpectra","prepareNtuplesDatatable","currentEntry","kind","xIndex","yIndex","firstVariable","secondVariable","charAt","first","last","vardim","nbPoints","varname","yUnits","prepareSpectrum","ntuplesSeparator","Spectrum","defaultOptions","keepRecordsRegExp","canonicDataLabels","canonicMetadataLabels","dynamicTyping","withoutXY","convert","assign","entries","tmpResult","parentsStack","ldrs","ldr","position","dataLabel","dataValue","infos","datatable","parentEntry","info","meta","dataClass","xType","shiftOffsetNum","vartype","varform","yType","page","sampleDescription","target","parsedValue","Number"],"mappings":"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"}