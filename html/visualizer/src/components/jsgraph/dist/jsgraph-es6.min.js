(function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.Graph=factory():root.Graph=factory()})("undefined"==typeof self?this:self,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module["default"]}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=19)}([function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports){"use strict";function hue2rgb(p,q,t){return 0>t&&(t+=1),1<t&&(t-=1),t<1/6?p+6*(q-p)*t:t<1/2?q:t<2/3?p+6*((q-p)*(2/3-t)):p}function hasSavedAttribute(dom,attr){return dom._savedAttributes&&dom._savedAttributes[attr]!==void 0}function restoreDomAttributes(to,identification){if(to&&to._savedAttributesIds){to._savedAttributesIds.splice(to._savedAttributesIds.indexOf(identification),1),delete to._attributes[identification];var attrs={};for(var i in to._savedAttributes)attrs[i]=to._savedAttributes[i];for(var i=0,l=to._savedAttributesIds.length;i<l;i++)for(var j in to._attributes[to._savedAttributesIds[i]])attrs[j]=to._attributes[to._savedAttributesIds[i]][j];for(var j in attrs)to.setAttribute(j,attrs[j])}}function extend(){var target=arguments[0],i=1,length=arguments.length,deep=!1,options,name,src,copy,copyIsArray,clone;for("boolean"==typeof target?(deep=target,target=arguments[1]||{},i=2):("object"!=typeof target&&"function"!=typeof target||null==target)&&(target={});i<length;++i)if(options=arguments[i],null!=options)for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(isPlainObject(copy)||(copyIsArray=isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&isArray(src)?src:[]):clone=src&&isPlainObject(src)?src:{},target[name]=extend(deep,clone,copy)):"undefined"!=typeof copy&&(target[name]=copy));return target}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.setAttributeTo=function(to,params,ns){if(ns)for(var i in params)to.setAttributeNS(ns,i,params[i]);else for(i in params)to.setAttribute(i,params[i])},_exports.mapEventEmission=function(options,source){source||(source=this);var eventName;for(var i in options)0==i.indexOf("on")&&"function"==typeof options[i]&&(eventName=i.substring(2),eventName=eventName.substring(0,1).toLowerCase()+eventName.substring(1),source.on&&function(j){source.on(eventName,function(){options[j].apply(source,arguments)})}(i))},_exports.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=0|16*Math.random(),v="x"==c?r:8|3&r;return v.toString(16)})},_exports.throwError=function(message){console.error(message)},_exports.warn=function(message){console.warn(message)},_exports.isNumeric=function(obj){return!Array.isArray(obj)&&0<=obj-parseFloat(obj)+1},_exports.hue2rgb=hue2rgb,_exports.hslToRgb=function(h,s,l){var r,g,b;if(0==s)r=g=b=l;else{var q=.5>l?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return[Math.round(255*r),Math.round(255*g),Math.round(255*b)]},_exports.saveDomAttributes=function(to,attributes,identification){if(to)for(var i in to._savedAttributesIds=to._savedAttributesIds||[],-1<to._savedAttributesIds.indexOf(identification)&&restoreDomAttributes(to,identification),to._savedAttributes=to._savedAttributes||{},to._attributes=to._attributes||{},to._attributes[identification]=attributes,to._savedAttributesIds.push(identification),attributes)to._savedAttributes[i]||(to._savedAttributes[i]=to.getAttribute(i)),to.setAttribute(i,attributes[i])},_exports.hasSavedAttribute=hasSavedAttribute,_exports.overwriteDomAttribute=function(dom,attribute,newValue){hasSavedAttribute(dom,attribute)&&(dom._savedAttributes[attribute]=newValue)},_exports.restoreDomAttributes=restoreDomAttributes,_exports.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(function(){timeout=null,immediate||func.apply(context,args)},wait),callNow&&func.apply(context,args)}},_exports.SVGParser=function(svgString){var parser=new DOMParser,doc=parser.parseFromString(svgString,"image/svg+xml");return doc},_exports.reverseArray=function(array){var left=null,right=null,length=array.length;for(left=0,right=length-1;left<right;left+=1,right-=1){var temporary=array[left];array[left]=array[right],array[right]=temporary}return array},_exports.getOffset=function(el){var rect=el.getBoundingClientRect();return{top:rect.top,left:rect.left}},_exports.setCSS=function(element,values){var style=element.style;for(var i in values)style[i]=values[i]},_exports.ajaxGet=function(options){return new Promise(function(resolve,reject){var request=new XMLHttpRequest;request.open(options.type||"GET",options.url,!0),options.json&&request.setRequestHeader("Accept","application/json"),request.onload=function(){if(200===request.status){var response=request.responseText;options.json&&(response=JSON.parse(response)),resolve(response)}else reject(new Error(`Request error: ${request.status}`))},request.onerror=function(){reject(new Error(`Network error: ${request.status}`))},request.send()})},_exports.extend=extend,_exports.mix=function(baseClass,mixin){for(let prop in mixin)mixin.hasOwnProperty(prop)&&(baseClass.prototype[prop]=mixin[prop])},_exports.emptyDom=function(dom){for(;dom.firstChild;)dom.removeChild(dom.firstChild)},_exports.isPlainObject=_exports.isArray=_exports.default=void 0;var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArray=function(arr){return"function"==typeof Array.isArray?Array.isArray(arr):"[object Array]"===toStr.call(arr)};_exports.isArray=isArray;var isPlainObject=function(obj){if(!obj||"[object Object]"!==toStr.call(obj))return!1;var hasOwnConstructor=hasOwn.call(obj,"constructor"),hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,"isPrototypeOf");if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf)return!1;for(var key in obj);return"undefined"==typeof key||hasOwn.call(obj,key)};_exports.isPlainObject=isPlainObject;_exports.default={}})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(4),__webpack_require__(0),__webpack_require__(5)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphPosition,util,_EventEmitter){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphPosition=_interopRequireDefault(_graphPosition),util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_EventEmitter=_interopRequireDefault(_EventEmitter);class Shape extends _EventEmitter.default{constructor(){super()}init(graph,properties,simplified=!1){var self=this;if(this.graph=graph,this.properties=properties||{},this.handles=[],this.options=this.options||{},simplified||(this.group=document.createElementNS(this.graph.ns,"g"),this.group.setAttribute("clip-path",`url(#_clipplot${graph._creation})`),this.group.jsGraphIsShape=this),this.simplified=simplified,this._selected=!1,this.createDom(),this._dom&&(this._dom.jsGraphIsShape=this),this.classes=[],this.transforms=[],this._data.masker){var maskPath=document.createElementNS(this.graph.ns,"mask");this.maskingId=Math.random(),maskPath.setAttribute("id",this.maskingId),this.maskDomWrapper=document.createElementNS(this.graph.ns,"rect"),this.maskDomWrapper.setAttribute("fill","white"),maskPath.appendChild(this.maskDomWrapper);var maskDom=this._dom.cloneNode();maskPath.appendChild(maskDom),this.maskDom=maskDom,this.graph.defs.appendChild(maskPath)}this.group&&this._dom&&!this.isHTML()&&this.group.appendChild(this._dom);let dom;return dom=simplified?this._dom:this.group,dom.addEventListener("mouseover",function(e){self.handleMouseOver(e)}),dom.addEventListener("mouseout",function(e){self.handleMouseOut(e)}),dom.addEventListener("mousedown",function(e){self.graph.focus(),self.handleMouseDown(e)}),dom.addEventListener("click",this.handleClick.bind(this)),dom.addEventListener("dblclick",function(e){self.handleDblClick(e)}),this.initImpl(),this.graph.emit("shapeNew",this),this}initImpl(){}getData(){return this._data}getType(){return this.type}kill(keepDom){this._inDom&&!keepDom&&this.graph.removeShapeFromDom(this),keepDom||this.graph._removeShape(this),this.graph.stopElementMoving(this),this.graph.emit("shapeRemoved",this),this.emit("removed",this),this._inDom=!1}hide(){return this.hidden?this:(this.hidden=!0,this.isHTML()||this.simplified?this._dom.style.display="none":this.group.style.display="none",this)}isHidden(){return this.hidden}isVisible(){return!this.hidden}show(){return this.hidden?(this.hidden=!1,this.isHTML()?this._dom.style.display="initial":this.group.style.display="initial",this.redraw(),this):this}addClass(className){return this.classes=this.classes||[],-1==this.classes.indexOf(className)&&this.classes.push(className),this.makeClasses(),this}removeClass(className){return this.classes.splice(this.classes.indexOf(className),1),this.makeClasses(),this}makeClasses(){return this._dom&&this._dom.setAttribute("class",this.classes.join(" ")),this}changed(event,parameters){return event&&(this.graph.emit(event,this,parameters),this.emit(event,this,parameters)),this.emit("changed",this,parameters),this.graph.emit("shapeChanged",this,parameters),this}setEventReceptacle(){if(this,!simplified){this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,"rect"),this.rectEvent.setAttribute("pointer-events","fill"),this.rectEvent.setAttribute("fill","transparent"),this.group.appendChild(this.rectEvent),this.rectEvent.jsGraphIsShape=this);var box=this.group.getBBox();this.rectEvent.setAttribute("x",box.x),this.rectEvent.setAttribute("y",box.y-10),this.rectEvent.setAttribute("width",box.width),this.rectEvent.setAttribute("height",box.height+20)}}setSerie(serie){if(serie){if(this.serie=serie,!serie.getXAxis||!serie.getYAxis)throw console.error(serie),"Serie does not implement the getXAxis or getYAxis method";return this.xAxis=serie.getXAxis(),this.yAxis=serie.getYAxis(),this}}getSerie(){return this.serie}autoAxes(){return this.xAxis||(this.xAxis=this.graph.getXAxis()),this.yAxis||(this.yAxis=this.graph.getYAxis()),this}setXAxis(axis){return this.xAxis=axis,this}setYAxis(axis){this.yAxis=axis}getXAxis(){return this.xAxis||this.autoAxes(),this.xAxis}getYAxis(){return this.yAxis||this.autoAxes(),this.yAxis}setLayer(layer){return this.setProp("layer",layer),this}getLayer(){var layer=this.getProp("layer");return void 0===layer?1:layer}draw(force,preventRedraw){return(!this._inDom||force)&&(this.appendToDom(),this._inDom=!0),this.makeLabels(),preventRedraw||this.redraw(),this.applyStyle(),this}redraw(){return this.hidden?this:(this.position=this.applyPosition(),this.redrawImpl(),!this.position)?(this.updateLabels(),this):(this.updateLabels(),this._applyTransforms(),this)}redrawImpl(){}setProperties(properties){this.properties=properties,Array.isArray(this.properties.position)||(this.properties.position=[this.properties.position]);for(var self=this,i=0,l=this.properties.position.length,pos;i<l;i++)pos=_graphPosition.default.check(this.properties.position[i],function(relativeTo){return self.getRelativePosition(relativeTo)}),this.properties.position[i]=pos;return this.emit("propertiesChanged"),this}getRelativePosition(relativePosition){var result;if(null!==(result=/position([0-9]*)/.exec(relativePosition)))return this.getPosition(result[1]);return null===(result=/labelPosition([0-9]*)/.exec(relativePosition))?void 0:this.getLabelPosition(result[1])}getProperties(){return this.properties}setProp(prop,val,index){return this.properties=this.properties||{},this.properties[prop]=this.properties[prop]||[],this.properties[prop][index||0]=val,this.emit("propertyChanged",prop),this}getProp(prop,index){return Array.isArray(this.properties[prop])?(this.properties[prop]||[])[index||0]:this.properties[prop]}getProps(prop){return this.properties[prop]||[]}addProp(prop,value){this.properties[prop]=this.properties[prop]||[],this.properties[prop].push(value)}resetProp(prop){this.properties[prop]=[]}setDom(prop,val,noForce){this._cachedDOM=this._cachedDOM||{};this._cachedDOM[prop]!=val&&(!this._dom||noForce&&util.hasSavedAttribute(this._dom,prop)||(this._dom.setAttribute(prop,val),this._cachedDOM[prop]=val))}setDomGroup(prop,val){this.simplified?this._dom.setAttribute(prop,val):this.group&&this.group.setAttribute(prop,val)}setStrokeColor(color){return this.setProp("strokeColor",color),this.overwriteSavedProp("stroke",color),this.applySelectedStyle(),this}getStrokeColor(){return this.getProp("strokeColor")}setFillColor(color){return this.setProp("fillColor",color),this.overwriteSavedProp("fill",color),this.applySelectedStyle(),this}getFillColor(){return this.getProp("fillColor")}setFillOpacity(opacity){return this.setProp("fillOpacity",opacity),this.overwriteSavedProp("fill-opacity",opacity),this.applySelectedStyle(),this}setStrokeWidth(width){return this.setProp("strokeWidth",width),this.overwriteSavedProp("stroke-width",width),this.applySelectedStyle(),this}getStrokeWidth(){return this.getProp("strokeWidth")}setStrokeDasharray(dasharray){return this.setProp("strokeDasharray",dasharray),this.overwriteSavedProp("stroke-dasharray",dasharray),this.applySelectedStyle(),this}setAttributes(attributes){return this.setProp("attributes",attributes),this}overwriteSavedProp(prop,newValue){util.overwriteDomAttribute(this._dom,prop,newValue)}addAttribute(attributeName,attributeValue){var added={};return added[attributeName]=attributeValue,this.addProp("attributes",added),this}addTransform(type,args){return this.addProp("transforms",{type:type,arguments:Array.isArray(args)?args:[args]}),this}addTransformRotate(angle,cx,cy,angleType="degrees"){return this.addProp("transforms",{type:"rotate",arguments:{center:{x:cx,y:cy},angle:angle,angleType:angleType}}),this}resetTransforms(){return this.resetProp("transforms"),this}setLabelText(text,index=0){return this.setProp("labelText",text,index),this}setLabelData(data,text,index=0){return this.setProp("labelData",text,index),this}getLabelText(text,index=0){return this.getProp("labelText",index)}displayLabel(index=0){return this.setProp("labelVisible",!0,index),this}hideLabel(index=0){return this.setProp("labelVisible",!1,index),this}setLabelColor(color,index=0){return this.setProp("labelColor",color,index),this}setLabelFontSize(size,index=0){return this.setProp("labelFontSize",size,index),this}getLabelPosition(index=0){return this.getProp("labelPosition",index)}setLabelPosition(position,index){var pos=_graphPosition.default.check(position,function(relativeTo){return self.getRelativePosition(relativeTo)}),self;return this.setProp("labelPosition",pos,index||0),this}setLabelAngle(angle,index){return this.setProp("labelAngle",angle,index||0),this}setLabelBaseline(baseline,index){return this.setProp("labelBaseline",baseline,index||0),this}setLabelAnchor(anchor,index){return this.setProp("labelAnchor",anchor,index||0),this}setLabelSize(size,index){return this.setProp("labelSize",size,index||0),this}setLabelStrokeColor(color,index){return this.setProp("labelStrokeColor",color,index||0),this}setLabelStrokeWidth(width,index){return this.setProp("labelStrokeWidth",width,index||0),this}setLabelBackgroundColor(color,index){return this.setProp("labelBackgroundColor",color,index||0),this}setLabelBackgroundOpacity(opacity,index){return this.setProp("labelBackgroundOpacity",opacity,index||0),this}applyGenericStyle(){this.setDom("fill",this.getProp("fillColor"),!0),this.setDom("fill-opacity",this.getProp("fillOpacity"),!0),this.setDom("stroke",this.getProp("strokeColor"),!0),this.setDom("stroke-width",this.getProp("strokeWidth"),!0),this.setDom("stroke-dasharray",this.getProp("strokeDasharray"),!0);for(var attributes=this.getProps("attributes"),j=0,l=attributes.length;j<l;j++)for(var i in attributes[j])this.setDom(i,"function"==typeof attributes[j][i]?attributes[j][i].call(this,i):attributes[j][i],!0);return this._applyTransforms(),this}applyStyle(){return this.applyGenericStyle()}calculatePosition(index){var position;return position=index instanceof _graphPosition.default?index:this.getPosition(index),position?position&&position.compute?position.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):void this.graph.throw():void 0}getPosition(index){var pos=this.getProp("position",index||0);if(null!=pos)return this.setProp("position",pos=_graphPosition.default.check(pos),index),pos}setPosition(position,index){var self=this,pos=_graphPosition.default.check(position,function(relativeTo){return self.getRelativePosition(relativeTo)});return this.setProp("position",pos,index||0)}sortPositions(sortFunction){return this.getProps("position").sort(sortFunction),this}_applyTransforms(){var transforms=this.getProps("transforms"),transformString="";if(transforms&&(transforms=Array.isArray(transforms)?transforms:[transforms],0!=transforms.length)){for(var i=0;i<transforms.length;i++){transformString+=`${transforms[i].type}(`;let transform;switch(transforms[i].type){case"translate":if(transforms[i].arguments)transform=transforms[i].arguments[0].compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie());else{const value=_graphPosition.default.check(transforms[i].value);transform=value.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie())}transformString+=transform.x||transform.dx||0,transformString+=", ",transformString+=transform.y||transform.dy||0;break;case"rotate":let angle;if(!transforms[i].arguments){if("angleData"==transforms[i].angleType){let xAxis,yAxis;this.serie?(xAxis=this.serie.getXAxis(),yAxis=this.serie.getYAxis()):(xAxis=this.graph.getXAxis(),yAxis=this.graph.getYAxis()),angle=180*Math.atan(Math.tan(transforms[i].angle*Math.PI/180)*xAxis.getRelVal(1)/yAxis.getRelVal(1))/Math.PI}else angle=transforms[i].angle;if(transformString+=angle,!transforms[i].center){var p=this.computePosition(0);transformString+=`, ${p.x}, ${p.y}`}else{const posCenter=_graphPosition.default.check(transforms[i].center).compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie());posCenter.x===posCenter.x&&posCenter.y===posCenter.y&&(transformString+=", ",transformString+=posCenter.x,transformString+=", ",transformString+=posCenter.y)}}else if(transformString+=transforms[i].arguments[0],transformString+=", ",1==transforms[i].arguments.length){var p=this.computePosition(0);transformString+=`${p.x}, ${p.y}`}else transformString+=_graphPosition.default.getDeltaPx(transforms[i].arguments[1],this.getXAxis()).replace("px",""),transformString+=", ",transformString+=_graphPosition.default.getDeltaPx(transforms[i].arguments[2],this.getYAxis()).replace("px","");}transformString+=") "}return this.setDomGroup("transform",transformString),this}}makeLabels(){if(!this.simplified){this._labels=this._labels||[],this._labelsBackground=this._labelsBackground||[],this._labels.map(label=>{this.group.removeChild(label)}),this._labelsBackground.map(bg=>{this.group.removeChild(bg)}),this._labels=[],this._labelsBackground[i]=[];for(var i=0;void 0!==this.getProp("labelText",i);)this._labels[i]||(this._labels[i]=document.createElementNS(this.graph.ns,"text"),this._labels[i].setAttribute("data-label-i",i),this._labels[i].jsGraphIsShape=this,this._labelsBackground[i]=document.createElementNS(this.graph.ns,"rect"),this._labelsBackground[i].setAttribute("data-label-i",i),this._labelsBackground[i].jsGraphIsShape=this,this.group.appendChild(this._labelsBackground[i]),this.group.appendChild(this._labels[i]),this._labels[i].addEventListener("dblclick",e=>{e.stopPropagation(),this.labelDblClickListener(e)}),this._labelsBackground[i].addEventListener("dblclick",e=>{e.stopPropagation(),this.labelDblClickListener(e)})),!Array.isArray(this.getProp("labelText",i)),i++;return this.updateLabels(),this}}isLabelEditable(labelIndex){return this.getProp("labelEditable",labelIndex||0)}updateLabels(){this;this._labels=this._labels||[];for(var i=0,l=this._labels.length;i<l;i++)this._applyLabelData(i)}_applyLabelData(labelIndex){labelIndex=labelIndex||0;var visible=this.getProp("labelVisible",labelIndex);if(!1===visible)return this._labels[labelIndex].setAttribute("display","none"),void this._labelsBackground[labelIndex].setAttribute("display","none");this._labels[labelIndex].setAttribute("display","initial"),this._labelsBackground[labelIndex].setAttribute("display","initial");var position=this.calculatePosition(_graphPosition.default.check(this.getProp("labelPosition",labelIndex)));if(!(!position||isNaN(position.x)||isNaN(position.y)||!1===position.y||!1===position.x)){"NaNpx"==position.x||isNaN(position.x)||"NaN"===position.x||!1===position.x||(this._labels[labelIndex].setAttribute("x",position.x),this._labels[labelIndex].setAttribute("y",position.y));var currAngle=this.getProp("labelAngle",labelIndex)||0;if(0!=currAngle){var x=this._labels[labelIndex].getAttribute("x"),y=this._labels[labelIndex].getAttribute("y");this._labels[labelIndex].setAttribute("transform",`rotate(${currAngle} ${x} ${y})`)}let labelData=this.getProp("labelHTMLData",labelIndex)||{};for(var i in labelData)this._labels[labelIndex].setAttribute(i,labelData[i]),this._labelsBackground[labelIndex].setAttribute(i,labelData[i]);this._labels[labelIndex].setAttribute("dominant-baseline",this.getProp("labelBaseline",labelIndex)||"no-change"),this._labels[labelIndex].textContent=this.getProp("labelText",labelIndex),this._labels[labelIndex].setAttribute("fill",this.getProp("labelColor",labelIndex)||"black"),this._labels[labelIndex].setAttribute("font-size",`${this.getProp("labelSize",labelIndex)}px`||"12px"),this._labels[labelIndex].setAttribute("text-anchor",this._getLabelAnchor(labelIndex)),this._labels[labelIndex].setAttribute("stroke",this.getProp("labelStrokeColor",labelIndex)||"black"),this._labels[labelIndex].setAttribute("stroke-width",this.getProp("labelStrokeWidth",labelIndex)||`${0}px`),this._labels[labelIndex].setAttribute("stroke-location","outside");let rect=this._labels[labelIndex].getBBox();return this._labelsBackground[labelIndex].setAttribute("x",rect.x),this._labelsBackground[labelIndex].setAttribute("y",rect.y),this._labelsBackground[labelIndex].setAttribute("width",rect.width),this._labelsBackground[labelIndex].setAttribute("height",rect.height),this._labelsBackground[labelIndex].setAttribute("fill",this.getProp("labelBackgroundColor")||"transparent"),this._labelsBackground[labelIndex].setAttribute("fill-opacity",this.getProp("labelBackgroundOpacity")||1),this}}emptyLabels(){for(var i=0,l=this._labels.length;i<l;i++)this._labels[i].textContent="";return this}_getLabelAnchor(labelIndex){var anchor=this.getProp("labelAnchor",labelIndex);switch(anchor){case"middle":case"start":case"end":return anchor;break;case"right":return"end";break;case"left":return"start";break;default:return"start";}}isSelected(){return this._selectStatus||!1}hasHandles(setter){return void 0!==setter&&this.setProp("handles",setter),!!this.getProp("handles")||!!this.getProp("staticHandles")}addHandles(){if(!this.simplified&&!this.isLocked()){if(!this.handlesInDom){this.handlesInDom=!0;for(var i=1;i<this.handles.length;i++)this.handles[i]&&this.group.appendChild(this.handles[i])}return this}}removeHandles(){this.hideHandles(),this.handles=[]}hideHandles(){if(!this.handlesInDom)return this;if(!this.simplified){for(var i=1;i<this.handles.length;i++)this.group.removeChild(this.handles[i]);return this.handlesInDom=!1,this}}areHandlesInDom(){return this.handlesInDom}_select(mute){return!!this.isSelectable()&&void(this.appendToDom(),this._selectStatus=!0,this.applySelectedStyle(),this.hasHandles()&&!this.hasStaticHandles()&&(this.addHandles(),this.setHandles()),!mute&&this.graph.emit("shapeSelected",this))}applySelectedStyle(){if(this._selectStatus){var style=this.getSelectStyle(),style2={};for(var i in style)style2[i]="function"==typeof style[i]?style[i].call(this):style[i];util.saveDomAttributes(this._dom,style2,"select")}}_unselect(mute){this._selectStatus=!1,util.restoreDomAttributes(this._dom,"select"),this.hasHandles()&&!this.hasStaticHandles()&&this.hideHandles(),mute||this.graph.emit("shapeUnselected",this)}getSelectStyle(){return this.selectStyle}setSelectStyle(attr){return this.selectStyle=attr,this.applySelectedStyle(),this}setStaticHandles(staticHandles){this.setProp("staticHandles",staticHandles)}hasStaticHandles(){return!!this.getProp("staticHandles")}_createHandles(nb,type,attr,callbackEach){if(!(this.handles&&0<this.handles.length)){for(var self=this,i=1;i<=nb;i++)(j=>{var self=this,handle=document.createElementNS(self.graph.ns,type);if(handle.jsGraphIsShape=!0,attr)for(var k in attr)handle.setAttribute(k,attr[k]);handle.addEventListener("mousedown",e=>{self.isResizable()&&(e.preventDefault(),e.stopPropagation(),self.graph.emit("beforeShapeResize",self),this.emit("beforeShapeResize"),!self.graph.prevent(!1)&&(self.resizing=!0,self.handleSelected=j,self.handleMouseDown(e)))}),callbackEach&&callbackEach(self.handles[j]),self.handles[j]=handle}).call(this,i);return this.handles}}createHandles(){this.hasStaticHandles()&&(this.addHandles(),this.setHandles())}handleMouseDownImpl(){}handleMouseMoveImpl(){}handleMouseUpImpl(){}handleCreateImpl(){}handleMouseDown(e){if(!this.isLocked())return(this.isMovable()||this.isResizable())&&this.graph.elementMoving(this),this.getProp("selectOnMouseDown")&&this.graph.selectShape(this),this.isMovable()&&!this.resizing&&(this.graph.emit("beforeShapeMove",self),!this.graph.prevent(!1)&&(this.moving=!0,this.moved=!1)),this._mouseCoords=this.graph._getXY(e),this.handleMouseDownImpl(e,this._mouseCoords)}handleClick(e){return this.graph.emit("shapeClicked",this),this.emit("shapeClicked"),!!this.isSelectable()&&void(!e.shiftKey&&this.graph.unselectShapes(),this.getProp("selectOnClick")&&this.graph.selectShape(this))}handleMouseMove(e){if((this.resizing||this.moving)&&!this.isSelected()&&this.graph.selectShape(this),this.graph.emit("beforeShapeMouseMove",this),this.emit("beforeShapeMouseMove"),this.graph.prevent(!1)||!this._mouseCoords)return!1;this.moved=!0;var coords=this.graph._getXY(e),deltaX=this.getXAxis().getRelVal(coords.x-this._mouseCoords.x),deltaY=this.getYAxis().getRelVal(coords.y-this._mouseCoords.y);(0!=deltaX||0!==deltaY)&&(this.preventUnselect=!0),this._mouseCoords=coords;var ret=this.handleMouseMoveImpl(e,deltaX,deltaY,coords.x-this._mouseCoords.x,coords.y-this._mouseCoords.y);return ret}handleMouseUp(e){return this.moving&&this.moved&&(this.graph.emit("shapeMoved",this),this.emit("shapeMoved")),(this.handleSelected||this.resize)&&(this.graph.emit("shapeResized",this),this.emit("shapeResized")),this.moving=!1,this.resizing=!1,this.handleSelected=!1,this.graph.elementMoving(!1),this.handleMouseUpImpl(e)}handleDblClick(){}handleMouseOver(){!this.getProp("highlightOnMouseOver")||this.moving||this.resizing||this.highlight(),this.graph.emit("shapeMouseOver",this)}handleMouseOut(){this.getProp("highlightOnMouseOver")&&this.unHighlight(),this.graph.emit("shapeMouseOut",this)}lock(){return this.setProp("locked",!0),this}unlock(){return this.setProp("locked",!1),this}isLocked(){return this.getProp("locked")||this.graph.shapesLocked}movable(){this.setProp("movable",!0)}unmovable(){return this.setProp("movable",!1),!1}isMovable(){return this.getProp("movable")}resizable(){this.setProp("resizable",!0)}unresizable(){this.setProp("resizable",!1)}isResizable(){return this.getProp("resizable")}selectable(){this.setProp("selectable",!0)}unselectable(){this.graph.unselectShape(this),this.setProp("selectable",!1)}isSelectable(){return this.getProp("selectable")}highlight(attributes,saveDomName){return attributes||(attributes=this.getHighlightAttributes()),saveDomName||(saveDomName="highlight"),util.saveDomAttributes(this._dom,attributes,saveDomName),this.highlightImpl(),this}unHighlight(saveDomName){return saveDomName||(saveDomName="highlight"),util.restoreDomAttributes(this._dom,saveDomName),this.unHighlightImpl(),this}highlightImpl(){}unHighlightImpl(){}getHighlightAttributes(){return this._highlightAttributes}setHighlightAttributes(attributes){return this._highlightAttributes=attributes,this}getMaskingID(){return this.maskingId}maskWith(maskingShape){const maskingId=maskingShape.getMaskingID();maskingId?this._dom.setAttribute("mask",`url(#${maskingId})`):this._dom.removeAttribute("mask")}updateMask(){}labelDblClickListener(e){var i=parseInt(e.target.getAttribute("data-label-i")),self=this;if(isNaN(i))return;if(!this.isLabelEditable(i))return;e.preventDefault(),e.stopPropagation();var shapeLabel=document.createElement("input");shapeLabel.setAttribute("type","text"),shapeLabel.setAttribute("value",self.getProp("labelText",i)),self.graph.wrapper.prepend(shapeLabel),shapeLabel.select(),util.setCSS(shapeLabel,{position:"absolute",marginTop:`${parseInt(e.target.getAttribute("y").replace("px",""))+this.graph.getPaddingTop()-10}px`,marginLeft:`${parseInt(e.target.getAttribute("x").replace("px",""))+this.graph.getPaddingLeft()-50}px`,textAlign:"center",width:"100px"});const previousValue=self.getLabelText(i),blurEvent=function(){self.setLabelText(shapeLabel.value,i),self._labels[i].textContent=shapeLabel.value;const nextValue=shapeLabel.value;shapeLabel.remove(),shapeLabel.removeEventListener("blur",blurEvent),shapeLabel=!1,self.changed("shapeLabelChanged",{previousValue:previousValue,nextValue:nextValue})};shapeLabel.addEventListener("blur",blurEvent),shapeLabel.addEventListener("keyup",function(e){13===e.keyCode&&blurEvent()}),shapeLabel.addEventListener("keypress",function(e){e.stopPropagation()}),shapeLabel.addEventListener("keydown",function(e){e.stopPropagation()}),shapeLabel.focus()}appendToDom(){return this._forcedParentDom?this._forcedParentDom.appendChild(this.group):this.graph.appendShapeToDom(this),this}forceParentDom(dom){return this._forcedParentDom=dom,this}isHTML(){return!1}}Shape.prototype.computePosition=Shape.prototype.calculatePosition,Shape.prototype.showLabel=Shape.prototype.displayLabel,Shape.prototype.remove=Shape.prototype.kill;_exports.default=Shape,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(5)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_EventEmitter){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_EventEmitter=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_EventEmitter);class Plugin extends _EventEmitter.default{static default(){return{}}constructor(options){super(...arguments),this.options=Object.assign({},Plugin.default(),this.constructor.default(),options)}init(graph){this.graph=graph}onMouseDown(){}onMouseUp(){}onMouseMove(){}}_exports.default=Plugin,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(9),__webpack_require__(12)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphMixinErrorbars,_graphSerieScatter){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphMixinErrorbars=_interopRequireDefault(_graphMixinErrorbars),_graphSerieScatter=_interopRequireDefault(_graphSerieScatter);const defaultOptions={markers:!1,lineColor:"black",lineStyle:1,lineWidth:1,trackMouse:!1,lineToZero:!1,selectableOnClick:!1,overflowX:!1,overflowY:!1};class SerieLine extends _graphSerieScatter.default{constructor(graph,name,options,defaultInherited){super(graph,name,options,util.extend(!0,{},defaultOptions,defaultInherited)),this.selectionType="unselected",this._type="line",util.mapEventEmission(this.options,this),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth},this.styles.selected={lineWidth:3},this.shown=!0,this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(this.graph.ns,"g"),this.domMarker=document.createElementNS(this.graph.ns,"path"),this.domMarker.style?this.domMarker.style.cursor="pointer":this.domMarker.style={cursor:"pointer"},this.additionalData={},this.marker=document.createElementNS(this.graph.ns,"circle"),this.marker.setAttribute("fill","black"),this.marker.setAttribute("r",3),this.marker.setAttribute("display","none"),this.markerLabel=document.createElementNS(this.graph.ns,"text"),this.markerLabelSquare=document.createElementNS(this.graph.ns,"rect"),this.markerLabelSquare.setAttribute("fill","white"),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(this.graph.ns,"g"),this.markerPoints={},this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.independantMarkers=[],this.initExtended1&&this.initExtended1(),this.groupLines.addEventListener("click",()=>{this.options.selectableOnClick&&(this.isSelected()?this.graph.unselectSerie(this):this.graph.selectSerie(this))})}postInit(){this.extendStyles()}setOptions(){return this.applyLineStyles(),this}onMouseWheel(){}empty(){for(var i=0,l=this.lines.length;i<l;i++)this.groupLines.removeChild(this.lines[i]);return this.lines=[],this}select(selectionType="selected"){return this.selected="unselected"!==selectionType,this.selectionType=selectionType,this.applyLineStyles(),this.applyLineStyle(this.getSymbolForLegend()),super.select(selectionType),this}unselect(){return this.selected=!1,super.unselect(),this.select("unselected")}getSymbolForLegend(){const container=this._getSymbolForLegendContainer();if(!this.lineForLegend){var line=document.createElementNS(this.graph.ns,"line");this.applyLineStyle(line),line.setAttribute("x1",5),line.setAttribute("x2",25),line.setAttribute("y1",0),line.setAttribute("y2",0),line.setAttribute("cursor","pointer"),this.lineForLegend=line,container.appendChild(this.lineForLegend)}else this.applyLineStyle(this.lineForLegend);return super.getSymbolForLegend(),this.lineForLegend}degrade(pxPerP){return this.degradationPx=pxPerP,this}drawInit(force){try{this.axisCheck()}catch(e){return console.warn(e),!1}if(this.currentLineId=0,this.counter=0,this._drawn=!0,this.currentLine="",!this.waveform)this._dataToUse=this.data,this._xDataToUse=this.xData;else if(this.degradationPx)this.waveform.resampleForDisplay({resampleToPx:this.degradationPx,xPosition:this.getXAxis().getPx.bind(this.getXAxis()),minX:this.getXAxis().getCurrentMin(),maxX:this.getXAxis().getCurrentMax()}),this._dataToUse=[this.waveform.getDataToUseFlat()];else if(this.waveform.hasAggregation()){let xaxis=this.getXAxis(),numberOfPointsInTotal=this.graph.getDrawingWidth()*(xaxis.getDataMax()-xaxis.getDataMin())/(xaxis.getCurrentMax()-xaxis.getCurrentMin()),promise=this.waveform.selectAggregatedData(numberOfPointsInTotal);if(promise instanceof Promise)return promise.then(()=>{this.draw(force)}),!1;if(!1===promise)return!1;this._dataToUse=this.waveform.getDataToUseFlat()}return!0}removeLinesGroup(){this._afterLinesGroup=this.groupLines.nextSibling,this.groupMain.removeChild(this.groupLines)}insertLinesGroup(){if(!this._afterLinesGroup)throw"Could not find group after lines to insertion.";this.groupMain.insertBefore(this.groupLines,this._afterLinesGroup),this._afterLinesGroup=!1}removeExtraLines(){for(var i=this.currentLineId,l=this.lines.length;i<l;i++)this.groupLines.removeChild(this.lines[i]);this.lines.splice(this.currentLineId,l-this.currentLineId),this.currentLineId=0}draw(force){if(!this.getXAxis()||!this.getYAxis())throw"No axes were defined for this serie";if(force||this.hasDataChanged()){if(super.draw(force),!this.drawInit(force))return;var data=this._dataToUse,xData=this._xDataToUse,slotToUse=this._slotToUse;this.removeLinesGroup(),this.lookForMaxima=!0,this.lookForMinima=!1,this.pos0=this.getYAxis().getPos(Math.max(0,this.getYAxis().getCurrentMin())),this.hasErrors()&&this.errorDrawInit(),this._draw(),this.hasErrors()&&this.errorDraw(),this.removeExtraLines(),this.insertLinesGroup()}for(var i in this.domMarkerHover)this.toggleMarker(i.split(","),!1,!0);for(var i in this.domMarkerSelect)this.toggleMarker(i.split(","),!1,!1);this.applyLineStyle(this.getSymbolForLegend()),this.hasStyleChanged(this.selectionType)&&this.updateStyle(),this.dataHasChanged(!1),super.afterDraw()}_draw(){let waveform=this.waveform,lastX=!1,lastY=!1,xAxis=this.getXAxis(),yAxis=this.getYAxis(),xMin=xAxis.getCurrentMin(),yMin=yAxis.getCurrentMin(),xMax=xAxis.getCurrentMax(),yMax=yAxis.getCurrentMax(),data,x,y,xpx,ypx,xpx2,ypx2;if(!waveform)return;data=waveform.getData(!0);let yshift=waveform.getShift(),yscale=waveform.getScale(),pointOutside=!1,lastPointOutside=!1,_monotoneous=this.isMonotoneous(),i=0,l=waveform.getLength(),yLeftCrossingRatio,yLeftCrossing,yRightCrossingRatio,yRightCrossing,xTopCrossingRatio,xTopCrossing,xBottomCrossingRatio,xBottomCrossing,pointOnAxis;if(this.currentLine="",waveform.isXMonotoneous()){if(waveform.isXMonotoneousAscending())try{i=waveform.getIndexFromX(xMin,!0)||0,l=waveform.getIndexFromX(xMax,!0)||waveform.getLength()}catch(e){l=waveform.getLength()}else try{i=waveform.getIndexFromX(xMax,!0)||0,l=waveform.getIndexFromX(xMin,!0)||waveform.getLength()}catch(e){l=waveform.getLength()}l+=2,l>data.length&&(l=data.length)}for(;i<l;i+=1){if(x=waveform.getX(i,!0),y=data[i]*yscale+yshift,x!=x||y!=y){this._createLine();continue}if(!this.options.overflowX&&x<xMin&&lastX<xMin||!this.options.overflowX&&x>xMax&&lastX>xMax||(!this.options.overflowY&&y<yMin&&lastY<yMin||!this.options.overflowY&&y>yMax&&lastY>yMax)&&!this.options.lineToZero){lastX=x,lastY=y,lastPointOutside=!0;continue}if(this.counter2=i,this.options.lineToZero&&(y>yMax&&(y=yMax),y<yMin&&(y=yMin)),xpx2=this.getX(x),ypx2=this.getY(y),xpx2!=xpx||ypx2!=ypx){if(xpx2!=xpx2||ypx2!=ypx2){0<this.counter&&this._createLine();continue}if(pointOutside=_monotoneous?!this.options.overflowY&&(y<yMin||y>yMax):!this.options.overflowX&&(x<xMin||x>xMax)||!this.options.overflowY&&(y<yMin||y>yMax),this.options.lineToZero){if(pointOutside=x<xMin||x>xMax,pointOutside)continue;}else if(pointOutside||lastPointOutside){!1!==lastX&&!1!==lastY||lastPointOutside?(pointOnAxis=[],yLeftCrossingRatio=(x-xMin)/(x-lastX),yLeftCrossing=y-yLeftCrossingRatio*(y-lastY),yRightCrossingRatio=(x-xMax)/(x-lastX),yRightCrossing=y-yRightCrossingRatio*(y-lastY),xTopCrossingRatio=(y-yMin)/(y-lastY),xTopCrossing=x-xTopCrossingRatio*(x-lastX),xBottomCrossingRatio=(y-yMax)/(y-lastY),xBottomCrossing=x-xBottomCrossingRatio*(x-lastX),1>yLeftCrossingRatio&&0<yLeftCrossingRatio&&!1!==yLeftCrossing&&yLeftCrossing<yMax&&yLeftCrossing>yMin&&pointOnAxis.push([xMin,yLeftCrossing]),1>yRightCrossingRatio&&0<yRightCrossingRatio&&!1!==yRightCrossing&&yRightCrossing<yMax&&yRightCrossing>yMin&&pointOnAxis.push([xMax,yRightCrossing]),1>xTopCrossingRatio&&0<xTopCrossingRatio&&!1!==xTopCrossing&&xTopCrossing<xMax&&xTopCrossing>xMin&&pointOnAxis.push([xTopCrossing,yMin]),1>xBottomCrossingRatio&&0<xBottomCrossingRatio&&!1!==xBottomCrossing&&xBottomCrossing<xMax&&xBottomCrossing>xMin&&pointOnAxis.push([xBottomCrossing,yMax]),0<pointOnAxis.length?pointOutside?lastPointOutside?2==pointOnAxis.length&&(this._createLine(),this._addPoint(this.getX(pointOnAxis[0][0]),this.getY(pointOnAxis[0][1]),pointOnAxis[0][0],pointOnAxis[0][1],!1,!1,!1),this._addPoint(this.getX(pointOnAxis[1][0]),this.getY(pointOnAxis[1][1]),pointOnAxis[0][0],pointOnAxis[0][1],!1,!1,!1)):(1<pointOnAxis.length&&(console.error("Programmation error. Please e-mail me."),console.log(pointOnAxis,xBottomCrossing,xTopCrossing,yRightCrossing,yLeftCrossing,y,yMin,yMax,lastY)),this._addPoint(this.getX(pointOnAxis[0][0]),this.getY(pointOnAxis[0][1]),pointOnAxis[0][0],pointOnAxis[0][1],!1,!1,!1)):(1<pointOnAxis.length&&(console.error("Programmation error. Please e-mail me."),console.log(pointOnAxis,xBottomCrossing,xTopCrossing,yRightCrossing,yLeftCrossing,y,yMin,yMax,lastY)),this._createLine(),this._addPoint(this.getX(pointOnAxis[0][0]),this.getY(pointOnAxis[0][1]),pointOnAxis[0][0],pointOnAxis[0][1],!1,!1,!1),this._addPoint(xpx2,ypx2,lastX,lastY,!1,!1,!0)):!pointOutside&&this._addPoint(xpx2,ypx2,lastX,lastY,i,!1,!1)):(xpx=xpx2,ypx=ypx2,lastX=x,lastY=y),xpx=xpx2,ypx=ypx2,lastX=x,lastY=y,lastPointOutside=pointOutside;continue}this._addPoint(xpx2,ypx2,x,y,i,!1,!0),xpx=xpx2,ypx=ypx2,lastX=x,lastY=y}}if(this._createLine(),this._tracker){this._trackerDom&&this._trackerDom.remove();var cloned=this.groupLines.cloneNode(!0);for(this.groupMain.appendChild(cloned),i=0,l=cloned.children.length;i<l;i++)cloned.children[i].setAttribute("stroke","transparent"),cloned.children[i].setAttribute("stroke-width","25px"),cloned.children[i].setAttribute("pointer-events","stroke");this._trackerDom=cloned,this.groupMain.addEventListener("mousemove",e=>{var coords=this.graph._getXY(e),ret=this.handleMouseMove(!1,!1);this._trackingCallback(this,ret,coords.x,coords.y)}),this.groupMain.addEventListener("mouseleave",()=>{this._trackingOutCallback(this)})}return this}kill(){super.kill()}_addPoint(xpx,ypx,x,y,j,move){xpx!==xpx||ypx!==ypx||(0==this.counter?this.currentLine="M ":this.options.lineToZero||move?this.currentLine+="M ":this.currentLine+="L ",this.currentLine+=xpx,this.currentLine+=" ",this.currentLine+=ypx,this.currentLine+=" ",this.options.lineToZero&&this.pos0!==void 0&&(this.currentLine+="L ",this.currentLine+=xpx,this.currentLine+=" ",this.currentLine+=this.pos0,this.currentLine+=" "),this.hasErrors()&&this.errorAddPoint(j,x,y,xpx,ypx),this.counter++)}_createLine(){var i=this.currentLineId++,line;return this.lines[i]?line=this.lines[i]:(line=document.createElementNS(this.graph.ns,"path"),this.applyLineStyle(line),this.groupLines.appendChild(line),this.lines[i]=line),0==this.counter?line.setAttribute("d",""):line.setAttribute("d",this.currentLine),this.currentLine="M ",this.counter=0,line}applyLineStyles(){for(var i=0;i<this.lines.length;i++)this.applyLineStyle(this.lines[i])}applyLineStyle(line){line.setAttribute("stroke",this.getLineColor()),line.setAttribute("stroke-width",this.getLineWidth()),this.getLineDashArray()?line.setAttribute("stroke-dasharray",this.getLineDashArray()):line.removeAttribute("stroke-dasharray"),this.getFillColor()?line.setAttribute("fill",this.getFillColor()):line.setAttribute("fill","none")}updateStyle(){this.applyLineStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}getMarkerPath(family,add){var z=family.zoom||1,add=add||0,el=[];switch(family.type){case 2:el=["m",-2,-2,"l",4,4,"m",-4,0,"l",4,-4];break;case 3:el=["m",-2,0,"l",4,0,"m",-2,-2,"l",0,4];break;case 4:el=["m",-1,-1,"l",2,0,"l",-1,2,"z"];break;default:case 1:el=["m",-2,-2,"l",4,0,"l",0,4,"l",-4,0,"z"];}if((1==z||!z)&&!add)return el.join(" ");if(el){for(var i=0,l=el.length;i<l;i++)typeof el[i]=="number"&&(el[i]*=z+add);return el.join(" ")}}handleMouseMove(xValue,doMarker,yValue){var valX=xValue||this.getXAxis().getMouseVal(),valY=yValue||this.getYAxis().getMouseVal(),value=this.getClosestPointToXY(valX,valY);if(value){var intY;return value.xMax==value.xMin&&(intY=value.yMin),!(doMarker&&this.options.trackMouse&&null==value.xMin)&&{xBefore:value.xMin,xAfter:value.xMax,yBefore:value.yMin,yAfter:value.yMax,trueX:value.xExact,indexClosest:value.indexClosest,interpolatedY:intY,xClosest:value.xClosest,yClosest:value.yClosest}}}getMax(start,end){var start2=Math.min(start,end),end2=Math.max(start,end),v1=this.getClosestPointToXY(start2),v2=this.getClosestPointToXY(end2),max=-Infinity,i,j,initJ,maxJ;if(v1||(start2=this.minX,v1=this.getClosestPointToXY(start2)),v2||(end2=this.maxX,v2=this.getClosestPointToXY(end2)),!v1||!v2)return-Infinity;for(i=v1.dataIndex;i<=v2.dataIndex;i++)for(initJ=i==v1.dataIndex?v1.xBeforeIndexArr:0,maxJ=i==v2.dataIndex?v2.xBeforeIndexArr:this.data[i].length,j=initJ;j<=maxJ;j+=2)max=Math.max(max,this.data[i][j+1]);return max}getMin(start,end){var start2=Math.min(start,end),end2=Math.max(start,end),v1=this.getClosestPointToXY(start2),v2=this.getClosestPointToXY(end2),min=1/0,i,j,initJ,maxJ;if(v1||(start2=this.minX,v1=this.getClosestPointToXY(start2)),v2||(end2=this.maxX,v2=this.getClosestPointToXY(end2)),!v1||!v2)return 1/0;for(i=v1.dataIndex;i<=v2.dataIndex;i++)for(initJ=i==v1.dataIndex?v1.xBeforeIndexArr:0,maxJ=i==v2.dataIndex?v2.xBeforeIndexArr:this.data[i].length,j=initJ;j<=maxJ;j+=2)min=Math.min(min,this.data[i][j+1]);return min}setStyle(style,selectionType="unselected"){this.styles[selectionType]=style,this.styleHasChanged(selectionType)}setLineStyle(number,selectionType="unselected",applyToSelected){return this.styles[selectionType]=this.styles[selectionType]||{},this.styles[selectionType].lineStyle=number,applyToSelected&&this.setLineStyle(number,"selected"),this.styleHasChanged(selectionType),this}getLineStyle(selectionType){return this.getStyle(selectionType).lineStyle}getLineDashArray(selectionType=this.selectionType||"unselected"){switch(this.getStyle(selectionType).lineStyle){case 2:return"1, 1";break;case 3:return"2, 2";break;case 4:return"3, 3";break;case 5:return"4, 4";break;case 6:return"5, 5";break;case 7:return"5 2";break;case 8:return"2 5";break;case 9:return"4 2 4 4";break;case 10:return"1,3,1";break;case 11:return"9 2";break;case 12:return"2 9";break;case 1:case!1:return!1;break;default:return this.styles[selectionType].lineStyle;}this.styleHasChanged(selectionType)}getStyle(selectionType=this.selectionType||"unselected"){return this.styles[selectionType]||this.styles.unselected}extendStyles(){for(var i in this.styles){var s=this.styles[i];s&&(this.styles[i]=util.extend(!0,{},this.styles.unselected,s))}}extendStyle(styleTarget,styleOrigin){var s=this.styles[styleTarget];this.styles[styleTarget]=util.extend(!0,{},this.styles[styleOrigin||"unselected"],s||{}),this.styleHasChanged(styleTarget)}setLineWidth(width,selectionType,applyToSelected){return selectionType=selectionType||"unselected",this.styles[selectionType]=this.styles[selectionType]||{},this.styles[selectionType].lineWidth=width,applyToSelected&&this.setLineWidth(width,"selected"),this.styleHasChanged(selectionType),this}getLineWidth(selectionType){return this.getStyle(selectionType).lineWidth||1}setLineColor(color,selectionType,applyToSelected){return selectionType=selectionType||"unselected",this.styles[selectionType]=this.styles[selectionType]||{},this.styles[selectionType].lineColor=color,applyToSelected&&this.setLineColor(color,"selected"),this.styleHasChanged(selectionType),this}setFillColor(color,selectionType,applyToSelected){return selectionType=selectionType||"unselected",this.styles[selectionType]=this.styles[selectionType]||{},this.styles[selectionType].fillColor=color,applyToSelected&&this.setFillColor(color,"selected"),this.styleHasChanged(selectionType),this}getLineColor(selectionType){return this.getStyle(selectionType).lineColor||"black"}getFillColor(selectionType){return this.getStyle(selectionType).fillColor||void 0}isMonotoneous(){return this.waveform?this.waveform.isMonotoneous():!!this.xmonotoneous}findLocalMinMax(xRef,xWithin,type){return!!this.waveform&&this.waveform.findLocalMinMax(xRef,xWithin,type)}getClosestPointToXY(valX=this.getXAxis().getMouseVal(),valY=this.getYAxis().getMouseVal(),withinPxX=0,withinPxY=0,useAxis=!1,usePx=!0){const xValAllowed=this.getXAxis().getRelVal(withinPxX),yValAllowed=this.getYAxis().getRelVal(withinPxY),closestPointIndex=this.waveform.findWithShortestDistance({x:valX,y:valY,xMaxDistance:xValAllowed,yMaxDistance:yValAllowed,axisRef:useAxis,scaleX:usePx?1/this.getXAxis().getRelVal(1):1,scaleY:usePx?1/this.getYAxis().getRelVal(1):1});if(isNaN(closestPointIndex)||!1===closestPointIndex)return!1;if(0>closestPointIndex)return!1;const dataOutput={indexBefore:closestPointIndex,indexAfter:closestPointIndex,xExact:valX,indexClosest:closestPointIndex,interpolatedY:this.waveform.getY(closestPointIndex),xClosest:this.waveform.getX(closestPointIndex),yClosest:this.waveform.getY(closestPointIndex)};if(this.waveform.isMonotoneous()){let xBefore=this.waveform.getX(closestPointIndex),xAfter=this.waveform.getX(closestPointIndex),yBefore=this.waveform.getY(closestPointIndex),yAfter=this.waveform.getX(closestPointIndex);xBefore<xAfter?(dataOutput.xBefore=xBefore,dataOutput.xAfter=xAfter,dataOutput.yBefore=yBefore,dataOutput.yAfter=yAfter):(dataOutput.xBefore=xAfter,dataOutput.xAfter=xBefore,dataOutput.yBefore=yAfter,dataOutput.yAfter=yBefore)}return dataOutput}}util.mix(SerieLine,_graphMixinErrorbars.default);_exports.default=SerieLine,module.exports=exports.default})},function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports){"use strict";function _parsePx(px){return!!(px&&px.indexOf&&-1<px.indexOf("px"))&&parseInt(px.replace("px",""))}function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;class Position{constructor(x,y,dx,dy){"object"==typeof x?(this.x=x.x,this.y=x.y,this.dx=x.dx,this.dy=x.dy):(this.x=x,this.y=y,this.dx=dx,this.dy=dy)}duplicate(){return new Position(this.x,this.y,this.dx,this.dy)}compute(graph,xAxis,yAxis,serie){if(graph&&xAxis&&yAxis&&graph.hasXAxis&&graph.hasYAxis||graph.throw(),!graph.hasXAxis(xAxis))throw"Graph does not contain the x axis that was used as a parameter";if(!graph.hasYAxis(yAxis))throw"Graph does not contain the x axis that was used as a parameter";return this._compute(graph,xAxis,yAxis,serie)}_compute(graph,xAxis,yAxis,serie){var relativeTo=this._relativeTo;if(relativeTo)var relativeToComputed=relativeTo._compute(graph,xAxis,yAxis,serie);var pos={x:!1,y:!1},parsed;for(var i in xAxis||(xAxis=graph.getXAxis()),yAxis||(yAxis=graph.getYAxis()),pos){var axis="x"==i?xAxis:yAxis,val=this[i],dval=this[`d${i}`];if(void 0!==val||(void 0===dval||void 0!==relativeTo)&&void 0!==relativeTo)void 0!==val&&(pos[i]=this.getPx(val,axis));else if("x"==i){if(void 0===dval)continue;pos[i]=relativeTo?relativeTo[i]:0}else if(void 0!==this.x&&serie)if(!1!==_parsePx(this.x))console.warn("You have defined x in px and not y. Makes no sense. Returning 0 for y"),pos[i]=0;else try{var closest=serie.getClosestPointToXY(this.x);if(!closest)throw new Error(`Could not find y position for x = ${this.x} on serie "${serie.getName()}". Returning 0 for y.`);pos[i]=serie.getY(closest.yClosest)}catch(error){console.error(error),pos[i]=0}if(void 0!==dval){var def=void 0!==val||null==relativeToComputed||null==relativeToComputed[i]?pos[i]:relativeToComputed[i];if("y"==i&&relativeToComputed&&void 0!==relativeToComputed.x&&null==relativeToComputed.y){if(!serie){throw new Error("Error. No serie exists. Cannot find y value")}var closest=serie.getClosestPointToXY(relativeTo.x);closest&&(def=serie.getY(closest.yMin))}def||(def=0),!1===(parsed=_parsePx(dval))?!1===(parsed=this._parsePercent(dval))?axis&&(pos[i]=def+axis.getRelPx(dval)):pos[i]=def+this._getPositionPx(parsed,!0,axis,graph):pos[i]=def+parsed}}return pos}_getPositionPx(value,x,axis,graph){var parsed;if(!1!==(parsed=_parsePx(value)))return parsed;return!1===(parsed=this._parsePercent(value))?axis?axis.getPos(value):void 0:parsed/100*(x?graph.getDrawingWidth():graph.getDrawingHeight())}_parsePercent(percent){return!!(percent&&percent.indexOf&&-1<percent.indexOf("%"))&&percent}getDeltaPx(value,axis){var v;return!1===(v=_parsePx(value))?`${axis.getRelPx(value)}px`:`${v}px`}deltaPosition(mode,delta,axis){mode="y"==mode?"y":"x";var ref=this[mode],refd=this[`d${mode}`],refPx,deltaPx;if(ref!==void 0)!1===(refPx=_parsePx(ref))?(ref=this.getValPosition(ref,axis),this[mode]=!1===(deltaPx=_parsePx(delta))?ref+delta:ref+axis.getRelVal(deltaPx)):!1===(deltaPx=_parsePx(delta))?this[mode]=`${refPx+axis.getRelPx(delta)}px`:this[mode]=`${refPx+deltaPx}px`;else if(refd!==void 0){if("y"==mode&&ref===void 0&&!this._relativeTo)return;!1===(refPx=_parsePx(refd))?(refd=this.getValPosition(refd,axis),this[`d${mode}`]=!1===(deltaPx=_parsePx(delta))?refd+delta:refd+axis.getRelVal(deltaPx)):!1===(deltaPx=_parsePx(delta))?this[`d${mode}`]=`${refPx+axis.getRelPx(delta)}px`:this[`d${mode}`]=`${refPx+deltaPx}px`}}getValPosition(rel,axis){return"max"==rel?axis.getMaxValue():"min"==rel?axis.getMinValue():"max"==rel?axis.getMaxValue():"min"==rel?axis.getMinValue():rel}getPx(value,axis,rel){var parsed;if("function"==typeof value)return value(axis,rel);if(!1!==(parsed=_parsePx(value)))return parsed;if(!1!==(parsed=this._parsePercent(value)))return parsed;if(axis){if("min"==value)return axis.getMinPx();if("max"==value)return axis.getMaxPx();if(rel)return axis.getRelPx(value);if(isNumeric(value))return axis.getPos(value)}}getPxRel(value,axis){return this.getPx(value,axis,!0)}relativeTo(pos){return this._relativeTo=Position.check(pos),this}static check(pos,callback){if(pos instanceof Position)return pos;var posObject=new Position(pos);if(pos&&pos.relativeTo){const position=callback(pos.relativeTo);position&&posObject.relativeTo(position)}return posObject}}_exports.default=Position,module.exports=exports.default})},function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports){"use strict";function EventEmitter(){}function indexOfListener(listeners,listener){for(var i=listeners.length;i--;)if(listeners[i].listener===listener)return i;return-1}function alias(name){return function(){return this[name].apply(this,arguments)}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;var proto=EventEmitter.prototype;proto.getListeners=function(evt){var events=this._getEvents(),response,key;if(evt instanceof RegExp)for(key in response={},events)events.hasOwnProperty(key)&&evt.test(key)&&(response[key]=events[key]);else response=events[evt]||(events[evt]=[]);return response},proto.flattenListeners=function(listeners){var flatListeners=[],i;for(i=0;i<listeners.length;i+=1)flatListeners.push(listeners[i].listener);return flatListeners},proto.getListenersAsObject=function(evt){var listeners=this.getListeners(evt),response;return listeners instanceof Array&&(response={},response[evt]=listeners),response||listeners},proto.addListener=function(evt,listener){var listeners=this.getListenersAsObject(evt),key;for(key in listeners)listeners.hasOwnProperty(key)&&-1===indexOfListener(listeners[key],listener)&&listeners[key].push("object"==typeof listener?listener:{listener:listener,once:!1});return this},proto.on=alias("addListener"),proto.addOnceListener=function(evt,listener){return this.addListener(evt,{listener:listener,once:!0})},proto.once=alias("addOnceListener"),proto.defineEvent=function(evt){return this.getListeners(evt),this},proto.defineEvents=function(evts){for(var i=0;i<evts.length;i+=1)this.defineEvent(evts[i]);return this},proto.removeListener=function(evt,listener){var listeners=this.getListenersAsObject(evt),index,key;for(key in listeners)listeners.hasOwnProperty(key)&&(index=indexOfListener(listeners[key],listener),-1!==index&&listeners[key].splice(index,1));return this},proto.off=alias("removeListener"),proto.addListeners=function(evt,listeners){return this.manipulateListeners(!1,evt,listeners)},proto.removeListeners=function(evt,listeners){return this.manipulateListeners(!0,evt,listeners)},proto.manipulateListeners=function(remove,evt,listeners){var single=remove?this.removeListener:this.addListener,multiple=remove?this.removeListeners:this.addListeners,i,value;if("object"==typeof evt&&!(evt instanceof RegExp))for(i in evt)evt.hasOwnProperty(i)&&(value=evt[i])&&("function"==typeof value?single.call(this,i,value):multiple.call(this,i,value));else for(i=listeners.length;i--;)single.call(this,evt,listeners[i]);return this},proto.removeEvent=function(evt){var events=this._getEvents(),key;if("string"==typeof evt)delete events[evt];else if(evt instanceof RegExp)for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&delete events[key];else delete this._events;return this},proto.removeAllListeners=alias("removeEvent"),proto.emitEvent=function(evt,args){var listeners=this.getListenersAsObject(evt),listener,i,key,response;for(key in listeners)if(listeners.hasOwnProperty(key))for(i=listeners[key].length;i--;)listener=listeners[key][i],!0===listener.once&&this.removeListener(evt,listener.listener),response=listener.listener.apply(this,args||[]),response===this._getOnceReturnValue()&&this.removeListener(evt,listener.listener);return this},proto.trigger=alias("emitEvent"),proto.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)},proto.setOnceReturnValue=function(value){return this._onceReturnValue=value,this},proto._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},proto._getEvents=function(){return this._events||(this._events={})};_exports.default=EventEmitter,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(24),__webpack_require__(14)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_data_aggregator,_fit_lm){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function pow2ceil(v){v--;for(var p=2;v>>=1;)p<<=1;return p}function pow2floor(v){for(var p=1;v>>=1;)p<<=1;return p}function getIndexInterpolate(value,valueBefore,valueAfter,indexBefore,indexAfter){return(value-valueBefore)/(valueAfter-valueBefore)*(indexAfter-indexBefore)+indexBefore}function euclidianSearch(targetX,targetY,haystackX,haystackY,scaleX=1,scaleY=1){let distance=Number.MAX_VALUE,index=-1,distance_i;if(targetX!==void 0&&targetY==null)for(var i=0,l=haystackX.length;i<l;i++)distance_i=Math.abs((targetX-haystackX[i])*scaleX),distance_i<distance&&(index=i,distance=distance_i);else if(targetX==null&&targetY!==void 0)for(var i=0,l=haystackY.length;i<l;i++)distance_i=Math.abs((targetY-haystackY[i])*scaleY),distance_i<distance&&(index=i,distance=distance_i);else for(var i=0,l=haystackX.length;i<l;i++)distance_i=Math.pow((targetX-haystackX[i])*scaleX,2)+Math.pow((targetY-haystackY[i])*scaleY,2),distance_i<distance&&(index=i,distance=distance_i);return index}function binarySearch(target,haystack,reverse=haystack[haystack.length-1]<haystack[0],fineCheck=!0){let seedA=0,length=haystack.length,seedB=length-1,i=0,nanDirection=1,seedInt;if(!reverse&&(haystack[0]>target||haystack[seedB]<target)||reverse&&(haystack[0]<target||haystack[seedB]>target))throw new Error(`Target ${target} is not in the stack`);if(haystack[seedA]==target)return seedA;if(haystack[seedB]==target)return seedB;for(;;){if(i++,1e3<i)throw new Error("Error loop");for(seedInt=Math.floor((seedA+seedB)/2);isNaN(haystack[seedInt]);){if(seedInt>=haystack.length-1)return haystack.length-1;if(0>=seedInt)return 0;seedInt+=nanDirection}if(haystack[seedInt]==target)return seedInt;if(seedInt==seedA||seedInt==seedB)return fineCheck?Math.abs(target-haystack[seedA])<Math.abs(target-haystack[seedB])?seedA:seedB:seedInt;if(haystack[seedInt]<target)reverse?seedB=seedInt:seedA=seedInt;else if(haystack[seedInt]>target)reverse?seedA=seedInt:seedB=seedInt;else return!1;nanDirection*=-1}}function dist2(v,w){return Math.pow(v.x-w.x,2)+Math.pow(v.y-w.y,2)}function distToSegmentSquared(p,v,w){var l2=dist2(v,w);if(0==l2)return dist2(p,v);var t=((p.x-v.x)*(w.x-v.x)+(p.y-v.y)*(w.y-v.y))/l2;return t=Math.max(0,Math.min(1,t)),dist2(p,{x:v.x+t*(w.x-v.x),y:v.y+t*(w.y-v.y)})}function distToSegment(p,v,w){return Math.pow(distToSegmentSquared(p,v,w),.5)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.WaveformHash=_exports.Waveform=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_data_aggregator=_interopRequireDefault(_data_aggregator),_fit_lm=_interopRequireDefault(_fit_lm);class Waveform{constructor(data=[],xOffset=0,xScale=1){this.xOffset=xOffset,this.xScale=xScale,this.errors={nb:0,bars:{above:null,below:null},boxes:{above:null,below:null}},this.BELOW=Waveform.BELOW,this.ABOVE=Waveform.ABOVE,this.BOX=Waveform.BOX,this.BAR=Waveform.BAR,this.setData(data)}setData(data,dataX=null){if(Array.isArray(data[0])){let x=[],y=[];data.forEach(el=>{x.push(el[0]),y.push(el[1])}),this.setXWaveform(x),data=y}let newData=this._makeArray(data.length),warnNaN=!1;const nanable=this.isNaNAllowed();return data.map((el,index)=>{nanable||el[0]===el[0]&&el[1]===el[1]||(warnNaN=!0),newData[index]=el}),warnNaN&&this.warn("Trying to assign NaN values to a typed array that does not support NaNs. 0's will be used instead"),this._setData(newData),dataX&&this.setXWaveform(dataX),this}getY(index,optimized){return optimized&&this.dataInUse?this.dataInUse.y[index]*this.getScale()+this.getShift():this.data[index]*this.getScale()+this.getShift()}setXWaveform(waveform){if(!(waveform instanceof Waveform))if(Array.isArray(waveform))waveform=new Waveform(waveform);else throw"Cannot set X waveform. Data is not a valid array.";return this.xdata=waveform,this.computeXMinMax(),this}hasXWaveform(){return!!this.xdata}getXWaveform(){if(this.xdata)return this.xdata;for(var wave=new Waveform,i=0;i<this.getLength();i+=1)wave.append(this.getX(i));return wave}rescaleX(offset,scale){return this.xScale=scale,this.xOffset=offset,this.computeXMinMax(),this}getTypedArrayClass(){return this._typedArrayClass||!1}setTypedArrayClass(constructor){this.getTypedArrayClass()&&this.isNaNAllowed()&&!this.isNaNAllowed(constructor)&&this.warn(`NaN values are not allowed by the new constructor (${constructor.name}) while it was allowed by the previous one (${this._typedArrayClass.name})`),this.getTypedArrayClass()&&this.isUnsigned()&&!this.isUnsigned(constructor)&&this.warn("You are switching from signed values to unsigned values. You may experience data corruption if there were some negative values."),this._typedArrayClass=constructor,this.data&&this._setData(constructor.from(this.data)),this.hasXWaveform()&&this.getXWaveform().setTypedArrayClass(constructor)}isNaNAllowed(constructor=this._typedArrayClass){return constructor==Array||constructor==Float32Array||constructor==Float64Array}isUnsigned(constructor=this._typedArrayClass){return constructor==Uint8Array||constructor==Uint8ClampedArray||constructor==Uint16Array||constructor==Uint32Array}recalculateMinMaxNewPoint(x,y){(x<this.minX||this.minX===void 0)&&(this.minX=x),(x>this.maxX||this.maxX===void 0)&&(this.maxX=x),(y<this.minY||this.minY===void 0)&&(this.minY=y),(y>this.maxY||this.maxY===void 0)&&(this.maxY=y)}prepend(x,y){return"function"==typeof x&&(x=x(this)),"function"==typeof y&&(y=y(this)),this.xdata?this.xdata.prepend(null,x):null===x?this.xOffset-=this.xScale:(this.xdata=this.getXWaveform(),this.xdata.prepend(null,x)),this.data.unshift(y),this.recalculateMinMaxNewPoint(x,y),this}append(x,y){return"function"==typeof x&&(x=x(this)),"function"==typeof y&&(y=y(this)),this.xdata?this.xdata.append(null,x):null!==x&&(this.xdata=this.getXWaveform(),this.xdata.append(null,x)),this.monotoneous&&(y>this.data[this.data.y]&&!1===this.getMonotoneousAscending()?this.monotoneous=!1:y<this.data[this.data.y]&&!0===this.getMonotoneousAscending()&&(this.monotoneous=!1)),(1==this.data.length||void 0===this._monotoneousAscending)&&(this.monotoneous=!0,this._monotoneousAscending=y==this.data[0]?void 0:y>this.data[0]),this.data.push(y),this.recalculateMinMaxNewPoint(x,y),this}concat(wave2){return this.xdata||(this.xdata=this.getXWaveform()),wave2.xdata||(wave2.xdata=wave2.getXWaveform()),this.data=this.data.concat(wave2.data),this.xdata.data=this.xdata.data.concat(wave2.xdata.data),this.checkMonotonicity(),this.xdata.checkMonotonicity(),this.computeXMinMax(),this}_makeArray(length){const constructor=this.getTypedArrayClass();return constructor?new constructor(length):Array(length)}_setData(dataY){const l=dataY.length;let i=1,monoDir=dataY[1]>dataY[0],minY=dataY[0],maxY=dataY[0];for(isNaN(minY)&&(minY=Number.MAX_VALUE),isNaN(maxY)&&(maxY=-Number.MAX_VALUE),this._monotoneous=!0;i<l;i++)dataY[i]!==dataY[i-1]&&monoDir!=dataY[i]>dataY[i-1]&&(this._monotoneous=!1),dataY[i]===dataY[i]&&(minY=Math.min(dataY[i],minY),maxY=Math.max(dataY[i],maxY));this._monotoneous&&(this._monotoneousAscending=dataY[1]>dataY[0]),this.data=dataY,this.minY=minY,this.maxY=maxY,this.checkMinMaxErrorBars(),this.computeXMinMax()}checkMinMaxErrorBars(){let minY=this.minY,maxY=this.maxY,i=0,l=this.getLength();if(this.hasErrorBars()){for(i=0;i<l;i++)this.data[i]===this.data[i]&&(minY=Math.min(minY,this.data[i]-this.getMaxError(i,"below")),maxY=Math.max(maxY,this.data[i]+this.getMaxError(i,"above")));this.minY=minY,this.maxY=maxY}else this.minY=minY,this.maxY=maxY}computeXMinMax(){if(this.data)if(this.xdata)this.minX=this.xdata.getMin(),this.maxX=this.xdata.getMax();else{const b1=this.xOffset+this.xScale*this.getLength(),b2=this.xOffset;this.minX=Math.min(b1,b2),this.maxX=Math.max(b1,b2)}}getDataInUse(){return this.dataInUse||this.data}getIndexFromVal(val,useDataToUse=!1,roundingMethod=Math.round){let data=useDataToUse&&this.dataInUse?this.dataInUse.y:this.data;let position;return position=this.getIndexFromMonotoneousData(val,data,this.data.getMonotoneousAscending(),roundingMethod),useDataToUse&&this.dataInUse&&"aggregateY"==this.dataInUseType?position-position%4:position}getIndexFromX(xval,useDataToUse=!1,roundingMethod=Math.round){let xdata,position;return(xval-=this.getXShift(),xval/=this.getXScale(),!(xval<this.getDataMinX()))&&!(xval>this.getDataMaxX())&&(useDataToUse&&this.dataInUse?xdata=this.dataInUse.x:this.xdata&&(xdata=this.xdata.getData()),position=this.hasXWaveform()?this.isXMonotoneous()?this.xdata.getIndexFromMonotoneousData(xval,xdata,this.xdata.getMonotoneousAscending(),roundingMethod):euclidianSearch(xval,void 0,xdata,void 0,1,void 0):Math.max(0,Math.min(this.getLength()-1,roundingMethod((xval-this.xOffset)/this.xScale))),useDataToUse&&this.dataInUse&&"aggregateX"==this.dataInUseType?position-position%4:position)}getIndexFromY(yval,useDataToUse=!1,roundingMethod=Math.round){let ydata,position;return(yval-=this.getShift(),yval/=this.getScale(),!(yval<this.getDataMinY()))&&!(yval>this.getDataMaxY())&&(ydata=useDataToUse&&this.dataInUse?this.dataInUse.y:this.getData(),position=euclidianSearch(void 0,yval,void 0,ydata,1,void 0),useDataToUse&&this.dataInUse&&"aggregateX"==this.dataInUseType?position-position%4:position)}setAtIndex(index,value){this.data[index]=value}getIndexFromXY(xval,yval,useDataToUse=!1,roundingMethod=Math.round,scaleX=1,scaleY=1){let xdata,ydata;useDataToUse&&this.dataInUse?(xdata=this.dataInUse.x,ydata=this.dataInUse.y):this.xdata&&(xdata=this.xdata.data,ydata=this.data);let position;return position=this.getIndexFromDataXY(xval,xdata,yval,ydata,scaleX,scaleY),useDataToUse&&this.dataInUse&&"aggregateX"==this.dataInUseType?position-position%4:position}getIndexFromDataXY(valX,dataX,valY,dataY,scaleX=1,scaleY=1){return valX-=this.getXShift(),valX/=this.getXScale(),valY-=this.getShift(),valY/=this.getScale(),euclidianSearch(valX,valY,dataX,dataY,scaleX,scaleY)}getIndexFromMonotoneousData(val,valCollection,isAscending){if(!this.isMonotoneous())throw console.trace(),"Impossible to get the index from a non-monotoneous wave !";return val-=this.getShift(),val/=this.getScale(),binarySearch(val,valCollection,!isAscending)}findWithShortestDistance(options){if(!options.axisRef){const index=this.getIndexFromXY(options.x,options.y,!0,void 0,options.scaleX,options.scaleY);return options.xMaxDistance&&Math.abs(options.x-this.getX(index))>Math.abs(options.xMaxDistance)?-1:options.yMaxDistance&&Math.abs(options.y-this.getY(index))>Math.abs(options.yMaxDistance)?-1:index}if("x"==options.axisRef){const index=this.getIndexFromX(options.x,!0,void 0);return options.xMaxDistance&&Math.abs(options.x-this.getX(index))>Math.abs(options.xMaxDistance)?-1:index}if("y"==options.axisRef){const index=this.getIndexFromY(options.y,!0,void 0);return options.yMaxDistance&&Math.abs(options.y-this.getY(index))>Math.abs(options.yMaxDistance)?-1:index}}getShortestDistanceToPoint(valX,valY,maxDistanceX,maxDistanceY){valX-=this.getXShift(),valX/=this.getXScale(),valY-=this.getShift(),valY/=this.getScale();let x,y,y2,x2,i,distance,shortestDistance,shortestDistanceIndex;const point={x:valX,y:valY};for(i=0;i<this.length()-1;i++)(shortestDistance=Math.POSITIVE_INFINITY,shortestDistanceIndex=0,x=this.getX(i),y=this.getY(i),x2=this.getX(i+1),y2=this.getY(i+1),!(maxDistanceX&&(x-valX>maxDistanceX&&x2-valX>maxDistanceX||valX-x>maxDistanceX&&valX-x2>maxDistanceX)||maxDistanceY&&(y-valY>maxDistanceY&&y2-valY>maxDistanceY||valY-y>maxDistanceY&&valY-y2>maxDistanceY)))&&(distance=distToSegment(point,{x:x,y:y},{x:x2,y:y2}),distance<shortestDistance&&(shortestDistance=distance,shortestDistanceIndex=i));return{shortestDistance:distance,index:shortestDistanceIndex}}getReductionType(){return this.dataInUseType}getXMin(){return this.minX*this.getXScale()+this.getXShift()}getXMax(){return this.maxX*this.getXScale()+this.getXShift()}getYMin(){return this.minY*this.getScale()+this.getShift()}getYMax(){return this.maxY*this.getScale()+this.getShift()}getMin(){return this.minY*this.getScale()+this.getShift()}getMax(){return this.maxY*this.getScale()+this.getShift()}getMinX(){return this.minX*this.getXScale()+this.getXShift()}getMaxX(){return this.maxX*this.getXScale()+this.getXShift()}getMinY(){return this.minY*this.getScale()+this.getShift()}getMaxY(){return this.maxY*this.getScale()+this.getShift()}getDataMaxX(){return this.maxX}getDataMinX(){return this.minX}getDataMaxY(){return this.maxY}getDataMinY(){return this.minY}getDataY(){return this.data}getData(optimized){return optimized&&this.dataInUse?this.dataInUse.y:this.data}setShift(shift=0){return this.shift=shift,this}getShift(){return this.shift||0}getScale(){return this.scale||1}setScale(scale=1){return this.scale=scale,this}setXShift(shift=0){return this.hasXWaveform?(this.getXWaveform().setShift(shift),this):this}getXShift(shift=0){return this.hasXWaveform?this.getXWaveform().getShift():0}setXScale(scale=1){return this.hasXWaveform?(this.getXWaveform().setScale(scale),this):this}getXScale(){return this.hasXWaveform?this.getXWaveform().getScale():1}getLength(){return this.data.length}getDataToUseFlat(){let j=0,l,arr;if(this.dataInUse){l=this.dataInUse.x.length,arr=Array(2*l).fill(0);for(var i=0;i<l;i+=1)arr[j]=this.dataInUse.x[i],arr[j+1]=this.dataInUse.y[i],j+=2}else{l=this.getLength(),arr=Array(2*l).fill(0);for(var i=0;i<l;i+=1)arr[j+1]=this.data[i],arr[j]=this.getX(i),j+=2}return arr}fit(options){var self=this;return new Promise(function(resolver){var fit=new _fit_lm.default(util.extend({},{dataY:self,dataX:self.getXWaveform(),done:function(results){resolver(results)},waveform:new Waveform},options));fit.init(),fit.fit()})}getX(index,optimized){return optimized&&this.dataInUse?this.dataInUse.x[index]*this.getXScale()+this.getXShift():this.xdata?this.xdata.data[index]*this.getXScale()+this.getXShift():this.xOffset+index*this.xScale}getXRaw(index,optimized){return optimized&&this.dataInUse?this.dataInUse.x[index]:this.xdata?this.xdata.data[index]:index}_integrateP(from=0,to=this.getLength()-1){if(from=Math.round(from),to=Math.round(to),from>to){let temp=from;from=to,to=temp}var l=to-from+1,sum=0;let deltaTot=0,diff;for(var arrY=this.getData();from<=to;from++)arrY.length-1>from&&(diff=this.getX(from+1)-this.getX(from),deltaTot+=diff,sum+=arrY[from]*diff);return[sum,l,deltaTot]}integrateP(from,to){var val=this._integrateP(from,to);return val[0]}integrate(fromX,toX){return this.integrateP(this.getIndexFromX(fromX),this.getIndexFromX(toX))}average(p0=0,p1=this.getLength()-1){return this.getAverageP(p0,p1)}mean(){return this.average()}stddev(){let num=0,denom=0;const mean=this.mean();for(var i=0;i<this.getLength();i++)num+=Math.pow(this.getY(i)-mean,2),denom++;return Math.pow(num/denom,.5)}getAverageP(from,to){var sum=this._integrateP(from,to);return sum[0]/sum[2]}getAverageX(from,to){var sum=this._integrateX(from,to);return sum[0]/sum[2]}checkMonotonicity(){let i=1,data=this.getData();const l=this.data.length;for(let dir=data[1]>data[0];i<l;i++)if(data[i]!==data[i-1]&&dir!==data[i]>data[i-1])return this._monotoneous=!1;return this._monotoneousAscending=data[1]>data[0],this._monotoneous=!0}requireXMonotonicity(){this.xdata&&this.xdata.requireMonotonicity()}requireMonotonicity(){if(!this.isMonotoneous())throw"The wave must be monotonic"}isMonotoneous(){return!!this._monotoneous}isXMonotoneous(){return!this.xdata||this.xdata.isMonotoneous()}invert(data){let d=data||this.data;return d.reverse(),this.xdata&&this.xdata.invert(),this.isMonotoneous()&&(this._monotoneousAscending=!this._monotoneousAscending),this}resampleForDisplay(options){let i=0;this.requireXMonotonicity();let inverting=!1,dataY=this.getDataY(),data={x:[],y:[]},dataMinMax=[],doing_mean=!1,firstPointIndex=0,resampleSum,resampleMin,resampleMax,resampleNum,resample_x_start,resample_x_px_start,x_px,xval;const l=this.getLength();if(!options.xPosition)throw"No position calculation method provided";if(!options.resampleToPx)throw"No \"resampleToPx\" method was provided. Unit: px per point";if(options.minX>options.maxX){let temp=options.minX;options.minX=options.maxX,options.maxX=temp}for((this.xdata&&!this.xdata.getMonotoneousAscending()||!this.xdata&&-0>this.xScale)&&(inverting=!0,i=l);inverting?0<i:i<l;inverting?i--:i++){if(xval=this.getX(i),options.minX>xval){firstPointIndex=i;continue}if(x_px=options.xPosition(xval),!doing_mean){for(firstPointIndex?(data.x.push(xval),data.y.push(dataY[firstPointIndex])):firstPointIndex=i;isNaN(dataY[i]);)inverting?i--:i++;resampleSum=resampleMin=resampleMax=dataY[firstPointIndex],resampleNum=1,resample_x_px_start=x_px,resample_x_start=xval,firstPointIndex=0,doing_mean=!0;continue}if(Math.abs(x_px-resample_x_px_start)>options.resampleToPx||i==l||0==i||isNaN(dataY[i])){let xpos=(resample_x_start+xval)/2;if(data.x.push(xpos),data.y.push(resampleSum/resampleNum),dataMinMax.push(xpos,resampleMin,resampleMax),void 0!==options.maxX&&xval>options.maxX)break;doing_mean=!1;continue}resampleSum+=dataY[i],resampleNum++,resampleMin=Math.min(resampleMin,dataY[i]),resampleMax=Math.max(resampleMax,dataY[i])}return this.dataInUseType="resampled",this.dataInUse=data,dataMinMax}interpolate(x){let yData=this.getDataY(),xIndex;if(this.xdata){let xData=this.xdata.getData();try{xIndex=binarySearch(x,xData,!this.xdata.getMonotoneousAscending())}catch(e){return NaN}return xData[xIndex]==x?yData[xIndex]:(x-xData[xIndex])/(xData[xIndex+1]-xData[xIndex])*(yData[xIndex+1]-yData[xIndex])+yData[xIndex]}else{xIndex=(x-this.xOffset)/this.xScale;let xIndexF=Math.floor(xIndex);return(xIndex-xIndexF)*(yData[xIndexF+1]-yData[xIndexF])+yData[xIndexF]}}interpolateIndex_X(index){this.getDataY();if(this.xdata){let xData=this.xdata.getData(),indexStart=Math.floor(index);return(index-indexStart)*(xData[indexStart+1]-xData[indexStart])+xData[indexStart]}}getMonotoneousAscending(){return this.isMonotoneous()?this._monotoneousAscending:"The waveform is not monotoneous"}getXMonotoneousAscending(){return this.xdata?this.xdata.getMonotoneousAscending():0<this.xScale}isXMonotoneousAscending(){return this.getXMonotoneousAscending(...arguments)}divide(numberOrWave){return this._arithmetic(numberOrWave,DIVIDE)}divideBy(){return this.divide(...arguments)}multiply(numberOrWave){return this._arithmetic(numberOrWave,MULTIPLY)}multiplyBy(){return this.multiply(...arguments)}log(){return this.logBase(10)}ln(){return this.logBase(Math.E)}logBase(base){let logBase=Math.log(base);this.data.map(valY=>Math.log(valY)/logBase)}add(numberOrWave){return this._arithmetic(numberOrWave,ADD)}addBy(){return this.add(...arguments)}subtract(numberOrWave){return this._arithmetic(numberOrWave,SUBTRACT)}subtractBy(){return this.subtract(...arguments)}math(method){for(var i=0;i<this.getLength();i++)this.data[i]=method(this.getY(i),this.getX(i));return this._setData(this.data),this}_arithmetic(numberOrWave,operator){if(numberOrWave instanceof Waveform)return this._waveArithmetic(numberOrWave,operator);return"number"==typeof numberOrWave?this._numberArithmetic(numberOrWave,operator):void 0}_numberArithmetic(num,operation){let i=0,l=this.getLength();if(operation==MULTIPLY){for(;i<l;i++)this.data[i]*=num;this.minY*=num,this.maxY*=num}else if(operation==DIVIDE){for(;i<l;i++)this.data[i]/=num;this.minY/=num,this.maxY/=num}else if(operation==ADD){for(;i<l;i++)this.data[i]+=num;this.minY+=num,this.maxY+=num}else if(operation==SUBTRACT){for(;i<l;i++)this.data[i]-=num;this.minY-=num,this.maxY-=num}return this}_waveArithmetic(wave,operation){let yDataThis=this.getDataY(),i=0;const l=this.getLength();if(this.requireXMonotonicity(),wave.requireXMonotonicity(),this.xdata&&wave.xdata){const xSet=new Set,xData=this.xdata.data,xData2=wave.xdata.data;for(i=0;i<xData.length;i++)xSet.add(xData[i]);for(i=0;i<xData2.length;i++)xSet.add(xData2[i]);const xs=Array.from(xSet.values());xs.sort((a,b)=>a-b);const ys=xs.map(x=>operation==MULTIPLY?this.interpolate(x)*wave.interpolate(x):operation==DIVIDE?this.interpolate(x)/wave.interpolate(x):operation==ADD?this.interpolate(x)+wave.interpolate(x):operation==SUBTRACT?this.interpolate(x)-wave.interpolate(x):void 0);this._setData(ys),this.xdata._setData(xs)}else{if(operation==MULTIPLY)for(;i<l;i++)yDataThis[i]*=wave.interpolate(this.getX(i));else if(operation==DIVIDE)for(;i<l;i++)yDataThis[i]/=wave.interpolate(this.getX(i));else if(operation==ADD)for(;i<l;i++)yDataThis[i]+=wave.interpolate(this.getX(i));else if(operation==SUBTRACT)for(;i<l;i++)yDataThis[i]-=wave.interpolate(this.getX(i));this._setData(yDataThis)}return this}aggregate(direction="x"){this._dataAggregating={},this._dataAggregated={},this._dataAggregationDirection=direction.toUpperCase();var pow2=pow2floor(this.getLength());this._dataAggregating=(0,_data_aggregator.default)({minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,data:this.data,xdata:this.xdata?this.xdata.getData():void 0,xScale:this.xScale,xOffset:this.xOffset,numPoints:pow2,direction:direction}).then(event=>{this._dataAggregated=event.aggregates,this._dataAggregating=!1})}hasAggregation(){return!!this._dataAggregated}selectAggregatedData(pxWidth){if(2>pxWidth)return!1;var level=pow2ceil(pxWidth);return this._dataAggregated[level]?(this.dataInUseType=`aggregate${this._dataAggregationDirection}`,void(this.dataInUse=this._dataAggregated[level])):this._dataAggregating?this._dataAggregating:void(this.dataInUseType="none",this.dataInUse={y:this.data,x:this.getXWaveform().data})}duplicate(alsoDuplicateXWave=!0){var newWaveform=new Waveform;return newWaveform._setData(this.getDataY().slice()),newWaveform.rescaleX(this.xOffset,this.xShift),newWaveform.setShift(this.getShift()),newWaveform.setScale(this.getScale()),this.xdata?(alsoDuplicateXWave?newWaveform.setXWaveform(this.xdata.duplicate()):newWaveform.setXWaveform(this.xdata),newWaveform.setXShift(this.getXShift()),newWaveform.setXScale(this.getXScale())):(newWaveform.xOffset=this.xOffset,newWaveform.xScale=this.xScale),newWaveform}subrangeX(fromX,toX){if(!this.xdata){let fromP=this.getIndexFromX(fromX),toP=this.getIndexFromX(toP);return new Waveform().setData(this.data.slice(fromP,toP)).rescaleX(this.xOffset,this.xScale)}for(var waveform=new Waveform,i=0,l=this.data.length;i<l;i++)this.data[i]>=fromX&&this.data[i]<toX&&waveform.append(this.dataX[i],this.data[i]);return waveform}findLocalMinMax(xRef,xWithin,type){let index=this.getIndexFromX(xRef),indexPlus=this.getIndexFromX(xRef+xWithin),indexMinus=this.getIndexFromX(xRef-xWithin);return this.findLocalMinMaxIndex(indexMinus,indexPlus,type)}findLocalMinMaxIndex(indexMinus,indexPlus,type){let tmp;indexPlus<indexMinus&&(tmp=indexPlus,indexPlus=indexMinus,indexMinus=tmp);let curr,currI;if("max"==type){curr=Number.NEGATIVE_INFINITY;for(var i=indexMinus;i<=indexPlus;i++)this.getY(i)>curr&&(curr=this.getY(i),currI=i)}else{curr=Number.POSITIVE_INFINITY;for(var i=indexMinus;i<=indexPlus;i++)this.getY(i)<curr&&(curr=this.getY(i),currI=i)}return currI!=indexMinus&&currI!=indexPlus&&this.getX(currI)}warn(text){console&&console.warn(text)}setUnit(unit){return this.unit=unit,this}setXUnit(unit){return this.hasXWaveform()&&this.xdata.setUnit(unit),this.xunit=unit,this}getUnit(){return this.unit||""}getXUnit(){return this.hasXWaveform()?this.xdata.getUnit():""|this.xunit}hasXUnit(){return 0<this.getXUnit().length}hasUnit(){return 0<this.getUnit().length}findLevels(level,options){options=util.extend({box:1,edge:"both",rounding:"before",rangeP:[0,this.getLength()]},options);for(var lastLvlIndex=options.rangeP[0],indices=[],i=0,lvlIndex;lvlIndex=this.findLevel(level,util.extend(!0,{},options,{rangeP:[lastLvlIndex,options.rangeP[1]]}));)if(indices.push(lvlIndex),lastLvlIndex=Math.ceil(lvlIndex),i++,1e3<i)return;return indices}findLevel(level,options){options=util.extend({box:1,edge:"both",direction:"ascending",rounding:"before",rangeP:[0,this.getLength()]},options),options.rangeX&&(options.rangeP=options.rangeX.map(this.getIndexFromX));var box=options.box,value,below,i,j,l,increment;for(0==box%2&&box++,"descending"==options.direction?(i=options.rangeP[1],l=options.rangeP[0],increment=-1):(i=options.rangeP[0],l=options.rangeP[1],increment=+1);;i+=increment){if("descending"==options.direction){if(i<l)break;}else if(i>l)break;if(!(i<options.rangeP[0]+(box-1)/2)){if(i>options.rangeP[1]-(box-1)/2)break;if(value=this.getAverageP(i-(box-1)/2,i+(box-1)/2),null==below){below=value<level;continue}if(value>=level&&below){if(below=!1,"ascending"==options.edge||"both"==options.edge)for(let j=i+(box-1)/2;j>=i-(box-1)/2;j--)if(this.data[j]>=level&&this.data[j-1]<=level)switch(options.rounding){case"before":return j-1;break;case"after":return j;break;case"interpolate":return getIndexInterpolate(level,this.data[j],this.data[j-1],j,j-1);}}else if(value<=level&&!below&&(below=!0,"descending"==options.edge||"both"==options.edge))for(j=i+(box-1)/2;j>=i-(box-1)/2;j--)if(this.data[j]<=level&&this.data[j-1]>=level)switch(options.rounding){case"before":return j-1;break;case"after":return j;break;case"interpolate":return getIndexInterpolate(level,this.data[j],this.data[j-1],j,j-1);}}}}normalize(mode){let factor,total,minValue,maxValue,ratio,i;if("max1"==mode||"max100"==mode){for(factor=1,"max100"==mode&&(factor=100),maxValue=this.data[0],i=1;i<this.getLength();i++)this.data[i]>maxValue&&(maxValue=this.data[i]);for(i=0;i<this.getLength();i++)this.data[i]/=maxValue/factor}else if("sum1"==mode){for(total=0,i=0;i<this.getLength();i++)total+=this.data[i];for(i=0;i<this.getLength();i++)this.data[i]/=total}else if("max1min0"==mode){for(maxValue=this.data[0],minValue=this.data[0],i=1;i<this.getLength();i++)this.data[i]>maxValue?maxValue=this.data[i]:this.data[i]<minValue&&(minValue=this.data[i]);for(ratio=1/(maxValue-minValue),i=0;i<this.getLength();i++)this.data[i]=(this.data[i]-minValue)*ratio}this.setData(this.data)}filterNaN(){const l=this.data.length-1;for(var i=l;0<=i;i--)isNaN(this.data[i])&&(this.data=this.data.splice(i,1),this.xdata&&this.xdata.data.splice(i,1))}filterInfinity(){const l=this.data.length-1;for(var i=l;0<=i;i--)isFinite(this.data[i])||(this.data=this.data.splice(i,1),this.xdata&&this.xdata.data.splice(i,1))}setErrorBarX(waveform){waveform instanceof Waveform||(waveform=new this.constructor(waveform));var xWave=this.getXWaveform();return xWave.setErrorBar(waveform),this}setErrorBarXBelow(waveform){waveform instanceof Waveform||(waveform=new this.constructor(waveform));var xWave=this.getXWaveform();return xWave.setErrorBarBelow(waveform),this}setErrorBarXAbove(waveform){waveform instanceof Waveform||(waveform=new this.constructor(waveform));var xWave=this.getXWaveform();return xWave.setErrorBarAbove(waveform),this}setErrorBoxX(waveform){waveform instanceof Waveform||(waveform=new this.constructor(waveform));var xWave=this.getXWaveform();return xWave.setErrorBoxAbove(waveform),xWave.setErrorBoxBelow(waveform),this}setErrorBoxXBelow(waveform){waveform instanceof Waveform||(waveform=new this.constructor(waveform));var xWave=this.getXWaveform();return xWave.setErrorBoxBelow(waveform),this}setErrorBoxXAbove(waveform){waveform instanceof Waveform||(waveform=new this.constructor(waveform));var xWave=this.getXWaveform();return xWave.setErrorBoxAbove(waveform),this}setErrorBar(waveform,checkMinMax=!0){waveform instanceof Waveform||(waveform=new this.constructor(waveform)),this.errors.nb++,this.errors.nb++,this.errors.bars.below=waveform,this.errors.bars.above=waveform,checkMinMax&&this._setData(this.data)}setErrorBarBelow(waveform,checkMinMax=!0){waveform instanceof Waveform||(waveform=new this.constructor(waveform)),this.errors.nb++,this.errors.bars.below=waveform,checkMinMax&&this._setData(this.data)}setErrorBarAbove(waveform,checkMinMax=!0){waveform instanceof Waveform||(waveform=new this.constructor(waveform)),this.errors.nb++,this.errors.bars.above=waveform,checkMinMax&&this._setData(this.data)}setErrorBox(waveform,checkMinMax=!0){waveform instanceof Waveform||(waveform=new this.constructor(waveform)),this.errors.nb++,this.errors.nb++,this.errors.boxes.above=waveform,this.errors.boxes.below=waveform,checkMinMax&&this._setData(this.data)}setErrorBoxBelow(waveform,checkMinMax=!0){waveform instanceof Waveform||(waveform=new this.constructor(waveform)),this.errors.nb++,this.errors.boxes.below=waveform,checkMinMax&&this._setData(this.data)}setErrorBoxAbove(waveform,checkMinMax=!0){waveform instanceof Waveform||(waveform=new Waveform(waveform)),this.errors.boxes.above=waveform,checkMinMax&&this._setData(this.data)}getMaxError(i,side=Waveform.ABOVE){return Math.max(this.getMaxErrorType(i,side,Waveform.BOX),this.getMaxErrorType(i,side,Waveform.BAR))}getMaxErrorType(i,side=Waveform.ABOVE,type=Waveform.BOX){let stack;if(type==Waveform.BOX)stack=this.errors.boxes;else if(type==Waveform.BAR)stack=this.errors.bars;else throw"Unknown type of error";let waveform;return(waveform=stack[side])||(side==Waveform.ABOVE?stack[side]==Waveform.BELOW&&(waveform=stack.below):stack[side]==Waveform.ABOVE&&(waveform=stack.above)),waveform?waveform.getY(i):0}getErrorBarXBelow(index){return this.getErrorX(index,Waveform.BELOW,Waveform.BAR)}getErrorBarXAbove(index){return this.getErrorX(index,Waveform.ABOVE,Waveform.BAR)}getErrorBoxXBelow(index){return this.getErrorX(index,Waveform.BELOW,Waveform.BOX)}getErrorBoxXAbove(index){return this.getErrorX(index,Waveform.ABOVE,Waveform.BOX)}getErrorBarYBelow(index){return this.getError(index,Waveform.BELOW,Waveform.BAR)}getErrorBarYAbove(index){return this.getError(index,Waveform.ABOVE,Waveform.BAR)}getErrorBoxYBelow(index){return this.getError(index,Waveform.BELOW,Waveform.BOX)}getErrorBoxYAbove(index){return this.getError(index,Waveform.ABOVE,Waveform.BOX)}getErrorX(index,side=Waveform.ABOVE,type=Waveform.BAR){return!!this.hasXWaveform()&&this.xdata.getError(index,side,type)}getError(index,side=Waveform.ABOVE,type=Waveform.BAR){let errors=type==Waveform.BAR?this.errors.bars:this.errors.boxes;if(!errors)return!1;let wave;if(wave=side==Waveform.ABOVE?errors.above:errors.below)return wave.getY(index)}hasErrorBars(){return 0<this.errors.nb||this.hasXWaveform()&&0<this.xdata.errors.nb}}_exports.Waveform=Waveform,Waveform.BELOW=Symbol(),Waveform.ABOVE=Symbol(),Waveform.BOX=Symbol(),Waveform.BAR=Symbol();const MULTIPLY=Symbol(),ADD=Symbol(),SUBTRACT=Symbol(),DIVIDE=Symbol();_exports.WaveformHash=class extends Waveform{hasXWaveform(){return!1}setXWaveform(data){this.xdata=data}getYFromX(xValue){const index=this.xdata.indexOf(xValue);if(-1==index)throw`Cannot find key ${xValue}`;return this.data[index]}getY(index){return this.data[index]}getX(index){return this.xdata[index]}hasXUnit(){return!1}errorNotImplemented(){throw console.trace(),"Not available in hash waveform"}subrangeX(){this.errorNotImplemented()}duplicate(){this.errorNotImplemented()}aggregate(){this.errorNotImplemented()}_waveArithmetic(){this.errorNotImplemented()}interpolateIndex_X(){this.errorNotImplemented()}getXMonotoneousAscending(){this.errorNotImplemented()}isXMonotoneousAscending(){this.errorNotImplemented()}interpolate(){this.errorNotImplemented()}resampleForDisplay(){this.errorNotImplemented()}isXMonotoneous(){this.errorNotImplemented()}rescaleX(){this.errorNotImplemented()}getXMin(){}getXMax(){}computeXMinMax(){}setData(data){this.data=Object.values(data),this.xdata=Object.keys(data),this._setData()}_setData(){this.minY=Math.min(...this.data),this.maxY=Math.max(...this.data),this.checkMinMaxErrorBars()}}})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(4),__webpack_require__(0),__webpack_require__(5),__webpack_require__(20),__webpack_require__(6)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphPosition,util,_EventEmitter,_main,_waveform){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function makeSerie(graph,name,options,type){var constructor=graph.getConstructor(type,!0);if(constructor||"string"!=typeof type||(constructor=graph.getConstructor(`graph.serie.${type}`,!0)),constructor){var serie=new constructor(graph,name,options);graph.appendSerieToDom(serie)}else return util.throwError("No constructor exists for the serie type provided. Use Graph.registerConstructor( name, constructor ) first is you use your own series");return serie}function getAxisLevelFromSpan(span,level){for(var i=0,l=level.length,possible;i<l;i++){possible=!0;for(var k=0,m=level[i].length;k<m;k++)span[0]<level[i][k][0]&&span[1]<level[i][k][0]||span[0]>level[i][k][1]&&span[1]>level[i][k][1]||(possible=!1);if(possible)return level[i].push(span),i}return level.push([span]),level.length-1}function refreshDrawingZone(graph){var shift={top:[],bottom:[],left:[],right:[]},levels={top:[],bottom:[],left:[],right:[]};graph._painted=!0,graph._applyToAxes(function(axis,position){if(!axis.isShown())return void axis.hideGroup();if(axis.showGroup(),!axis.floating){var level=getAxisLevelFromSpan(axis.getSpan(),levels[position]);axis.setLevel(level),shift[position][level]=Math.max(axis.getAxisPosition(),shift[position][level]||0)}},!1,!0,!1);var shiftTop=shift.top.reduce(function(prev,curr){return prev+curr},0),shiftBottom=shift.bottom.reduce(function(prev,curr){return prev+curr},0);graph.drawingSpaceHeight=graph.getDrawingHeight()-shiftTop-shiftBottom,[shift.top,shift.bottom].map(function(arr){arr.reduce(function(prev,current,index){return arr[index]=prev+current,prev+current},0)}),graph._applyToAxes(function(axis,position){!axis.isShown()||axis.floating||axis.setShift(shift[position][axis.getLevel()])},!1,!0,!1),graph._applyToAxes(function(axis,position){if(axis.isShown()?axis.showGroup():axis.hideGroup(),axis.setMinPx(shiftTop),axis.setMaxPx(graph.getDrawingHeight(!0)-shiftBottom),!axis.floating){let drawn=axis.linkedToAxis?0:axis.draw();if(axis.isShown()){var level=getAxisLevelFromSpan(axis.getSpan(),levels[position]);axis.setLevel(level),axis.options.forcedWidth?shift[position][level]=axis.options.forcedWidth:(shift[position][level]=Math.max(drawn,shift[position][level]||0),level<shift[position].length-1&&(shift[position][level]+=10))}}},!1,!1,!0);var shift2=util.extend(!0,{},shift);graph._applyToAxes(function(axis,position){!axis.isShown()||axis.floating||(shift2[position][axis.getLevel()]=Math.max(shift[position][axis.getLevel()],axis.equalizePosition(shift[position][axis.getLevel()])))},!1,!1,!0),shift=shift2;var shiftLeft=shift.left.reduce(function(prev,curr){return prev+curr},0),shiftRight=shift.right.reduce(function(prev,curr){return prev+curr},0);graph.drawingSpaceWidth=graph.getDrawingWidth()-shiftLeft-shiftRight,[shift.left,shift.right].forEach(function(arr){arr.reduce(function(prev,current,index){return arr[index]=prev+current,prev+current},0)}),graph._applyToAxes((axis,position)=>{!axis.isShown()||axis.floating||axis.setShift(shift[position][axis.getLevel()])},!1,!1,!0),graph._applyToAxes(function(axis){!axis.isShown(),axis.setMinPx(shiftLeft),axis.setMaxPx(graph.getDrawingWidth(!0)-shiftRight);axis.floating||!axis.linkedToAxis&&axis.draw()},!1,!0,!1),graph._applyToAxes(function(axis){if(axis.floating){var floatingAxis=axis.getFloatingAxis(),floatingValue=axis.getFloatingValue(),floatingPx=floatingAxis.getPx(floatingValue);axis.setShift(floatingPx),axis.linkedToAxis||axis.draw()}},!1,!0,!0),_closeLine(graph,"right",graph.getDrawingWidth(!0),graph.getDrawingWidth(!0),shiftTop,graph.getDrawingHeight(!0)-shiftBottom),_closeLine(graph,"left",0,0,shiftTop,graph.getDrawingHeight(!0)-shiftBottom),_closeLine(graph,"top",shiftLeft,graph.getDrawingWidth(!0)-shiftRight,0,0),_closeLine(graph,"bottom",shiftLeft,graph.getDrawingWidth(!0)-shiftRight,graph.getDrawingHeight(!0)-shiftBottom,graph.getDrawingHeight(!0)-shiftBottom),graph.clipRect.setAttribute("y",shiftTop),graph.clipRect.setAttribute("x",shiftLeft),graph.clipRect.setAttribute("width",graph.getDrawingWidth()-shiftLeft-shiftRight),graph.clipRect.setAttribute("height",graph.getDrawingHeight()-shiftTop-shiftBottom),graph.rectEvent.setAttribute("y",shiftTop+graph.getPaddingTop()),graph.rectEvent.setAttribute("x",shiftLeft+graph.getPaddingLeft()),graph.rectEvent.setAttribute("width",graph.drawingSpaceWidth),graph.rectEvent.setAttribute("height",graph.drawingSpaceHeight),graph.drawingSpaceMinX=shiftLeft+graph.getPaddingLeft(),graph.drawingSpaceMinY=shiftTop+graph.getPaddingTop(),graph.drawingSpaceMaxX=graph.getDrawingWidth()-shiftRight+graph.getPaddingLeft(),graph.drawingSpaceMaxY=graph.getDrawingHeight()-shiftBottom+graph.getPaddingTop(),graph._applyToAxes(function(axis){axis.isShown()&&axis.drawLines()},!1,!0,!0),graph.shift=shift,graph.redrawShapes()}function _handleKey(graph,event,type){return graph.forcedPlugin?(graph.activePlugin=graph.forcedPlugin,void graph._pluginExecute(graph.activePlugin,type,[graph,event])):void checkKeyActions(graph,event,[graph,event],type)}function checkKeyActions(graph,e,parameters,methodName){var keyComb=graph.options.keyActions,i,l;for(i=0,l=keyComb.length;i<l;i++){if(keyComb[i].plugin){if(graph.forcedPlugin==keyComb[i].plugin||graph.isActionAllowed(e,keyComb[i]))return keyComb[i].options&&parameters.push(keyComb[i].options),graph.activePlugin=keyComb[i].plugin,graph._pluginExecute(keyComb[i].plugin,methodName,parameters),e.preventDefault(),e.stopPropagation(),!0;}else if(keyComb[i].callback&&graph.isActionAllowed(e,keyComb[i]))return keyComb[i].options&&parameters.push(keyComb[i].options),e.preventDefault(),e.stopPropagation(),keyComb[i].callback.apply(graph,parameters),!0;keyComb[i].removeSelectedShape&&graph.isActionAllowed(e,keyComb[i])&&(e.preventDefault(),e.stopPropagation(),graph.selectedShapes.map(shape=>{shape.kill(keyComb[i].keepInDom)}))}return!1}function doDom(){this.dom=document.createElementNS(Graph.ns,"svg"),this.dom.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),util.setAttributeTo(this.dom,{xmlns:Graph.ns,"font-family":this.options.fontFamily,"font-size":this.options.fontSize});try{util.setAttributeTo(this.dom,{"data-jsgraph-version":"v2.2.36"})}catch(e){}this.defs=document.createElementNS(Graph.ns,"defs"),this.dom.appendChild(this.defs),this.groupEvent=document.createElementNS(Graph.ns,"g"),this.rectEvent=document.createElementNS(Graph.ns,"rect"),util.setAttributeTo(this.rectEvent,{"pointer-events":"fill",fill:"transparent"}),this.groupEvent.appendChild(this.rectEvent),this.dom.appendChild(this.groupEvent),this.domTitle=document.createElementNS(Graph.ns,"text"),this.setTitle(this.options.title),this.options.titleFontSize&&this.setTitleFontSize(this.options.titleFontSize),this.options.titleFontColor&&this.setTitleFontSize(this.options.titleFontColor),this.options.titleFontFamily&&this.setTitleFontFamily(this.options.titleFontFamily),util.setAttributeTo(this.domTitle,{"text-anchor":"middle",y:20}),this.groupEvent.appendChild(this.domTitle),this.graphingZone=document.createElementNS(Graph.ns,"g"),this.updateGraphingZone(),this.groupEvent.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(Graph.ns,"g"),this.graphingZone.appendChild(this.axisGroup),this.groupGrids=document.createElementNS(Graph.ns,"g"),this.groupPrimaryGrids=document.createElementNS(Graph.ns,"g"),this.groupSecondaryGrids=document.createElementNS(Graph.ns,"g"),this.axisGroup.appendChild(this.groupGrids),this.groupGrids.appendChild(this.groupSecondaryGrids),this.groupGrids.appendChild(this.groupPrimaryGrids),this.plotGroup=document.createElementNS(Graph.ns,"g"),this.graphingZone.appendChild(this.plotGroup),this.layers=[],this._makeClosingLines(),this.clip=document.createElementNS(Graph.ns,"clipPath"),this.clip.setAttribute("id",`_clipplot${this._creation}`),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(Graph.ns,"rect"),this.clip.appendChild(this.clipRect),this.clip.setAttribute("clipPathUnits","userSpaceOnUse"),this.markerArrow=document.createElementNS(this.ns,"marker"),this.markerArrow.setAttribute("viewBox","0 0 10 10"),this.markerArrow.setAttribute("id",`arrow${this._creation}`),this.markerArrow.setAttribute("refX","6"),this.markerArrow.setAttribute("refY","5"),this.markerArrow.setAttribute("markerUnits","strokeWidth"),this.markerArrow.setAttribute("markerWidth","8"),this.markerArrow.setAttribute("markerHeight","6"),this.markerArrow.setAttribute("orient","auto");var pathArrow=document.createElementNS(Graph.ns,"path");pathArrow.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),this.markerArrow.appendChild(pathArrow),this.defs.appendChild(this.markerArrow),this.markerHorizontalSplit=document.createElementNS(Graph.ns,"marker"),this.markerHorizontalSplit.setAttribute("viewBox","0 0 6 8"),this.markerHorizontalSplit.setAttribute("id",`horionzalsplit_${this.getId()}`),this.markerHorizontalSplit.setAttribute("refX","3"),this.markerHorizontalSplit.setAttribute("refY","4"),this.markerHorizontalSplit.setAttribute("markerUnits","strokeWidth"),this.markerHorizontalSplit.setAttribute("markerWidth","6"),this.markerHorizontalSplit.setAttribute("markerHeight","8");var path=document.createElementNS(Graph.ns,"line");path.setAttribute("x1","0"),path.setAttribute("y1","8"),path.setAttribute("x2","6"),path.setAttribute("y2","0"),path.setAttribute("stroke","black"),this.markerHorizontalSplit.appendChild(path),this.defs.appendChild(this.markerHorizontalSplit),this.markerVerticalSplit=document.createElementNS(Graph.ns,"marker"),this.markerVerticalSplit.setAttribute("viewBox","0 0 8 6"),this.markerVerticalSplit.setAttribute("id",`verticalsplit_${this.getId()}`),this.markerVerticalSplit.setAttribute("refX","4"),this.markerVerticalSplit.setAttribute("refY","3"),this.markerVerticalSplit.setAttribute("markerUnits","strokeWidth"),this.markerVerticalSplit.setAttribute("markerWidth","8"),this.markerVerticalSplit.setAttribute("markerHeight","6");var path=document.createElementNS(Graph.ns,"line");path.setAttribute("x1","0"),path.setAttribute("y1","0"),path.setAttribute("x2","8"),path.setAttribute("y2","6"),path.setAttribute("stroke","black"),this.markerVerticalSplit.appendChild(path),this.defs.appendChild(this.markerVerticalSplit),this.vertLineArrow=document.createElementNS(Graph.ns,"marker"),this.vertLineArrow.setAttribute("viewBox","0 0 10 10"),this.vertLineArrow.setAttribute("id",`verticalline${this._creation}`),this.vertLineArrow.setAttribute("refX","0"),this.vertLineArrow.setAttribute("refY","5"),this.vertLineArrow.setAttribute("markerUnits","strokeWidth"),this.vertLineArrow.setAttribute("markerWidth","20"),this.vertLineArrow.setAttribute("markerHeight","10"),this.vertLineArrow.setAttribute("orient","auto"),this.vertLineArrow.setAttribute("stroke-width","1px");var pathVertLine=document.createElementNS(Graph.ns,"path");pathVertLine.setAttribute("d","M 0 -10 L 0 10"),pathVertLine.setAttribute("stroke","black"),this.vertLineArrow.appendChild(pathVertLine),this.defs.appendChild(this.vertLineArrow),this.bypassHandleMouse=!1}function _registerEvents(graph){if(!graph.wrapper)throw"No wrapper exists. Cannot register the events.";graph.dom.setAttribute("tabindex",0),graph.dom.addEventListener("keydown",e=>{_handleKey(graph,e,"keydown")}),graph.dom.addEventListener("keypress",e=>{_handleKey(graph,e,"keypress")}),graph.dom.addEventListener("keyup",e=>{_handleKey(graph,e,"keyup")}),graph.dom.addEventListener("mousemove",e=>{var coords=graph._getXY(e);_handleMouseMove(graph,coords.x,coords.y,e)}),graph.dom.addEventListener("mouseleave",()=>{_handleMouseLeave(graph)}),graph.groupEvent.addEventListener("mousedown",e=>{if(graph.focus(),!(3==e.which||e.ctrlKey)){var coords=graph._getXY(e);_handleMouseDown(graph,coords.x,coords.y,e)}}),graph.dom.addEventListener("mouseup",e=>{graph.emit("mouseUp",e);var coords=graph._getXY(e);_handleMouseUp(graph,coords.x,coords.y,e)}),graph.wrapper.addEventListener("mouseup",e=>{e.stopPropagation()}),graph.dom.addEventListener("dblclick",e=>{graph.emit("dblClick",e);var coords=graph._getXY(e);_handleDblClick(graph,coords.x,coords.y,e)}),graph.groupEvent.addEventListener("click",e=>{if(!(3==e.which||e.ctrlKey)){var coords=graph._getXY(e);graph.prevent(!1)||_handleClick(graph,coords.x,coords.y,e)}}),graph.groupEvent.addEventListener("mousewheel",e=>{var deltaY=e.wheelDeltaY||e.wheelDelta||-e.deltaY,coords=graph._getXY(e);return _handleMouseWheel(graph,deltaY,coords.x,coords.y,e),!1}),graph.groupEvent.addEventListener("wheel",e=>{var coords=graph._getXY(e),deltaY=e.wheelDeltaY||e.wheelDelta||-e.deltaY;return _handleMouseWheel(graph,deltaY,coords.x,coords.y,e),!1})}function _handleMouseDown(graph,x,y,e){return graph.forcedPlugin?(graph.activePlugin=graph.forcedPlugin,void graph._pluginExecute(graph.activePlugin,"onMouseDown",[graph,x,y,e])):void(graph.activePlugin&&(graph.activePlugin=!1),checkMouseActions(graph,e,[graph,x,y,e],"onMouseDown"))}function _handleMouseMove(graph,x,y,e){if(graph.bypassHandleMouse)return void graph.bypassHandleMouse.handleMouseMove(e);if(graph.activePlugin&&graph._pluginExecute(graph.activePlugin,"onMouseMove",[graph,x,y,e]))return;let xOverwritePx=x,xRef;if(graph._applyToAxes("handleMouseMove",[x-graph.options.paddingLeft,e],!0,!1),graph._applyToAxes("handleMouseMove",[y-graph.options.paddingTop,e],!1,!0),!graph.activePlugin){var index;if(graph.options.trackingLine&&graph.options.trackingLine.enable)if("common"==graph.options.trackingLine.mode&&graph.options.trackingLine.snapToSerie){var snapToSerie=graph.options.trackingLine.snapToSerie;index=snapToSerie.handleMouseMove(!1,!0),graph.trackingLineShape&&(index?(graph.trackingLineShape.show(),graph.trackingLineShape.getPosition(0).x=index.xClosest,graph.trackingLineShape.getPosition(1).x=index.xClosest,graph.trackingLineShape.redraw(),xRef=index.xClosest,xOverwritePx=snapToSerie.getXAxis().getPx(index.xClosest)+graph.options.paddingLeft):graph.trackingLineShape.hide());var series=graph.options.trackingLine.series;if(!series)return;if(!index)return;graph._trackingLegend=_trackingLegendSerie(graph,series,xOverwritePx,y,graph._trackingLegend,graph.options.trackingLine.textMethod?graph.options.trackingLine.textMethod:trackingLineDefaultTextMethod,xRef)}else if("individual"==graph.options.trackingLine.mode){const output=[];graph.options.trackingLine.series.forEach(serie=>{if(serie.options.tracking){const closestPoint=serie.getClosestPointToXY(serie.getXAxis().getMouseVal(),serie.getYAxis().getMouseVal(),serie.options.tracking.withinPx,serie.options.tracking.withinPx,serie.options.tracking.useAxis,!0);"common"==graph.options.trackingLine.legendType&&(serie._trackingLegend=_trackingLegendSerie(graph,[],!1,!1,serie._trackingLegend)),closestPoint?serie.trackingShape&&(serie.trackingShape.show(),serie.trackingShape.setPosition({x:closestPoint.xClosest,y:closestPoint.yClosest}),serie.trackingShape.redraw(),"independent"==graph.options.trackingLine.legendType&&(serie._trackingLegend=_trackingLegendSerie(graph,[{serie:serie,closestPoint:closestPoint}],x,y,serie._trackingLegend)),serie.emit("track",e,closestPoint)):serie.trackingShape&&(serie.trackingShape.hide(),"independent"==graph.options.trackingLine.legendType&&(serie._trackingLegend=_trackingLegendSerie(graph,[],!1,!1,serie._trackingLegend))),closestPoint&&output.push({serie:serie,closestPoint:closestPoint})}}),graph._trackingLegend="common"==graph.options.trackingLine.legendType?_trackingLegendSerie(graph,output,x,y,graph._trackingLegend):_trackingLegendSerie(graph,[],!1,!1,graph._trackingLegend)}}if(graph.options.mouseMoveData){const results={};for(let i=0,serie;i<graph.series.length;i++){if(serie=graph.series[i],!serie.options.tracking){console.warn("Tracking not enabled for this serie");continue}results[graph.series[i].getName()]=graph.series[i].getClosestPointToXY(void 0,void 0,serie.options.tracking.withinPxX||0,serie.options.tracking.withinPxY||0,serie.options.tracking.useAxis,!0)}"function"==typeof graph.options.mouseMoveData&&graph.options.mouseMoveData.call(graph,e,results),graph.emit("mouseMoveData",e,results)}checkMouseActions(graph,e,[graph,x,y,e],"onMouseMove")}function checkMouseActions(graph,e,parameters,methodName){var keyComb=graph.options.mouseActions,executed=!1,i,l;for(i=0,l=keyComb.length;i<l;i++)if(keyComb[i].plugin){if(graph.forcedPlugin==keyComb[i].plugin||graph.isActionAllowed(e,keyComb[i])){keyComb[i].options&&parameters.push(keyComb[i].options),"wheel"!==e.type&&"mousewheel"!==e.type&&(graph.activePlugin=keyComb[i].plugin),graph._pluginExecute(keyComb[i].plugin,methodName,parameters),executed=!0;continue}}else if(keyComb[i].callback&&graph.isActionAllowed(e,keyComb[i])){keyComb[i].options&&parameters.push(keyComb[i].options),keyComb[i].callback.apply(graph,parameters),executed=!0;continue}else if(keyComb[i].series){var series;"all"===keyComb[i].series&&(series=graph.series),Array.isArray(keyComb[i].series)||(series=[series]),keyComb[i].options&&parameters.push(keyComb[i].options);for(;0<series.length;i++)graph._serieExecute(series[i],methodName,parameters);executed=!0;continue}return executed}function _makeTrackingLegend(graph){var group=document.createElement("div");return group.setAttribute("class","trackingLegend"),group.style.position="absolute",group.style.borderRadius="4px",group.style.boxShadow="1px 1px 3px 0px rgba(100,100,100,0.6)",group.style.border="2px solid #333333",group.style.backgroundColor="rgba(255, 255, 255, 0.5 )",group.style.pointerEvents="none",group.style.paddingTop="5px",group.style.paddingBottom="5px",group.style.paddingLeft="10px",group.style.paddingRight="10px",graph.getWrapper().insertBefore(group,graph.getDom()),group}function _handleDblClick(graph,x,y,e){checkMouseActions(graph,e,[x,y,e],"onDblClick")}function _handleMouseUp(graph,x,y,e){return graph.bypassHandleMouse?(graph.bypassHandleMouse.handleMouseUp(e),void(graph.activePlugin=!1)):void(graph._pluginExecute(graph.activePlugin,"onMouseUp",[graph,x,y,e]),graph.activePlugin=!1)}function _handleClick(graph,x,y,e){graph.emit("click",[graph,x,y,e]),checkMouseActions(graph,e,[x,y,e],"onClick"),e.target.jsGraphIsShape||graph.prevent(!1)||!graph.options.shapesUnselectOnClick||graph.unselectShapes()}function _getAxis(graph,num,options,pos){var options=options||{},_availableAxes={def:{x:graph.getConstructor("graph.axis.x"),y:graph.getConstructor("graph.axis.y")},time:{x:graph.getConstructor("graph.axis.x.time")},bar:{x:graph.getConstructor("graph.axis.x.bar")}},inst;switch(options.type){case"time":var axisInstance=_availableAxes.time;break;case"bar":var axisInstance=_availableAxes.bar;break;case"broken":var axisInstance=_availableAxes.broken;break;default:var axisInstance=_availableAxes.def;}switch(pos){case"top":case"bottom":inst=axisInstance.x;break;case"left":case"right":inst=axisInstance.y;break;default:return;}return num=num||0,"object"==typeof num&&(options=num,num=0),graph.axis[pos][num]||(graph.axis[pos][num]=new inst(graph,pos,options),graph.axis[pos][num].init(graph,options)),graph.axis[pos][num]}function _closeLine(graph,mode,x1,x2,y1,y2){if(!1!==graph.options.close){var l=0;graph.axis[mode].map(function(g){g.isDisplayed()&&!g.floating&&l++}),(!0===graph.options.close||graph.options.close[mode])&&0==l?(graph.closingLines[mode].setAttribute("display","block"),graph.closingLines[mode].setAttribute("x1",x1),graph.closingLines[mode].setAttribute("x2",x2),graph.closingLines[mode].setAttribute("y1",y1),graph.closingLines[mode].setAttribute("y2",y2)):graph.closingLines[mode].setAttribute("display","none")}}function _handleMouseWheel(graph,delta,coordX,coordY,e){checkMouseActions(graph,e,[delta,e,coordX,coordY],"onMouseWheel")&&(e.preventDefault(),e.stopPropagation())}function _handleMouseLeave(graph){graph.options.handleMouseLeave&&graph.options.handleMouseLeave.call(graph)}function haveAxesChanged(graph){var temp=graph._axesHaveChanged;return graph._axesHaveChanged=!1,temp}function hasSizeChanged(graph){var temp=graph._sizeChanged;return graph._sizeChanged=!1,temp}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphPosition=_interopRequireDefault(_graphPosition),util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_EventEmitter=_interopRequireDefault(_EventEmitter),_main=_interopRequireDefault(_main);const GraphOptionsDefault={title:"",paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},closeColor:"black",fontSize:12,fontFamily:"Myriad Pro, Helvetica, Arial",plugins:{},pluginAction:{},mouseActions:[],keyActions:[],wheel:{},dblclick:{},shapesUnselectOnClick:!0,shapesUniqueSelection:!0};var _constructors=new Map;class Graph extends _EventEmitter.default{constructor(wrapper,options,axis=void 0){for(var i in super(),wrapper!==Object(wrapper)||wrapper instanceof HTMLElement||(options=wrapper,wrapper=void 0),options.axes||(options.axes=axis),this._creation=util.guid(),this._drawn=!1,this.options=util.extend({},GraphOptionsDefault,options),doDom.bind(this)(),wrapper&&this.setWrapper(wrapper),this.prevented=!1,this.axis={left:[],top:[],bottom:[],right:[]},this.shapes=[],this.shapesLocked=!1,this.plugins={},this.options.pluginAction)this.options.pluginAction.plugin=i,this.options.mouseActions.push(this.options.pluginAction);if(this.selectedShapes=[],this.series=[],this._axesHaveChanged=!0,this.options.hasOwnProperty("padding")&&util.isNumeric(this.options.padding)&&(this.options.paddingTop=this.options.paddingBottom=this.options.paddingLeft=this.options.paddingRight=this.options.padding),this.currentAction=!1,this.ns=Graph.ns,this.nsxlink=Graph.nsxlink,options.axes)for(var i in options.axes)for(var j=0,l=options.axes[i].length;j<l;j++)switch(i){case"top":this.getTopAxis(j,options.axes[i][j]);break;case"left":this.getLeftAxis(j,options.axes[i][j]);break;case"right":this.getRightAxis(j,options.axes[i][j]);break;case"bottom":this.getBottomAxis(j,options.axes[i][j]);break;default:}this._pluginsInit()}setWrapper(wrapper){if("string"==typeof wrapper?wrapper=document.getElementById(wrapper):"number"==typeof wrapper.length&&(wrapper=wrapper[0]),!wrapper)throw new Error("The wrapper DOM element was not found.");if(!wrapper.appendChild)throw new Error("The wrapper appears to be an invalid HTMLElement");if(wrapper.style["-webkit-user-select"]="none",wrapper.style["-moz-user-select"]="none",wrapper.style["-o-user-select"]="none",wrapper.style["-ms-user-select"]="none",wrapper.style["user-select"]="none",wrapper.style.position="relative",wrapper.style.outline="none",this.wrapper=wrapper,!this.height||!this.width){var wrapperStyle=getComputedStyle(wrapper),w=parseInt(wrapperStyle.width,10),h=parseInt(wrapperStyle.height,10);this.setSize(w,h),this._resize()}wrapper.appendChild(this.dom),_registerEvents(this)}getDom(){return this.dom}getId(){return this._creation}getWrapper(){return this.wrapper}setOption(name,val){return this.options[name]=val,this}setTitle(title){this.options.title=title,this.domTitle.textContent=title}setTitleFontSize(fontSize){this.domTitle.setAttribute("font-size",fontSize)}setTitleFontColor(fontColor){this.domTitle.setAttribute("fill",fontColor)}setTitleFontFamily(fontColor){this.domTitle.setAttribute("font-family",fontColor)}displayTitle(){this.domTitle.setAttribute("display","inline")}hideTitle(){this.domTitle.setAttribute("display","none")}hide(){"none"!==this.dom.style.display&&(this.dom.style.display="none")}show(){"none"==this.dom.style.display&&(this.dom.style.display="initial")}redraw(onlyIfAxesHaveChanged,force){if(this.width&&this.height)return this.sizeSet?!onlyIfAxesHaveChanged||force||haveAxesChanged(this)||hasSizeChanged(this)?(this.executeRedrawSlaves(),refreshDrawingZone(this),!0):(this.executeRedrawSlaves(!0),!1):(this._resize(),this.executeRedrawSlaves(),!0)}executeRedrawSlaves(){this._pluginsExecute("preDraw")}draw(force){this.drawn=!0,this.updateLegend(!0),this.drawSeries(this.redraw(!0,force)),this._pluginsExecute("postDraw")}delayUpdate(){return this._lockUpdate=!0,this}doUpdate(){return this.legend&&this.legend.update(),this.draw(),this.legend&&this.legend.update(),this}resumeUpdate(){return this._lockUpdate=!1,this}isDelayedUpdate(){return this._lockUpdate}setWidth(width,skipResize){this.width=width,skipResize||this._resize()}setHeight(height,skipResize){this.height=height,skipResize||this._resize()}resize(w,h){return w&&h&&this.setSize(w,h),this._resize(),this}setSize(w,h){this.setWidth(w,!0),this.setHeight(h,!0),this.getDrawingHeight(),this.getDrawingWidth()}getWidth(){return this.width}getHeight(){return this.height}getPaddingTop(){return this.options.paddingTop}getPaddingLeft(){return this.options.paddingLeft}getPaddingBottom(){return this.options.paddingBottom}getPaddingRight(){return this.options.paddingRight}getDrawingHeight(useCache){return useCache&&this.innerHeight?this.innerHeight:this.innerHeight=this.height-this.options.paddingTop-this.options.paddingBottom}getDrawingWidth(useCache){return useCache&&this.innerWidth?this.innerWidth:this.innerWidth=this.width-this.options.paddingLeft-this.options.paddingRight}cacheOffset(){this.offsetCached=util.getOffset(this.wrapper)}uncacheOffset(){this.offsetCached=!1}getNumAxes(position){return this.axis[position].length}getXAxis(index,options){return 0<this.axis.top.length&&0==this.axis.bottom.length?this.getTopAxis(index,options):this.getBottomAxis(index,options)}getYAxis(index,options){return 0<this.axis.right.length&&0==this.axis.left.length?this.getRightAxis(index,options):this.getLeftAxis(index,options)}getTopAxis(index,options){return _getAxis(this,index,options,"top")}getBottomAxis(index,options){return _getAxis(this,index,options,"bottom")}getLeftAxis(index,options){return _getAxis(this,index,options,"left")}getRightAxis(index,options){return _getAxis(this,index,options,"right")}setXAxis(axis,index){this.setBottomAxis(axis,index)}setYAxis(axis,index){this.setLeftAxis(axis,index)}setLeftAxis(axis,index){index=index||0,this.axis.left[index]&&this.axis.left[index].kill(),this.axis.left[index]=axis}setRightAxis(axis,index){index=index||0,this.axis.right[index]&&this.axis.right[index].kill(),this.axis.right[index]=axis}setTopAxis(axis,index){index=index||0,this.axis.top[index]&&this.axis.top[index].kill(),this.axis.top[index]=axis}setBottomAxis(axis,index){index=index||0,this.axis.bottom[index]&&this.axis.bottom[index].kill(),this.axis.bottom[index]=axis}killAxis(axis,noRedraw=!1,noSerieKill=!1){var index;axis.isX()&&(-1<(index=this.axis.bottom.indexOf(axis))&&this.axis.bottom.splice(index,1),-1<(index=this.axis.top.indexOf(axis))&&this.axis.top.splice(index,1),!noSerieKill&&this.series.forEach(serie=>{serie.getXAxis()==axis&&serie.kill()})),axis.isY()&&(-1<(index=this.axis.left.indexOf(axis))&&this.axis.left.splice(index,1),-1<(index=this.axis.right.indexOf(axis))&&this.axis.right.splice(index,1),!noSerieKill&&this.series.forEach(serie=>{serie.getYAxis()==axis&&serie.kill()})),this.axisGroup.removeChild(axis.group),this.groupPrimaryGrids.removeChild(axis.gridPrimary),this.groupSecondaryGrids.removeChild(axis.gridSecondary),noRedraw||this.draw(!0)}hasXAxis(axis){return this.hasTopAxis(axis)||this.hasBottomAxis(axis)}hasYAxis(axis){return this.hasLeftAxis(axis)||this.hasRightAxis(axis)}hasTopAxis(axis){return this.hasAxis(axis,this.axis.top)}hasBottomAxis(axis){return this.hasAxis(axis,this.axis.bottom)}hasLeftAxis(axis){return this.hasAxis(axis,this.axis.left)}hasRightAxis(axis){return this.hasAxis(axis,this.axis.right)}hasAxis(axis,axisList){for(var i=0,l=axisList.length;i<l;i++){if(axisList[i]==axis)return!0;if(axisList[i].hasAxis(axis))return!0}return!1}autoscaleAxes(){return this._applyToAxes("setMinMaxToFitSeries",null,!0,!0),this}autoscale(){return this.autoscaleAxes(...arguments)}autoScale(){return this.autoscaleAxes(...arguments)}autoScaleAxes(){return this.autoscaleAxes(...arguments)}autoScaleAxis(axis){return axis?(axis.setMinMaxToFitSeries(),this):this}gridsOff(){this._applyToAxes(axis=>{axis.gridsOff()},void 0,!0,!0)}gridsOn(){this._applyToAxes(axis=>{axis.gridsOn()},void 0,!0,!0)}setBackgroundColor(color){return this.rectEvent.setAttribute("fill",color),this}getAxisState(){var state={};for(var i in this.axis)state[i]=this.axis[i].map(function(axis){return[axis.getCurrentMin(),axis.getCurrentMax()]});return state}setAxisState(state){var j,l;for(var i in state)if(this.axis[i])for(j=0,l=state[i].length;j<l;j++)this.axis[i][j]&&(this.axis[i][j].setCurrentMin(state[i][j][0]),this.axis[i][j].setCurrentMax(state[i][j][1]));this.draw()}saveAxisState(savedName){return this.savedAxisState=this.savedAxisState||{},this.savedAxisState[savedName]=this.getAxisState(),this}recallAxisState(savedName){return this.savedAxisState[savedName]&&this.recallAxisState(this.savedAxisState[savedName]),this}_applyToAxis(type){switch(type){case"string":return function(type,func,params){for(var i=0;i<this.axis[type].length;i++)this.axis[type][i][func].apply(this.axis[type][i],params)};case"function":return function(type,func,params){for(var i=0;i<this.axis[type].length;i++)func.call(this,this.axis[type][i],type,params)};default:throw new Error("You must either execute a function or provide a string that registers a function");}}getBoundaryAxis(axis,minmax,usingZValues){var valSeries=this.getBoundaryAxisFromSeries(axis,minmax,usingZValues);return valSeries}getBoundaryAxisFromSeries(axis,minmax,usingZValues){var min="min"==minmax,func=axis.isX()?["getMinX","getMaxX"]:["getMinY","getMaxY"],func2use=func[min?0:1],infinity2use=min?+Infinity:-Infinity,val,serie,series,serieValue,i,l;for(val=infinity2use,series=this.getSeriesFromAxis(axis),(i=0,l=series.length);i<l;i++)(serie=series[i],!!serie.isShown())&&(serieValue=serie[func2use](usingZValues),val=Math[minmax](isNaN(val)?infinity2use:val,isNaN(serieValue)?infinity2use:serieValue));return val}getSeriesFromAxis(axis){for(var series=[],i=this.series.length-1;0<=i;i--)(this.series[i].getXAxis()==axis||this.series[i].getYAxis()==axis)&&series.push(this.series[i]);return series}updateDataMinMaxAxes(usingZValues){var axisvars=["bottom","top","left","right"],axis,j,l,i;for(j=0,l=axisvars.length;j<l;j++)for(i=this.axis[axisvars[j]].length-1;0<=i;i--){axis=this.axis[axisvars[j]][i],!axis.isShown();let min=this.getBoundaryAxis(this.axis[axisvars[j]][i],"min",usingZValues),max=this.getBoundaryAxis(this.axis[axisvars[j]][i],"max",usingZValues);isFinite(max)&&axis.setMaxValueData(max),isFinite(min)&&axis.setMinValueData(min)}}_applyToAxes(func,params,tb=!1,lr=!1){var ax=[],i=0,l;for((tb||null==tb)&&(ax.push("top"),ax.push("bottom")),(lr||null==lr)&&(ax.push("left"),ax.push("right")),l=ax.length;i<l;i++)this._applyToAxis(typeof func).call(this,ax[i],func,params)}findAxesLinkedTo(axis){var axes=[];return this._applyToAxes(function(a){a.linkedToAxis&&a.linkedToAxis.axis==axis&&axes.push(a)},{},axis instanceof this.getConstructor("graph.axis.x"),axis instanceof this.getConstructor("graph.axis.y")),axes}_axisHasChanged(){this._axesHaveChanged=!0}newSerie(name,options,type){let serie;return("object"==typeof options||type||(type=options,options={}),type||(type=Graph.SERIE_LINE),serie=this.getSerie(name))?serie:(serie=makeSerie(this,name,options,type))?(this.series.push(serie),serie.postInit(),this.emit("newSerie",serie),serie):void 0}getSerie(name){if("number"==typeof name)return this.series[name]||!1;"function"==typeof name&&(name=name());for(var i=0,l=this.series.length;i<l;i++)if(this.series[i].getName()==name||this.series[i]==name)return this.series[i];return!1}getSeries(){return this.series}allSeries(...types){return this.series.filter(serie=>types.include(serie.getType()))}sortSeries(method){return"function"==typeof method?(this.series.sort(method),this):this}drawSerie(serie,force){if(!serie.draw)throw new Error("Serie has no method draw");serie.draw(force)}drawSeries(force){if(this.width&&this.height)for(var i=this.series.length-1;0<=i;i--)this.series[i].isShown()&&this.drawSerie(this.series[i],force)}resetSeries(){this.removeSeries()}killSeries(){this.resetSeries()}killLegend(){this.legend&&this.legend.kill(),this.legend=void 0}killShapes(){this.shapes.forEach(shape=>{shape.kill(!1)})}removeSeries(){for(;this.series[0];)this.series[0].kill(!0);this.series=[],this.legend&&this.legend.update()}selectSerie(serie,selectName){"object"==typeof serie||(serie=this.getSerie(serie));this.selectedSerie==serie&&this.selectedSerie.selectionType==selectName||(this.selectedSerie!==serie&&this.selectedSerie&&this.unselectSerie(this.selectedSerie),this.selectedSerie=serie,this.triggerEvent("onSelectSerie",serie),serie.select(selectName||"selected"))}getSelectedSerie(){return this.selectedSerie}unselectSerie(serie){serie.unselect&&(serie.unselect(),this.selectedSerie=!1,this.triggerEvent("onUnselectSerie",serie))}getShapesOfSerie(serie){for(var shapes=[],i=this.shapes.length-1;0<=i;i--)this.shapes[i].getSerie()==serie&&shapes.push(this.shapes[i]);return shapes}makeToolbar(toolbarData){var constructor=this.getConstructor("graph.toolbar");return constructor?this.toolbar=new constructor(this,toolbarData):util.throwError("No constructor exists for toolbar")}getShapes(){return this.shapes||[]}newShape(shapeType,shapeData,mute=!1,shapeProperties){if(this.prevent(!1),!mute&&(this.emit("beforeNewShape",shapeData),this.prevent(!1)))return!1;"object"==typeof shapeType&&(mute=shapeData,shapeData=shapeType,shapeType=shapeData.type),shapeData=shapeData||{},shapeData._id=util.guid();var constructor;if(constructor="function"==typeof shapeType?shapeType:this.getConstructor(`graph.shape.${shapeType}`),!constructor)return util.throwError("No constructor for this shape");var shape=new constructor(this,shapeData);if(!shape)return util.throwError("Failed to construct shape.");if(shape.type=shapeType,shape.graph=this,shape._data=shapeData,void 0!==shapeData.properties&&shape.setProperties(shapeData.properties),shape.init(this,shapeProperties,!!shapeProperties&&shapeProperties.simplified),void 0!==shapeData.props)for(var i in shapeData.props)shape.setProp(i,shapeData.props[i]);if(shapeData.position)for(var i=0,l=shapeData.position.length;i<l;i++)shape.setPosition(new _graphPosition.default(shapeData.position[i]),i);if(void 0!==shapeData.fillColor&&shape.setFillColor(shapeData.fillColor),void 0!==shapeData.fillOpacity&&shape.setFillOpacity(shapeData.fillOpacity),void 0!==shapeData.strokeColor&&shape.setStrokeColor(shapeData.strokeColor),void 0!==shapeData.strokeWidth&&shape.setStrokeWidth(shapeData.strokeWidth),void 0!==shapeData.layer&&shape.setLayer(shapeData.layer),!0==shapeData.locked&&shape.lock(),!0==shapeData.movable&&shape.movable(),!0==shapeData.selectable&&shape.selectable(),!0==shapeData.resizable&&shape.resizable(),void 0!==shapeData.attributes&&shape.setProp("attributes",shapeData.attributes),void 0!==shapeData.handles&&shape.setProp("handles",shapeData.handles),void 0!==shapeData.selectOnMouseDown&&shape.setProp("selectOnMouseDown",!0),void 0!==shapeData.selectOnClick&&shape.setProp("selectOnClick",!0),void 0!==shapeData.transforms&&Array.isArray(shapeData.transforms)&&shapeData.transforms.forEach(({type,value})=>{shape.addTransform(type,value)}),void 0!==shapeData.highlightOnMouseOver&&shape.setProp("highlightOnMouseOver",!0),shapeData.labelEditable&&shape.setProp("labelEditable",shapeData.labelEditable),shapeData.labels&&!shapeData.label&&(shapeData.label=shapeData.labels),void 0!==shapeData.label){Array.isArray(shapeData.label)||(shapeData.label=[shapeData.label]);for(var i=0,l=shapeData.label.length;i<l;i++)shape.showLabel(i),shape.setLabelText(shapeData.label[i].text,i),shape.setLabelPosition(shapeData.label[i].position,i),shape.setLabelColor(shapeData.label[i].color||"black",i),shape.setLabelSize(shapeData.label[i].size,i),shape.setLabelAngle(shapeData.label[i].angle||0,i),shape.setLabelBaseline(shapeData.label[i].baseline||"no-change",i),shape.setLabelAnchor(shapeData.label[i].anchor||"start",i),shape.setLabelBackgroundColor(shapeData.label[i].backgroundColor||"transparent",i),shape.setLabelBackgroundOpacity(shapeData.label[i].backgroundOpacity||1,i)}return shapeData.serie&&shape.setSerie(this.getSerie(shapeData.serie)),shape.createHandles(),shape.applyStyle(),this.shapes.push(shape),mute||this.emit("newShape",shape,shapeData),shape}newPosition(){return new _graphPosition.default(...arguments)}redrawShapes(){for(var i=0,l=this.shapes.length;i<l;i++)this.shapes[i].redraw()}removeShapes(){for(var i=0,l=this.shapes.length;i<l;i++)this.shapes[i]&&this.shapes[i].kill&&this.shapes[i].kill(!0);this.shapes=[]}selectShape(shape,mute){if(shape){if(-1<this.selectedShapes.indexOf(shape))return!1;if(!shape.isSelectable())return!1;mute||this.emit("beforeShapeSelect",shape),this.prevent(!1)||(0<this.selectedShapes.length&&this.options.shapesUniqueSelection&&this.unselectShapes(mute),shape._select(mute),this.selectedShapes.push(shape),!mute&&this.emit("shapeSelect",shape))}}getSelectedShapes(){return this.selectedShapes}unselectShape(shape,mute){if(-1!=this.selectedShapes.indexOf(shape))return mute||this.emit("beforeShapeUnselect",shape),this.cancelUnselectShape?void(this.cancelUnselectShape=!1):void(shape._unselect(),this.selectedShapes.splice(this.selectedShapes.indexOf(shape),1),!mute&&this.emit("shapeUnselect",shape))}unselectShapes(mute){for(;this.selectedShapes[0];)this.unselectShape(this.selectedShapes[0],mute);return this}_removeShape(shape){this.shapes.splice(this.shapes.indexOf(shape),1)}appendShapeToDom(shape){shape.isHTML()&&this.wrapper.insertBefore(shape._dom,this.dom),this.getLayer(shape.getLayer(),"shape").appendChild(shape.simplified?shape._dom:shape.group)}removeShapeFromDom(shape){shape.isHTML()&&this.wrapper.removeChild(shape._dom),this.getLayer(shape.getLayer(),"shape").removeChild(shape.group)}appendSerieToDom(serie){this.getLayer(serie.getLayer(),"serie").appendChild(serie.groupMain)}removeSerieFromDom(serie){this.getLayer(serie.getLayer(),"serie").removeChild(serie.groupMain)}getLayer(layer,mode){if(!this.layers[layer]){this.layers[layer]=[],this.layers[layer][0]=document.createElementNS(Graph.ns,"g"),this.layers[layer][0].setAttribute("data-layer",layer),this.layers[layer][1]=document.createElementNS(Graph.ns,"g"),this.layers[layer][2]=document.createElementNS(Graph.ns,"g"),this.layers[layer][0].appendChild(this.layers[layer][1]),this.layers[layer][0].appendChild(this.layers[layer][2]);for(var i=1,prevLayer;!(prevLayer=this.layers[layer-i])&&0<=layer-i;)i++;prevLayer?prevLayer.nextSibling?this.plotGroup.insertBefore(this.layers[layer][0],prevLayer.nextSibling):this.plotGroup.appendChild(this.layers[layer][0]):this.plotGroup.insertBefore(this.layers[layer][0],this.plotGroup.firstChild)}return this.layers[layer]["shape"==mode?2:1]}focus(){this.wrapper.focus()}elementMoving(movingElement){this.bypassHandleMouse=movingElement}stopElementMoving(element){element&&element==this.bypassHandleMouse?this.bypassHandleMouse=!1:!element&&(this.bypassHandleMouse=!1)}_makeClosingLines(){this.closingLines={};for(var els=["top","bottom","left","right"],i=0;i<4;i++){var line=document.createElementNS(Graph.ns,"line");line.setAttribute("stroke",this.options.closeColor),line.setAttribute("shape-rendering","crispEdges"),line.setAttribute("stroke-linecap","square"),line.setAttribute("display","none"),this.closingLines[els[i]]=line,this.graphingZone.appendChild(line)}}isActionAllowed(e,action){if((action.type===e.type||void 0===action.type&&"mousedown"===e.type||("wheel"===e.type||"mousewheel"===e.type)&&"mousewheel"==action.type)&&!(action.enabled&&("function"==typeof action.enabled?!action.enabled(this):!action.enabled))){if(action.key&&action.key!==e.keyCode){if({backspace:8,enter:13,tab:9,shift:16,ctrl:17,alt:18,pause:19,escape:27,up:33,down:34,left:37,right:39}[action.key]!==e.keyCode)return}return void 0===action.shift&&(action.shift=!1),void 0===action.ctrl&&(action.ctrl=!1),void 0===action.meta&&(action.meta=!1),void 0===action.alt&&(action.alt=!1),e.shiftKey==action.shift&&e.ctrlKey==action.ctrl&&e.metaKey==action.meta&&e.altKey==action.alt}}forcePlugin(plugin){this.forcedPlugin=plugin}unforcePlugin(){this.forcedPlugin=!1}_pluginsExecute(funcName,...args){for(var i in this.plugins)this.plugins[i]&&this.plugins[i][funcName]&&this.plugins[i][funcName].apply(this.plugins[i],args)}_pluginExecute(which,func,args){return which?this.plugins[which]&&this.plugins[which][func]?(this.plugins[which][func].apply(this.plugins[which],args),!0):void 0:void 0}pluginYieldActiveState(){this.activePlugin=!1}_serieExecute(serie,func,args){"object"!=typeof serie&&(serie=this.getSerie(serie)),"function"==typeof serie[func]&&serie.apply(serie,args)}_pluginsInit(){var constructor,pluginName,pluginOptions;for(var i in this.options.plugins)pluginName=i,pluginOptions=this.options.plugins[i],constructor=this.getConstructor(`graph.plugin.${pluginName}`),constructor?(this.plugins[pluginName]=new constructor(pluginOptions),util.mapEventEmission(this.plugins[pluginName].options,this.plugins[pluginName]),this.plugins[pluginName].init(this,pluginOptions)):util.throwError(`Plugin "${pluginName}" has not been registered`)}getPlugin(pluginName){var plugin=this.plugins[pluginName];return plugin?plugin:util.throwError(`Plugin "${pluginName}" has not been loaded or properly registered`)}hasPlugin(pluginName){return!!this.plugins[pluginName]}triggerEvent(){var func=arguments[0];if("function"==typeof this.options[func])return this.options[func].apply(this,arguments)}makeLegend(options){if(this.legend)return this.legend;var constructor=this.getConstructor("graph.legend");if(constructor)this.legend=new constructor(this,options);else return util.throwError("Graph legend is not available as it has not been registered");return this.legend}updateLegend(onlyIfRequired=!1){if(this.legend)return this.legend.update(onlyIfRequired),this}getLegend(){return this.legend?this.legend:void 0}requireLegendUpdate(){this.legend&&this.legend.requireDelayedUpdate()}orthogonalProjectionSetup(){this.options.zAxis=util.extend(!0,{maxZ:10,minZ:0,shiftX:-25,shiftY:-15,xAxis:this.getXAxis(),yAxis:this.getYAxis()})}orthogonalProjectionUpdate(){this.zAxis||(this.zAxis={g:document.createElementNS(Graph.ns,"g"),l:document.createElementNS(Graph.ns,"line")},this.zAxis.g.appendChild(this.zAxis.l),this.groupGrids.appendChild(this.zAxis.g));let refAxisX=this.options.zAxis.xAxis,refAxisY=this.options.zAxis.yAxis;var x0=refAxisX.getMinPx(),y0=refAxisY.getMinPx(),dx=refAxisX.getZProj(this.options.zAxis.maxZ),dy=refAxisY.getZProj(this.options.zAxis.maxZ);this.zAxis.l.setAttribute("stroke","black"),this.zAxis.l.setAttribute("x1",x0),this.zAxis.l.setAttribute("x2",x0+dx),this.zAxis.l.setAttribute("y1",y0),this.zAxis.l.setAttribute("y2",y0+dy),this.updateDataMinMaxAxes(!0);var sort=this.series.map(serie=>[serie.getZPos(),serie]);sort.sort((sa,sb)=>sb[0]-sa[0]);let i=0;sort.forEach(s=>{s[1].setLayer(i),this.appendSerieToDom(s[1]),i++}),this.drawSeries(!0)}kill(){this.wrapper.removeChild(this.dom)}_removeSerie(serie){this.series.splice(this.series.indexOf(serie),1),this._pluginsExecute("serieRemoved",serie)}contextListen(target,menuElements,callback){if(this.options.onContextMenuListen)return this.options.onContextMenuListen(target,menuElements,callback)}lockShapes(){this.shapesLocked=!0;for(var i=0,l=this.shapes.length;i<l;i++)this.shapes[i].moving=!1,this.shapes[i].resizing=!1}unlockShapes(){this.shapesLocked=!1}prevent(arg){var curr=this.prevented;return-1!=arg&&(this.prevented=null==arg||arg),curr}_getXY(e){var x=e.clientX,y=e.clientY,pos=this.offsetCached||util.getOffset(this.wrapper);return x-=pos.left,y-=pos.top,{x:x,y:y}}_resize(){this.width&&this.height&&(this.getDrawingWidth(),this.getDrawingHeight(),this.sizeSet=!0,this.dom.setAttribute("width",this.width),this.dom.setAttribute("height",this.height),this.domTitle.setAttribute("x",this.width/2),this._sizeChanged=!0,this.drawn&&(this.requireLegendUpdate(),this.draw(!0)))}updateGraphingZone(){util.setAttributeTo(this.graphingZone,{transform:`translate(${this.options.paddingLeft}, ${this.options.paddingTop})`}),this._sizeChanged=!0}getDrawingSpaceWidth(){return()=>this.drawingSpaceWidth}getDrawingSpaceHeight(){return()=>this.drawingSpaceHeight}getDrawingSpaceMinX(){return()=>this.drawingSpaceMinX}getDrawingSpaceMinY(){return()=>this.drawingSpaceMinY}getDrawingSpaceMaxX(){return()=>this.drawingSpaceMaxX}getDrawingSpaceMaxY(){return()=>this.drawingSpaceMaxY}tracking(options){return this.trackingLine(options)}trackingLine(options){var self=this;if("boolean"==typeof options)return void(this.options.trackingLine&&(this.options.trackingLine.enable=options));options&&(this.options.trackingLine=options),options.enable=void 0===options.enable||!!options.enable;const seriesSet=new Set;if(Array.isArray(options.series)?options.series.forEach(serie=>{seriesSet.add(this.getSerie(serie))}):"all"==options.series&&this.allSeries().forEach(serie=>seriesSet.add(serie)),options.series=seriesSet,"individual"==options.mode)seriesSet.forEach(serie=>{self.addSerieToTrackingLine(serie,options.serieOptions)});else{if(options.noLine)return;this.trackingLineShape||(this.trackingLineShape=this.newShape("line",util.extend(!0,{position:[{y:"min"},{y:"max"}],stroke:"black",layer:-1},options.trackingLineShapeOptions))),this.trackingLineShape.draw()}}addSerieToTrackingLine(serie,options={}){this.options.trackingLine||this.trackingLine({mode:"individual"}),this.options.trackingLine.series.add(serie);let serieShape;serieShape=this.options.trackingLine.serieShape?this.options.trackingLine.serieShape:{shape:"ellipse",properties:{rx:[`${3*serie.getLineWidth()}px`],ry:[`${3*serie.getLineWidth()}px`]}},serie.options.tracking=Object.assign({},options),serie.trackingShape||(serie.trackingShape=this.newShape(serieShape.shape,{fillColor:serie.getLineColor(),strokeColor:"White",strokeWidth:serie.getLineWidth()},!0,serieShape.properties).setSerie(serie).forceParentDom(serie.groupMain).draw())}setKatexRenderer(renderer){this._katexRenderer=renderer}hasKatexRenderer(){return!!this._katexRenderer}renderWithKatex(katexValue,katexElement){if(this._katexRenderer){katexElement?katexElement.removeChild(katexElement.firstChild):katexElement=document.createElementNS(Graph.ns,"foreignObject");let div=document.createElement("div");return katexElement.appendChild(div),this._katexRenderer(katexValue,div),katexElement}return!1}static fromJSON(json,wrapper){const options=json.options||{},graph=new Graph(void 0,options);return(0,_main.default)(Graph,graph,json,wrapper),graph.setWrapper(wrapper),graph}setJSON(json,options={}){this.killSeries();const state={};options.keepState&&this._applyToAxes(axis=>{axis.options.name&&(state[axis.options.name]={min:axis.getCurrentMin(),max:axis.getCurrentMax()})},void 0,!0,!0),this._applyToAxes(axis=>{this.killAxis(axis,!0,!0)},void 0,!0,!0),this.killLegend(),this.killShapes(),(0,_main.default)(Graph,this,json),options.keepState&&this._applyToAxes(axis=>{axis.options.name&&state[axis.options.name]&&(axis.setCurrentMin(state[axis.options.name].min),axis.setCurrentMax(state[axis.options.name].max))},void 0,!0,!0),this.draw()}exportToSchema(){let schema={title:this.options.title,width:this.getWidth(),height:this.getHeight()},axesExport=[],allaxes={x:[],y:[]};["top","bottom","left","right"].map(axisPosition=>this.axis[axisPosition]?void(axesExport=axesExport.concat(this.axis[axisPosition].map(axis=>({type:axisPosition,label:axis.options.label,unit:axis.options.unit,min:axis.options.forcedMin,max:axis.options.forcedMax,flip:axis.options.flipped}))),"top"==axisPosition||"bottom"==axisPosition?allaxes.x=allaxes.x.concat(this.axis[axisPosition]):allaxes.y=allaxes.y.concat(this.axis[axisPosition])):{}),schema.axis=axesExport;let toType=type=>{switch(type){case Graph.SERIE_BAR:return"bar";case Graph.SERIE_LINE_COLORED:return"color";case Graph.SERIE_SCATTER:return"scatter";default:case Graph.SERIE_LINE:return"line";}},exportData=(serie,x)=>{let data=[];switch(serie.getType()){case Graph.SERIE_LINE:for(var i=0;i<serie.data.length;i++)for(var j=0;j<serie.data[i].length-1;j+=2)data.push(serie.data[i][j+(x&&serie.isFlipped()||!x&&!serie.isFlipped()?1:0)]);break;case Graph.SERIE_SCATTER:for(var j=0;j<serie.data.length-1;j+=2)data.push(serie.data[i+(x&&serie.isFlipped()||!x&&!serie.isFlipped()?1:0)]);}return data};return schema.data=[].concat(this.series.map(serie=>{let style=[],linestyle=[];if(serie.getType()==Graph.SERIE_LINE)for(var stylename in serie.styles){linestyle.push({styleName:stylename,color:serie.styles[stylename].lineColor,lineWidth:serie.styles[stylename].lineWidth,lineStyle:serie.styles[stylename].lineStyle});let styleObj={styleName:stylename,styles:[]};style.push(styleObj),styleObj.styles=styleObj.styles.concat((serie.styles[stylename].markers||[]).map(markers=>({shape:markers.type,zoom:markers.zoom,lineWidth:markers.strokeWidth,lineColor:markers.strokeColor,color:markers.fillColor,points:markers.points})))}return{label:serie.getLabel(),id:serie.getName(),type:toType(serie.getType()),x:exportData(serie,!0),y:exportData(serie,!1),xAxis:allaxes.x.indexOf(serie.getXAxis()),yAxis:allaxes.y.indexOf(serie.getYAxis()),style:style,lineStyle:linestyle}})),schema}static registerConstructor(constructorName,constructor){return _constructors.has(constructorName)?util.throwError(`Constructor ${constructor} already exists.`):void _constructors.set(constructorName,constructor)}static getConstructor(constructorName,softFail=!1){return _constructors.has(constructorName)?_constructors.get(constructorName):!softFail&&util.throwError(`Constructor "${constructorName}" doesn't exist`)}static newWaveform(){return new _waveform.Waveform(...arguments)}static waveform(){return new _waveform.Waveform(...arguments)}static newWaveformHash(){return new _waveform.WaveformHash(...arguments)}static waveformHash(){return new _waveform.WaveformHash(...arguments)}}Graph.prototype.getConstructor=Graph.getConstructor;var _trackingLegendSerie=function(graph,seriesOutput,posXPx,posYPx,legend){const textMethod=graph.options.trackingLine.textMethod||trackingLineDefaultTextMethod;var justCreated=!1;if(!legend&&graph.options.trackingLine.legend&&(justCreated=!0,legend=_makeTrackingLegend(graph)),!!graph.options.trackingLine.legend){if(0==seriesOutput.length)return legend.style.display="none",legend;"none"==legend.style.display||justCreated?forceTrackingLegendMode(graph,legend,posXPx,posYPx,!0):_trackingLegendMove(graph,legend,posXPx,posYPx),legend.style.display="block";var txt=textMethod(seriesOutput,void 0,posXPx,posYPx);return legend.innerHTML=txt,legend}},forceTrackingLegendMode=function(graph,legend,toX,toY,skip){function next(){var progress=(Date.now()-start)/200;1<progress&&(progress=1),legend.style.marginLeft=`${(toX-startX)*progress+startX}px`,legend.style.marginTop=`${(toY-startY)*progress+startY}px`,1>progress&&window.requestAnimationFrame(next)}var start=Date.now(),h=legend.offsetHeight,startX=parseInt(legend.style.marginLeft.replace("px","")||0,10),startY=parseInt(legend.style.marginTop.replace("px","")||0,10);return toX=toX>graph.getWidth()/2?toX-toX%10-20-legend.offsetWidth:toX-toX%10+30,toY=toY-toY%10+h/2,skip?(legend.style.marginLeft=`${toX}px`,void(legend.style.marginTop=`${toY}px`)):void window.requestAnimationFrame(next)},_trackingLegendMove=(...args)=>{util.debounce(forceTrackingLegendMode,50)(...args)};const trackingLineDefaultTextMethod=output=>{let txt="";for(var i in output)output[i].closestPoint&&(txt+=`${output[i].serie.getName()}: ${output[i].serie.getYAxis().valueToHtml(output[i].closestPoint.yClosest,void 0,void 0,2)}
      `);return txt};Graph.SERIE_LINE=Symbol(),Graph.SERIE_SCATTER=Symbol(),Graph.SERIE_CONTOUR=Symbol(),Graph.SERIE_BAR=Symbol(),Graph.SERIE_BOX=Symbol(),Graph.SERIE_ZONE=Symbol(),Graph.SERIE_LINE_COLORED=Symbol(),Graph.SERIE_ZONE=Symbol(),Graph.SERIE_DENSITYMAP=Symbol(),Graph.SERIE_LINE_3D=Symbol(),Graph.SERIE_ZONE_3D=Symbol(),Graph.TICKS_OUTSIDE=Symbol(),Graph.TICKS_INSIDE=Symbol(),Graph.TICKS_CENTERED=Symbol(),Graph.ns="http://www.w3.org/2000/svg",Graph.nsxlink="http://www.w3.org/1999/xlink";_exports.default=Graph,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(7),__webpack_require__(5),__webpack_require__(0)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphCore,_EventEmitter,util){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphCore=_interopRequireDefault(_graphCore),_EventEmitter=_interopRequireDefault(_EventEmitter),util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util);const defaults={name:void 0,lineAt:!1,display:!0,flipped:!1,axisDataSpacing:{min:.1,max:.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,primaryGridWidth:1,primaryGridColor:"#f0f0f0",primaryGridDasharray:void 0,primaryGridOpacity:void 0,primaryTicksColor:"black",secondaryGridWidth:1,secondaryGridColor:"#f0f0f0",secondaryGridDasharray:void 0,secondaryGridOpacity:void 0,secondaryTicksColor:"black",hideWhenNoSeriesShown:!1,shiftToZero:!1,tickPosition:1,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,logScale:!1,forcedMin:!1,forcedMax:!1,span:[0,1],marginMin:0,marginMax:0,scientificScale:!1,scientificScaleExponent:!1,engineeringScale:!1,unitInTicks:!1,unit:!1,unitWrapperBefore:"",unitWrapperAfter:"",splitMarks:!1,tickLabelOffset:0,useKatexForLabel:!1,highestMax:void 0,lowestMin:void 0,labelValue:""};class Axis extends _EventEmitter.default{constructor(){super()}init(graph,options,overwriteoptions){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[24*3600,[1,2,3,4,5,10,20,40]]],this.graph=graph,this.options=util.extend(!0,{},defaults,overwriteoptions,options),this.group=document.createElementNS(this.graph.ns,"g"),this.hasChanged=!0,this.rectEvent=document.createElementNS(this.graph.ns,"rect"),this.rectEvent.setAttribute("pointer-events","fill"),this.rectEvent.setAttribute("fill","transparent"),this.group.appendChild(this.rectEvent),this.graph.axisGroup.appendChild(this.group),this._lines=[],this.line=document.createElementNS(this.graph.ns,"line"),this.line.setAttribute("stroke","black"),this.line.setAttribute("shape-rendering","crispEdges"),this.line.setAttribute("stroke-linecap","square"),this.groupTicks=document.createElementNS(this.graph.ns,"g"),this.groupTickLabels=document.createElementNS(this.graph.ns,"g"),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.label=document.createElementNS(this.graph.ns,"text"),this.labelTspan=document.createElementNS(this.graph.ns,"tspan"),this.preunit="",this.unitTspan=document.createElementNS(this.graph.ns,"tspan"),this.expTspan=document.createElementNS(this.graph.ns,"tspan"),this.expTspanExp=document.createElementNS(this.graph.ns,"tspan"),this.label.appendChild(this.labelTspan),this.label.appendChild(this.unitTspan),this.label.appendChild(this.expTspan),this.label.appendChild(this.expTspanExp),this.expTspan.setAttribute("dx",6),this.expTspanExp.setAttribute("dy",-5),this.expTspanExp.setAttribute("font-size","0.8em"),this.label.setAttribute("text-anchor","middle"),this.setTickPosition(this.options.tickPosition),this.gridLinePath={primary:"",secondary:""},this.gridPrimary=document.createElementNS(this.graph.ns,"path"),this.gridSecondary=document.createElementNS(this.graph.ns,"path"),this.graph.groupPrimaryGrids.appendChild(this.gridPrimary),this.graph.groupSecondaryGrids.appendChild(this.gridSecondary),this.setGridLinesStyle(),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,"g"),this.group.appendChild(this.groupSeries),this.widthHeightTick=0,this.ticks={},this.ticksLabels=[],this.tickScaling={1:3,2:2,3:1,4:.5},this.currentTick={},this.lastCurrentTick={},this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener("mousemove",e=>{e.preventDefault();var coords=this.graph._getXY(e);this.handleMouseMoveLocal(coords.x,coords.y,e);for(var i=0,l=this.series.length;i<l;i++)this.series[i].handleMouseMove(!1,!0)}),this.labels=[],this.group.addEventListener("click",e=>{e.preventDefault();var coords=this.graph._getXY(e);this.addLabel(this.getVal(coords.x-this.graph.getPaddingLeft()))}),this.gridPrimary.setAttribute("clip-path",`url(#_clipplot${this.graph._creation})`),this.gridSecondary.setAttribute("clip-path",`url(#_clipplot${this.graph._creation})`),this.graph._axisHasChanged(this),this.cache()}handleMouseMoveLocal(){}hide(){return this.options.display=!1,this}show(){return this.options.display=!0,this}setDisplay(bool){return this.options.display=!!bool,this}isDisplayed(){return this.options.hideWhenNoSeriesShown?this.graph.getSeriesFromAxis(this).reduce((accumulator,serie)=>accumulator||serie.isShown(),!1):this.options.display}isShown(){return this.isDisplayed(...arguments)}hideGroup(){this._hidden||(this._hidden=!0,this.group.setAttribute("display","none"))}showGroup(){this._hidden&&(this._hidden=!1,this.group.setAttribute("display","initial"))}kill(noRedraw,noSerieKill){this.graph.killAxis(this,noRedraw,noSerieKill)}setLineAt(atValues){return this.options.lineAt=atValues,this}adaptTo(axis,thisValue,foreignValue,preference){return axis?(this.options.adaptTo={axis:axis,thisValue:thisValue,foreignValue:foreignValue,preference:preference},this.adapt(),this):(this.options.adaptTo=!1,this)}adapt(){if(this.options.adaptTo){var axis=this.options.adaptTo.axis,current=this.options.adaptTo.thisValue,foreign=this.options.adaptTo.foreignValue;if((void 0===axis.options.currentAxisMin||void 0===axis.options.currentAxisMax)&&axis.setMinMaxToFitSeries(),!1!==this.options.forcedMin&&!1==this.options.forcedMax||"max"!==this.options.adaptTo.preference){this.options.currentAxisMin=!1===this.options.forcedMin?this._zoomed?this.getCurrentMin():this.getMinValue()-(current-this.getMinValue())*(this.options.axisDataSpacing.min*(axis.getCurrentMax()-axis.getCurrentMin())/(foreign-axis.getCurrentMin())):this.options.forcedMin,this.options.currentAxisMin==current&&(this.options.currentAxisMin-=this.options.axisDataSpacing.min*this.getInterval());var use=!1===this.options.forcedMin?this.options.currentAxisMin:this.options.forcedMin;this.options.currentAxisMax=(current-use)*(axis.getCurrentMax()-axis.getCurrentMin())/(foreign-axis.getCurrentMin())+use}else{this.options.currentAxisMax=!1===this.options.forcedMax?this._zoomed?this.getCurrentMax():this.getMaxValue()+(this.getMaxValue()-current)*(this.options.axisDataSpacing.max*(axis.getCurrentMax()-axis.getCurrentMin())/(axis.getCurrentMax()-foreign)):this.options.forcedMax,this.options.currentAxisMax==current&&(this.options.currentAxisMax+=this.options.axisDataSpacing.max*this.getInterval());var use=!1===this.options.forcedMax?this.options.currentAxisMax:this.options.forcedMax;this.options.currentAxisMin=(current-use)*(axis.getCurrentMin()-axis.getCurrentMax())/(foreign-axis.getCurrentMax())+use}this.graph._axisHasChanged(this)}}setFloating(axis,value){return this.floating=!0,this.floatingAxis=axis,this.floatingValue=value,this}getFloatingAxis(){return this.floatingAxis}getFloatingValue(){return this.floatingValue}setAxisDataSpacing(val1,val2){return this.options.axisDataSpacing.min=val1,this.options.axisDataSpacing.max=val2||val1,this}dataSpacing(){return this.setAxisDataSpacing(...arguments)}setAxisDataSpacingMin(val){this.options.axisDataSpacing.min=val}setAxisDataSpacingMax(val){this.options.axisDataSpacing.max=val}setMinPx(px){this.minPx=px,this.setMinMaxFlipped()}setMaxPx(px){this.maxPx=px,this.setMinMaxFlipped()}getMinPx(){return this.minPxFlipped}getMaxPx(){return this.maxPxFlipped}getMathMaxPx(){return this.maxPx}getMathMinPx(){return this.minPx}getMinValue(){return!1===this.options.forcedMin?isNaN(this.options.lowestMin)?this.dataMin:Math.max(this.options.lowestMin,this.dataMin):this.options.forcedMin}getMaxValue(){return!1===this.options.forcedMax?isNaN(this.options.highestMax)?this.dataMax:Math.min(this.options.highestMax,this.dataMax):this.options.forcedMax}setMinValueData(min){this.dataMin=min,isNaN(this.getCurrentMin())}setMaxValueData(max){this.dataMax=max,isNaN(this.getCurrentMax())}getDataMax(){return this.dataMax}getDataMin(){return this.dataMin}setLowestMin(lowestMin){this.options.lowestMin=lowestMin,this.graph._axisHasChanged(this)}forceMin(min,noRescale=!1){return this.options.forcedMin=min,this.setCurrentMin(noRescale?this.getCurrentMin():void 0),this.graph._axisHasChanged(this),this}setHighestMax(highestMax){this.options.highestMax=highestMax,this.graph._axisHasChanged(this)}forceMax(max,noRescale=!1){return this.options.forcedMax=max,this.setCurrentMax(noRescale?this.getCurrentMax():void 0),this.graph._axisHasChanged(this),this}getForcedMin(){return this.options.forcedMin}getForcedMax(){return this.options.forcedMax}forceToAxis(axis){return axis.getMaxValue&&axis.getMinValue&&(this.options.forcedMin=axis.getMinValue(),this.options.forcedMax=axis.getMaxValue()),this}getNbTicksPrimary(){return this.options.nbTicksPrimary}setNbTicksPrimary(nb){this.options.nbTicksPrimary=nb}getNbTicksSecondary(){return this.options.nbTicksSecondary}setNbTicksSecondary(nb){return this.options.nbTicksSecondary=nb,this}handleMouseMove(px){this.mouseVal=this.getVal(px)}handleMouseWheel(delta,e,baseline){delta=Math.min(.2,Math.max(-.2,delta)),"min"==baseline?baseline=this.getMinValue():"max"==baseline?baseline=this.getMaxValue():!baseline&&(baseline=0),this._doZoomVal((this.getCurrentMax()-baseline)*(1+delta)+baseline,(this.getCurrentMin()-baseline)*(1+delta)+baseline),this.graph.draw()}set zoomLock(bln){this._zoomLocked=bln}get zoomLock(){return this._zoomLocked||!1}zoom(val1,val2,forceLock){return!forceLock&&this.zoomLock?void 0:this._doZoomVal(val1,val2,!0)}_doZoomVal(val1,val2,mute){return this._doZoom(this.getPx(val1),this.getPx(val2),val1,val2,mute)}_doZoom(px1,px2,val1,val2,mute){var val1=void 0===val1?this.getVal(px1):val1,val2=void 0===val2?this.getVal(px2):val2;return this.setCurrentMin(Math.min(val1,val2)),this.setCurrentMax(Math.max(val1,val2)),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!0,this.adapt(),this._hasChanged=!0,mute||this.emit("zoom",[this.options.currentAxisMin,this.options.currentAxisMax,this]),this}getSerieShift(){return this._serieShift}getSerieScale(){return this._serieScale}getMouseVal(){return this.mouseVal}getUnitPerTick(px,nbTick,valrange){var pxPerTick=px/nbTicks;nbTick=nbTick?Math.min(nbTick,px/10):px/10;var unitPerTick=valrange/nbTick;switch(this.options.unitModification){case"time":case"time:min.sec":{let breaked=!1,i,l,k,m;for(i=0,l=this.unitModificationTimeTicks.length;i<l;i++){for(k=0,m=this.unitModificationTimeTicks[i][1].length;k<m;k++)if(unitPerTick<this.unitModificationTimeTicks[i][0]*this.unitModificationTimeTicks[i][1][k]){breaked=!0;break}if(breaked)break}unitPerTickCorrect=i===this.unitModificationTimeTicks.length?1:this.unitModificationTimeTicks[i][0]*this.unitModificationTimeTicks[i][1][k];break}case"time:min.sec_dec":{let breaked=!1,i,l,k,m;for(i=0,l=this.unitModificationTimeTicks.length;i<l;i++){for(k=0,m=this.unitModificationTimeTicks[i][1].length;k<m;k++)if(unitPerTick<this.unitModificationTimeTicks[i][0]*this.unitModificationTimeTicks[i][1][k]){breaked=!0;break}if(breaked)break}unitPerTickCorrect=i===this.unitModificationTimeTicks.length?1:this.unitModificationTimeTicks[i][0]*this.unitModificationTimeTicks[i][1][k];break}default:{var decimals=Math.floor(Math.log(unitPerTick)/Math.log(10)),numberToNatural=unitPerTick*Math.pow(10,-decimals);this.decimals=-decimals;var possibleTicks=[1,2,5,10],closest=!1;for(let i=possibleTicks.length-1;0<=i;i--)(!closest||Math.abs(possibleTicks[i]-numberToNatural)<Math.abs(closest-numberToNatural))&&(closest=possibleTicks[i]);var unitPerTickCorrect=closest*Math.pow(10,decimals);break}}var nbTicks=valrange/unitPerTickCorrect,pxPerTick=px/nbTick;return[unitPerTickCorrect,nbTicks,pxPerTick]}setMinMaxToFitSeries(noNotify){var interval=this.getInterval();return this.options.logScale?(this.setCurrentMin(Math.max(1e-50,.9*this.getMinValue())),this.setCurrentMax(Math.max(1e-50,1.1*this.getMaxValue()))):(this.setCurrentMin(this.getMinValue()),this.setCurrentMax(this.getMaxValue()),!1===this.getForcedMin()&&this.setCurrentMin(this.getCurrentMin()-this.options.axisDataSpacing.min*interval),!1===this.getForcedMax()&&this.setCurrentMax(this.getCurrentMax()+this.options.axisDataSpacing.max*interval)),(isNaN(this.options.currentAxisMin)||isNaN(this.options.currentAxisMax))&&(this.options.currentAxisMax=void 0,this.options.currentAxisMin=void 0),this.cache(),this._zoomed=!1,this.adapt(),noNotify||this.graph._axisHasChanged(this),this.emit("zoomOutFull",[this.options.currentAxisMin,this.options.currentAxisMax,this]),this}getInterval(){return this.getMaxValue()-this.getMinValue()}getCurrentInterval(){return this.cachedInterval}getCurrentMin(){return this.cachedCurrentMin}getCurrentMax(){return this.cachedCurrentMax}cacheCurrentMin(){this.cachedCurrentMin=this.options.currentAxisMin==this.options.currentAxisMax?this.options.logScale?this.options.currentAxisMin/10:this.options.currentAxisMin-1:this.options.currentAxisMin}cacheCurrentMax(){this.cachedCurrentMax=this.options.currentAxisMax==this.options.currentAxisMin?this.options.logScale?10*this.options.currentAxisMax:this.options.currentAxisMax+1:this.options.currentAxisMax}cacheInterval(){this.cachedInterval=this.cachedCurrentMax-this.cachedCurrentMin}cache(){this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval()}setCurrentMin(val){return(void 0===val||!1!==this.getForcedMin()&&(val<this.getForcedMin()||val<this.options.lowestMin||void 0===val))&&(val=this.getMinValue()),this.options.currentAxisMin=val,this.options.logScale&&(this.options.currentAxisMin=Math.max(1e-50,val)),this.cacheCurrentMin(),this.cacheInterval(),this.graph._axisHasChanged(this),this}setCurrentMax(val){(val===void 0||!1!==this.getForcedMax()&&(val>this.getForcedMax()||val>this.options.highestMax||val===void 0))&&(val=this.getMaxValue()),this.options.currentAxisMax=val,this.options.logScale&&(this.options.currentAxisMax=Math.max(1e-50,val)),this.cacheCurrentMax(),this.cacheInterval(),this.graph._axisHasChanged(this)}flip(flip){return this.options.flipped=flip,this.setMinMaxFlipped(),this}isFlipped(){return this.options.flipped}_draw(){var self=this;(void 0===this.options.currentAxisMin||void 0===this.options.currentAxisMax)&&this.setMinMaxToFitSeries(!0);var widthPx=Math.abs(this.getMaxPx()-this.getMinPx()),valrange=this.getCurrentInterval();if(!this.isShown())return this.line.setAttribute("display","none"),0;this.line.setAttribute("display","block"),this.scientificExponent=!0==this.options.scientificScale?this.options.scientificScaleExponent?this.options.scientificScaleExponent:Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()),Math.abs(this.getCurrentMin())))/Math.log(10)):0,this.gridLinePath.primary="",this.gridLinePath.secondary="";let letter;if(!this.options.useKatexForLabel||!this.graph.hasKatexRenderer())this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(letter=this.getExponentGreekLetter(this.scientificExponent))?(this.preunit=letter,this.unitTspan.setAttribute("dx",0)):0===this.scientificExponent||isNaN(this.scientificExponent)?(!this.options.unit&&this.unitTspan.setAttribute("display","none"),this.preunit="",this.expTspan.setAttribute("display","none"),this.expTspanExp.setAttribute("display","none")):(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),this.preunit="",this.expTspan.setAttribute("display","visible"),this.expTspanExp.setAttribute("display","visible"),this.expTspan.textContent="x10",this.expTspanExp.textContent=this.scientificExponent),this.writeUnit();else{let string=this.getLabel();this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(letter=this.getExponentGreekLetter(this.scientificExponent))?(string+=letter,this.preunitTspan.innerHTML=letter,this.preunitTspan.setAttribute("display","visible"),this.unitTspan.setAttribute("dx",0),string+=` ${letter} ${this.options.unit}`):0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),string+=` \\cdot 10^${this.scientificExponent} ${this.options.unit}`),this.katexElement=this.graph.renderWithKatex(string,this.katexElement)}if(!!this.options.hideTicks)var widthHeight=0;else if(this.resetTicksLength(),this.linkedToAxis){this.linkedToAxis.deltaPx=10;var widthHeight=this.drawLinkedToAxisTicksWrapper(widthPx,valrange)}else if(!this.options.logScale)var widthHeight=this.drawLinearTicksWrapper(widthPx,valrange);else var widthHeight=this.drawLogTicks();this.removeUselessTicks(),this.removeUselessTickLabels(),this.gridPrimary.setAttribute("d",this.gridLinePath.primary),this.gridSecondary.setAttribute("d",this.gridLinePath.secondary);var axes=this.graph.findAxesLinkedTo(this);return axes.forEach(function(axis){axis.linkedToAxis&&(axis.setMinPx(self.getMinPx()),axis.setMaxPx(self.getMaxPx()),axis.draw())}),widthHeight}drawLines(){this.options.lineAt&&Array.isArray(this.options.lineAt)&&this.options.lineAt.forEach((val,index)=>{!isNaN(val)&&this.getCurrentMin()<=val&&this.getCurrentMax()>=val?this._lines[index]=this._drawLine(val,this._lines[index]):this._hideLine(this._lines[index])})}writeUnit(){this.options.unit?(this.unitTspan.setAttribute("display","visible"),this.unitTspan.setAttribute("dx",5),this.unitTspan.innerHTML=(this.options.unitWrapperBefore+this.preunit+this.options.unit+this.options.unitWrapperAfter).replace(/\^([-+0-9]*)(.*)/g,"<tspan dy='-5' font-size='0.7em'>$1</tspan><tspan dy='5' font-size='1em'>$2</tspan>")):this.unitTspan.setAttribute("display","none")}getExponentGreekLetter(val){return 3===val?"k":6===val?"M":9===val?"G":12===val?"T":15===val?"E":-3===val?"m":-6===val?"&mu;":-9===val?"n":-12===val?"p":-15===val?"f":""}drawLinearTicksWrapper(widthPx,valrange){let tickPrimaryUnit;return this.options.primaryTickUnit?tickPrimaryUnit=this.options.primaryTickUnit:(tickPrimaryUnit=this.getUnitPerTick(widthPx,this.getNbTicksPrimary(),valrange)[0],this.options.maxPrimaryTickUnit&&this.options.maxPrimaryTickUnit<tickPrimaryUnit?tickPrimaryUnit=this.options.maxPrimaryTickUnit:this.options.minPrimaryTickUnit&&this.options.minPrimaryTickUnit>tickPrimaryUnit&&(tickPrimaryUnit=this.options.minPrimaryTickUnit)),this.drawTicks(tickPrimaryUnit,this.secondaryTicks())}forcePrimaryTickUnit(primaryInterval){this.options.primaryTickUnit=primaryInterval,this.decimals=Math.max(0,Math.round(-Math.log(primaryInterval)/Math.log(10)))}forcePrimaryTickUnitMax(value){this.options.maxPrimaryTickUnit=value}forcePrimaryTickUnitMin(value){this.options.minPrimaryTickUnit=value}getPrimaryTickUnit(){return this.incrTick}setTickLabelRatio(tickRatio){this.options.ticklabelratio=tickRatio}doesHideWhenNoSeriesShown(){return this.options.hideWhenNoSeriesShown}draw(){this._widthLabels=0;var drawn=this._draw();return this._widthLabels+=drawn,drawn}drawTicks(primary,secondary){var unitPerTick=primary,min=this.getCurrentMin(),max=this.getCurrentMax(),loop=0,secondaryIncr,incrTick,subIncrTick;for(secondary&&(secondaryIncr=unitPerTick/secondary),incrTick=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-min)/unitPerTick)*unitPerTick:Math.floor(min/unitPerTick)*unitPerTick,this.incrTick=primary;incrTick<=max&&(loop++,!(1e3<loop));){if(secondary){subIncrTick=incrTick+secondaryIncr,this.subIncrTick=subIncrTick;for(var loop2=0;subIncrTick<incrTick+unitPerTick&&1e-7<Math.abs(subIncrTick-(incrTick+unitPerTick))&&(loop2++,!(100<loop2));){if(subIncrTick<min||subIncrTick>max){subIncrTick+=secondaryIncr;continue}this.drawTickWrapper(subIncrTick,!1,1e-4>Math.abs(subIncrTick-incrTick-unitPerTick/2)?2:3),subIncrTick+=secondaryIncr}}if(incrTick<min||incrTick>max){incrTick+=primary;continue}this.drawTickWrapper(incrTick,!0,1),incrTick+=primary}return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}nextTick(level,callback){if(this.ticks[level]=this.ticks[level]||[],this.lastCurrentTick[level]=this.lastCurrentTick[level]||0,this.currentTick[level]=this.currentTick[level]||0,this.currentTick[level]>=this.ticks[level].length){var tick=document.createElementNS(this.graph.ns,"line");this.groupTicks.appendChild(tick),this.ticks[level].push(tick),callback(tick)}var tick=this.ticks[level][this.currentTick[level]];return this.currentTick[level]>=this.lastCurrentTick[level]&&tick.setAttribute("display","visible"),this.currentTick[level]++,tick}nextTickLabel(callback){if(this.ticksLabels=this.ticksLabels||[],this.lastCurrentTickLabel=this.lastCurrentTickLabel||0,this.currentTickLabel=this.currentTickLabel||0,this.currentTickLabel>=this.ticksLabels.length){var tickLabel=document.createElementNS(this.graph.ns,"text");this.groupTickLabels.appendChild(tickLabel),this.ticksLabels.push(tickLabel),callback(tickLabel)}var tickLabel=this.ticksLabels[this.currentTickLabel];return this.currentTickLabel>=this.lastCurrentTickLabel&&tickLabel.setAttribute("display","visible"),this.currentTickLabel++,tickLabel}removeUselessTicks(){for(var j in this.currentTick){for(var i=this.currentTick[j];i<this.ticks[j].length;i++)this.ticks[j][i].setAttribute("display","none");this.lastCurrentTick[j]=this.currentTick[j],this.currentTick[j]=0}}removeUselessTickLabels(){for(var i=this.currentTickLabel;i<this.ticksLabels.length;i++)this.ticksLabels[i].setAttribute("display","none");this.lastCurrentTickLabel=this.currentTickLabel,this.currentTickLabel=0}nextGridLine(primary,x1,x2,y1,y2){(primary&&this.options.primaryGrid||!primary&&this.options.secondaryGrid)&&(this.gridLinePath[primary?"primary":"secondary"]+=`M ${x1} ${y1} L ${x2} ${y2}`)}setGridLineStyle(gridLine,primary){gridLine.setAttribute("shape-rendering","crispEdges"),gridLine.setAttribute("stroke",primary?this.getPrimaryGridColor():this.getSecondaryGridColor()),gridLine.setAttribute("stroke-width",primary?this.getPrimaryGridWidth():this.getSecondaryGridWidth()),gridLine.setAttribute("stroke-opacity",primary?this.getPrimaryGridOpacity():this.getSecondaryGridOpacity());var dasharray;(dasharray=primary?this.getPrimaryGridDasharray():this.getSecondaryGridDasharray())&&gridLine.setAttribute("stroke-dasharray",dasharray)}setGridLinesStyle(){return this.setGridLineStyle(this.gridPrimary,!0),this.setGridLineStyle(this.gridSecondary,!1),this}resetTicksLength(){}secondaryTicks(){return this.options.nbTicksSecondary}drawLogTicks(){var min=this.getCurrentMin(),max=this.getCurrentMax(),incr=Math.min(min,max),max=Math.max(min,max);1e-50>incr&&(incr=1e-50),20<Math.log(incr)-Math.log(max)&&(max=Math.pow(10,20*Math.log(incr)));var optsMain={fontSize:"1.0em",exponential:!0,overwrite:!1};0>incr&&(incr=0);for(var pow=0==incr?0:Math.floor(Math.log(incr)/Math.log(10)),incr=1,val;(val=incr*Math.pow(10,pow))<max;)1==incr&&val>min&&this.drawTickWrapper(val,!0,1,optsMain),10==incr?(incr=1,pow++):(1!=incr&&val>min&&this.drawTickWrapper(val,!1,2,{overwrite:"",fontSize:"0.6em"}),incr++);return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}drawTickWrapper(value,label,level,options){this.drawTick(value,level,options)}linkToAxis(axis,scalingFunction,decimals){this.linkedToAxis={axis:axis,scalingFunction:scalingFunction,decimals:decimals||1}}drawLinkedToAxisTicksWrapper(widthPx,valrange){var opts=this.linkedToAxis,px=0,val,t,l,delta2;opts.deltaPx||(opts.deltaPx=10);do{if(val=opts.scalingFunction(opts.axis.getVal(px+this.getMinPx())),opts.decimals&&(this.decimals=opts.decimals),t=this.drawTick(val,1,{},px+this.getMinPx()),!t)throw console.error(val,px,this.getMinPx()),new Error("Unable to draw tick. Please report the test-case");if(l=8*(t[1].textContent+"").length,delta2=5*Math.round(l/5),delta2>opts.deltaPx)return opts.deltaPx=delta2,void this.drawLinkedToAxisTicksWrapper(widthPx,valrange);px+=opts.deltaPx}while(px<widthPx)}getPos(value){return this.getPx(value)}getPx(value){if(!this.options.logScale)return(value-this.getCurrentMin())/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx();if(!(0>value)){var value=(Math.log(value)-Math.log(this.getCurrentMin()))/(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx();return value}}getRoundedPx(value){return Math.round(10*this.getPx(value))/10}getVal(px){return this.options.logScale?Math.exp((px-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))+Math.log(this.getCurrentMin())):(px-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()+this.getCurrentMin()}getRelPx(delta){return delta/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())}getRelVal(px){return px/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()}valueToText(value,forceDecimals){if(this.scientificExponent)return value/=Math.pow(10,this.scientificExponent),value.toFixed(1);if(value=value*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(value-=this.dataMin),this.options.ticklabelratio&&(value*=this.options.ticklabelratio),this.options.unitModification)return value=this.modifyUnit(value,this.options.unitModification),value;var dec=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return isNaN(value)?"":(value=0<forceDecimals?value.toFixed(forceDecimals):0<dec?value.toFixed(dec):value.toFixed(0),this.options.unitInTicks&&this.options.unit&&(value+=` ${this.options.unit}`),value)}valueToHtml(value,noScaling,noUnits,forceDecimals=0){var text=this.valueToText(value,forceDecimals),letter;return this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(letter=this.getExponentGreekLetter(this.scientificExponent))?text+=letter:0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&!noScaling&&(text+="x10",text+=`<sup>${this.scientificExponent}</sup>`),this.options.unit&&!noUnits&&(text+=this.options.unit.replace(/\^([-+0-9]*)/g,"<sup>$1</sup>")),text}getModifiedValue(value){return this.options.ticklabelratio&&(value*=this.options.ticklabelratio),this.options.shiftToZero&&(value-=this.getMinValue()*(this.options.ticklabelratio||1)),value}modifyUnit(value,mode){var text="",incr=this.incrTick,umin;switch(mode){case"time":var max=this.getModifiedValue(this.getMaxValue()),units=[[60,"min"],[3600,"h"],[3600*24,"d"]];if(3600>max?umin=0:max<3600*24?umin=1:max<30*(3600*24)&&(umin=2),!units[umin])return!1;value/=units[umin][0];var valueRounded=Math.floor(value);for(text=valueRounded+units[umin][1],umin--;incr<1*units[umin+1][0]&&-1<umin;)value=(value-valueRounded)*units[umin+1][0]/units[umin][0],valueRounded=Math.round(value),text+=` ${valueRounded}${units[umin][1]}`,umin--;break;case"time:min.sec":value/=60;var valueRounded=Math.floor(value),s=`${Math.round(60*(value-valueRounded))}`;s=1==s.length?`0${s}`:s,text=`${valueRounded}.${s}`;break;default:}return text}getExponentialFactor(){return this.options.exponentialFactor}setExponentialFactor(value){this.options.exponentialFactor=value}setExponentialLabelFactor(value){this.options.exponentialLabelFactor=value}getExponentialLabelFactor(){return this.options.exponentialLabelFactor}setName(name){return this.options.name=name,this}setLabel(label){return this.options.label=label,this}setLabelFont(font){return this.options.labelFont=font,this}getLabel(){return this.options.label}setSpan(_from,_to){return this.options.span=[_from,_to],this}getSpan(){return this.options.span}setLevel(level){return this._level=level,this}getLevel(){return this._level}setShift(shift){this.shift=shift}getShift(){return this.shift}setTickPosition(pos){switch(pos){case 3:case"outside":case _graphCore.default.TICKS_OUTSIDE:{pos=3;break}case 2:case"centered":case _graphCore.default.TICKS_CENTERED:{pos=2;break}case 1:case"inside":case _graphCore.default.TICKS_INSIDE:default:{pos=1;break}}switch(this.options.tickPosition=pos,this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;default:case 1:this.tickPx1=0,this.tickPx2=2;}return this}setGrids(on){return this.options.primaryGrid=on,this.options.secondaryGrid=on,this}setPrimaryGrid(on){return this.options.primaryGrid=on,this}setSecondaryGrid(on){return this.options.secondaryGrid=on,this}primaryGridOn(){return this.setPrimaryGrid(!0)}primaryGridOff(){return this.setPrimaryGrid(!1)}secondaryGridOn(){return this.setSecondaryGrid(!0)}secondaryGridOff(){return this.setSecondaryGrid(!1)}gridsOn(){return this.setGrids(!0)}gridsOff(){return this.setGrids(!1)}turnGridsOff(){return this.gridsOff(...arguments)}turnGridsOn(){return this.gridsOn(...arguments)}setColor(color="black"){return this.options.axisColor=color,this.options.primaryTicksColor=color,this.options.secondaryTicksColor=color,this.options.ticksLabelColor=color,this.options.primaryGridColor=color,this.options.secondaryGridColor=color,this.options.labelColor=color,this}setAxisColor(color){return this.options.axisColor=color,this}getAxisColor(){return this.options.axisColor||"black"}setTickLabelOffset(offsetValue){return this.options.tickLabelOffset=offsetValue,this}setPrimaryTicksColor(color){return this.options.primaryTicksColor=color,this}getPrimaryTicksColor(){return this.options.primaryTicksColor||"black"}setSecondaryTicksColor(color){return this.options.secondaryTicksColor=color,this}getSecondaryTicksColor(){return this.options.secondaryTicksColor||"black"}setTicksLabelColor(color){return this.options.ticksLabelColor=color,Array.isArray(this.ticksLabels)&&this.ticksLabels.forEach(tick=>{tick.setAttribute("fill",color)}),this}getTicksLabelColor(){return this.options.ticksLabelColor||"black"}setPrimaryGridColor(color){return this.options.primaryGridColor=color,this.setGridLinesStyle(),this}getPrimaryGridColor(){return this.options.primaryGridColor}setSecondaryGridColor(color){return this.options.secondaryGridColor=color,this.setGridLinesStyle(),this}getSecondaryGridColor(){return this.options.secondaryGridColor}setPrimaryGridWidth(width){return this.options.primaryGridWidth=width,this.setGridLinesStyle(),this}getPrimaryGridWidth(){return this.options.primaryGridWidth}setSecondaryGridWidth(width){return this.options.secondaryGridWidth=width,this.setGridLinesStyle(),this}getSecondaryGridWidth(){return this.options.secondaryGridWidth}setPrimaryGridOpacity(opacity){return this.options.primaryGridOpacity=opacity,this}getPrimaryGridOpacity(){return this.options.primaryGridOpacity}setSecondaryGridOpacity(opacity){return this.options.secondaryGridOpacity=opacity,this}getSecondaryGridOpacity(){return this.options.secondaryGridOpacity}setPrimaryGridDasharray(dasharray){return this.options.primaryGridDasharray=dasharray,this}getPrimaryGridDasharray(){return this.options.primaryGridDasharray}setSecondaryGridDasharray(dasharray){return this.options.secondaryGridDasharray=dasharray,this}getSecondaryGridDasharray(){return this.options.secondaryGridDasharray}setLabelColor(color){return this.options.labelColor=color,this}getLabelColor(){return this.options.labelColor}setTickContent(dom,val,options){if(options||(options={}),options.overwrite||!options.exponential)dom.textContent=options.overwrite||this.valueToText(val);else{var log=Math.round(Math.log(val)/Math.log(10)),unit=Math.floor(val*Math.pow(10,-log));dom.textContent=1==unit?"10":`${unit}x10`;var tspan=document.createElementNS(this.graph.ns,"tspan");tspan.textContent=log,tspan.setAttribute("font-size","0.7em"),tspan.setAttribute("dy",-5),dom.appendChild(tspan)}options.fontSize&&dom.setAttribute("font-size",options.fontSize)}isX(){return!1}isY(){return!1}setUnit(unit){return this.options.unit=unit,this}setUnitInTicks(bool){return this.options.unitInTicks=bool,this}setUnitWrapper(before,after){return this.options.unitWrapperBefore=before,this.options.unitWrapperAfter=after,this}setUnitDecade(on){return this.options.unitDecade=on,this}setScientific(on){return this.options.scientificScale=on,this}setScientificScaleExponent(scientificScaleExponent){return this.options.scientificScaleExponent=scientificScaleExponent,this}setEngineering(engineeringScaling){return this.options.scientificScale=engineeringScaling,this.options.engineeringScale=engineeringScaling,this}getEngineeringExponent(scientificExponent){return scientificExponent-=0<scientificExponent?scientificExponent%3:(3- -scientificExponent%3)%3,scientificExponent}setLogScale(log){return this.options.logScale=log,this}isZoomed(){return this.options.currentAxisMin!=this.getMinValue()&&this.options.currentAxisMax!=this.getMaxValue()}hasAxis(){return!1}getType(){return null}useKatexForLabel(use=!0){return this.options.useKatexForLabel=use,this}}Axis.prototype.getValue=Axis.prototype.getVal,Axis.prototype.getDeltaPx=Axis.prototype.getRelPx;_exports.default=Axis,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util);var ErrorBarMixin={makeBarY:function(coordY,origin,style){if(coordY&&void 0!==style){var width=util.isNumeric(style.width)?style.width:10;return` V ${coordY} m -${width/2} 0 h ${width} m -${width/2} 0 V ${origin} `}},makeBoxY:function(coordY,origin,style){return coordY&&void 0!==style?` m 5 0 V ${coordY} h -10 V ${origin} m 5 0 `:void 0},makeBarX:function(coordX,origin,style){if(coordX&&void 0!==style){var height=util.isNumeric(style.width)?style.width:10;return` H ${coordX} m 0 -${height/2} v ${height} m 0 -${height/2} H ${origin} `}},makeBoxX:function(coordX,origin,style){return coordX&&void 0!==style?` v 5 H ${coordX} v -10 H ${origin} v 5 `:void 0},setErrorBarStyle:function(errorstyle){return this.errorbarStyle=this._setErrorStyle(errorstyle),this},setErrorBoxStyle:function(errorstyle){return this.errorboxStyle=this._setErrorStyle(errorstyle),this},_setErrorStyle(errorstyles={}){var styles=[],pairs=[["y","top","bottom"],["x","left","right"]],makePath=style=>{style.dom=document.createElementNS(this.graph.ns,"path"),style.dom.setAttribute("fill",style.fillColor||"none"),style.dom.setAttribute("stroke",style.strokeColor||"black"),style.dom.setAttribute("stroke-opacity",style.strokeOpacity||1),style.dom.setAttribute("fill-opacity",style.fillOpacity||1),style.dom.setAttribute("stroke-width",style.strokeWidth||1),this.groupMain.appendChild(style.dom)},styles={};"string"==typeof errorstyles&&(errorstyles={});for(var j=0,l=pairs.length;j<l;j++){errorstyles.all&&(errorstyles[pairs[j][1]]=util.extend(!0,{},errorstyles.all),errorstyles[pairs[j][2]]=util.extend(!0,{},errorstyles.all)),errorstyles[pairs[j][0]]&&(errorstyles[pairs[j][1]]=util.extend(!0,{},errorstyles[pairs[j][0]]),errorstyles[pairs[j][2]]=util.extend(!0,{},errorstyles[pairs[j][0]]));for(var k=1;2>=k;k++)errorstyles[pairs[j][k]]&&(styles[pairs[j][k]]=errorstyles[pairs[j][k]],makePath(styles[pairs[j][k]]))}return styles},errorDrawInit:function(){this.errorboxStyle&&(this.errorboxStyle.paths={top:"",bottom:"",left:"",right:""}),this.errorbarStyle&&(this.errorbarStyle.paths={top:"",bottom:"",left:"",right:""})},errorAddPoint:function(index,dataX,dataY,xpx,ypx){let error;this.errorbarStyle&&((error=this.waveform.getErrorBarXBelow(index))&&(this.errorbarStyle.paths.left+=` M ${xpx} ${ypx}`,this.errorbarStyle.paths.left+=this.makeBarX(this.getX(dataX-error),xpx,this.errorbarStyle.left)),(error=this.waveform.getErrorBarXAbove(index))&&(this.errorbarStyle.paths.right+=` M ${xpx} ${ypx}`,this.errorbarStyle.paths.right+=this.makeBarX(this.getX(dataX+error),xpx,this.errorbarStyle.right)),(error=this.waveform.getErrorBarYBelow(index))&&(this.errorbarStyle.paths.bottom+=` M ${xpx} ${ypx}`,this.errorbarStyle.paths.bottom+=this.makeBarY(this.getY(dataY-error),ypx,this.errorbarStyle.bottom)),(error=this.waveform.getErrorBarYAbove(index))&&(this.errorbarStyle.paths.top+=` M ${xpx} ${ypx}`,this.errorbarStyle.paths.top+=this.makeBarY(this.getY(dataY+error),ypx,this.errorbarStyle.top))),this.errorboxStyle&&((error=this.waveform.getErrorBoxXBelow(index))&&(this.errorboxStyle.paths.left+=` M ${xpx} ${ypx}`,this.errorboxStyle.paths.left+=this.makeBoxX(this.getX(dataX-error),xpx,this.errorboxStyle.left)),(error=this.waveform.getErrorBoxXAbove(index))&&(this.errorboxStyle.paths.right+=` M ${xpx} ${ypx}`,this.errorboxStyle.paths.right+=this.makeBoxX(this.getX(dataX+error),xpx,this.errorboxStyle.right)),(error=this.waveform.getErrorBoxYBelow(index))&&(this.errorboxStyle.paths.bottom+=` M ${xpx} ${ypx}`,this.errorboxStyle.paths.bottom+=this.makeBoxY(this.getY(dataY-error),ypx,this.errorboxStyle.bottom)),(error=this.waveform.getErrorBoxYAbove(index))&&(this.errorboxStyle.paths.top+=` M ${xpx} ${ypx}`,this.errorboxStyle.paths.top+=this.makeBoxY(this.getY(dataY+error),ypx,this.errorboxStyle.top)))},errorAddPointBarChart:function(j,posY,xpx,ypx){var error;this.error&&(error=this.error[j])&&this.doErrorDraw("y",error,posY,ypx,xpx,ypx)},errorDraw:function(){if(this.errorbarStyle)for(var j in this.errorbarStyle.paths)this.errorbarStyle[j]&&this.errorbarStyle[j].dom&&this.errorbarStyle[j].dom.setAttribute("d",this.errorbarStyle.paths[j]);if(this.errorboxStyle)for(var j in this.errorboxStyle.paths)this.errorboxStyle[j]&&this.errorboxStyle[j].dom&&this.errorboxStyle[j].dom.setAttribute("d",this.errorboxStyle.paths[j])}};_exports.default=ErrorBarMixin,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(5),__webpack_require__(0),__webpack_require__(6)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_EventEmitter,util,_waveform){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_EventEmitter=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_EventEmitter),util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util);const defaultOptions={redrawShapesAfterDraw:!1};class Serie extends _EventEmitter.default{constructor(graph,name,options,defaultInherited){super(...arguments),this.options=util.extend(!0,{},defaultOptions,defaultInherited,options),this.graph=graph,this.name=name,this.groupMain=document.createElementNS(this.graph.ns,"g"),this._symbolLegendContainer=document.createElementNS(this.graph.ns,"g")}postInit(){}draw(){}beforeDraw(){}afterDraw(){this.options.redrawShapesAfterDraw&&this.graph.getShapesOfSerie(this).forEach(shape=>{shape.redraw()}),this.emit("draw")}setData(data){if(data instanceof _waveform.Waveform)return this.setWaveform(data);throw"Setting data other than waveforms in not supported by default. You must implemented this method in the inherited class."}_addData(){return[]}clearData(){return this.setData(new _waveform.Waveform),this}getData(){return this.data}setOptions(options){this.options=options||{}}setOption(name,value){this.options[name]=value}kill(noLegendUpdate){return this.graph.removeSerieFromDom(this),this.graph._removeSerie(this),this.graph.legend&&!noLegendUpdate&&this.graph.legend.update(),this.graph=void 0,this}hide(hideShapes=this.options.bindShapesToDisplayState,mute=!1){if(this.hidden=!0,this.groupMain.setAttribute("display","none"),this.getSymbolForLegend().setAttribute("opacity",.5),this.getTextForLegend().setAttribute("opacity",.5),this.hideImpl(),hideShapes)for(var shapes=this.graph.getShapesOfSerie(this),i=0,l=shapes.length;i<l;i++)shapes[i].hide();return mute||this.emit("hide"),(this.getXAxis().doesHideWhenNoSeriesShown()||this.getYAxis().doesHideWhenNoSeriesShown())&&this.graph.draw(!0),this.graph.hasPlugin("peakPicking")&&this.graph.getPlugin("peakPicking").getSerie()==this&&this.graph.getPlugin("peakPicking").hidePeakPicking(),this}show(showShapes=this.options.bindShapesToDisplayState,mute=!1){if(this.hidden=!1,this.groupMain.setAttribute("display","block"),this.getSymbolForLegend().setAttribute("opacity",1),this.getTextForLegend().setAttribute("opacity",1),this.showImpl(),this.draw(!0),showShapes)for(var shapes=this.graph.getShapesOfSerie(this),i=0,l=shapes.length;i<l;i++)shapes[i].show();return mute||this.emit("show"),(this.getXAxis().doesHideWhenNoSeriesShown()||this.getYAxis().doesHideWhenNoSeriesShown())&&this.graph.draw(!0),this.graph.hasPlugin("peakPicking")&&this.graph.getPlugin("peakPicking").getSerie()==this&&this.graph.getPlugin("peakPicking").showPeakPicking(),this}hideImpl(){}showImpl(){}toggleDisplay(){return this.isShown()?this.hide():this.show(),this}isShown(){return!this.hidden}axisCheck(){if(!this.getXAxis()||!this.getYAxis())throw"No axis exist for this serie. Check that they were properly assigned";if(isNaN(this.getXAxis().getCurrentMin())||isNaN(this.getXAxis().getCurrentMax())||isNaN(this.getYAxis().getCurrentMin())||isNaN(this.getYAxis().getCurrentMax()))throw"Axis min and max values are not defined. Try autoscaling"}getX(val){return(val=this.getXAxis().getPx(val))-val%.2}getY(val){return(val=this.getYAxis().getPx(val))-val%.2}isSelected(){return this.selected||"unselected"!==this.selectionType}_checkX(val){this.minX=Math.min(this.minX,val),this.maxX=Math.max(this.maxX,val)}_checkY(val){this.minY=Math.min(this.minY,val),this.maxY=Math.max(this.maxY,val)}getName(){return this.name}autoAxis(){return this.isFlipped()?(this.setXAxis(this.graph.getYAxis()),this.setYAxis(this.graph.getXAxis())):(this.setXAxis(this.graph.getXAxis()),this.setYAxis(this.graph.getYAxis())),this.graph.updateDataMinMaxAxes(),this}autoAxes(){return this.autoAxis(...arguments)}setXAxis(axis){return this.xaxis="number"==typeof axis?this.isFlipped()?this.graph.getYAxis(axis):this.graph.getXAxis(axis):axis,this.graph.updateDataMinMaxAxes(),this}setYAxis(axis){return"number"==typeof axis?this.xaxis=this.isFlipped()?this.graph.getXAxis(axis):this.graph.getYAxis(axis):this.yaxis=axis,this.graph.updateDataMinMaxAxes(),this}setAxes(){for(var i=0;2>i;i++)arguments[i]&&this[arguments[i].isX()?"setXAxis":"setYAxis"](arguments[i]);return this.graph.updateDataMinMaxAxes(),this}getXAxis(){return this.xaxis}getYAxis(){return this.yaxis}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getWaveform(){return this.waveform}getWaveforms(){return[this.waveform]}setWaveform(waveform){if(!(waveform instanceof _waveform.Waveform))throw console.trace(),console.error(waveform),new Error("Cannot assign waveform to serie. Waveform is not of the proper Waveform instance");return this.waveform=waveform,this.minX=this.waveform.getXMin(),this.maxX=this.waveform.getXMax(),this.minY=this.waveform.getMin(),this.maxY=this.waveform.getMax(),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}getSymbolForLegend(){if(!this.lineForLegend){var line=document.createElementNS(this.graph.ns,"line");this.applyLineStyle(line),line.setAttribute("x1",5),line.setAttribute("x2",25),line.setAttribute("y1",0),line.setAttribute("y2",0),line.setAttribute("cursor","pointer"),this.lineForLegend=line}return this.lineForLegend}_getSymbolForLegendContainer(){return this._symbolLegendContainer}setLegendSymbolStyle(){this.applyLineStyle(this.getSymbolForLegend())}updateStyle(){this.setLegendSymbolStyle(),this.graph.updateLegend()}getTextForLegend(){if(!this.textForLegend){var text=document.createElementNS(this.graph.ns,"text");text.setAttribute("cursor","pointer"),text.textContent=this.getLabel(),this.textForLegend=text}return this.textForLegend}getIndex(){return this.graph.series.indexOf(this)}getLabel(){return this.options.label||this.name}setLabel(label){return this.options.label=label,this.textForLegend&&(this.textForLegend.textContent=label),this.graph.requireLegendUpdate(),this}setFlip(flipped){return this.options.flip=flipped,this}getFlip(){return this.options.flip}isFlipped(){return this.options.flip}setLayer(layerIndex){let newLayer=parseInt(layerIndex)||1;return newLayer!==this.options.layer&&(this.options.layer=newLayer,this.graph.appendSerieToDom(this)),this}getLayer(){return this.options.layer||1}setStyle(style,selectionType="unselected"){this.styles[selectionType]=style,this.styleHasChanged(selectionType)}styleHasChanged(selectionType="unselected"){if(this._changedStyles=this._changedStyles||{},!1===selectionType)for(var i in this._changedStyles)this._changedStyles[i]=!1;else this._changedStyles[selectionType||"unselected"]=!0;return this.graph.requireLegendUpdate(),this}hasStyleChanged(selectionType){return this._changedStyles=this._changedStyles||{},this._changedStyles[selectionType||"unselected"]}dataHasChanged(arg){return this._dataHasChanged=void 0===arg||arg,this}hasDataChanged(){return this._dataHasChanged}setInfo(prop,value){return this.infos=this.infos||{},this.infos[prop]=value,this}getInfo(prop){return(this.infos||{})[prop]}setAdditionalData(data){return this.additionalData=data,this}getAdditionalData(){return this.additionalData}select(selectName){return"unselected"==selectName?this:(this.selected=!0,this)}unselect(){return this.selected=!1,this}enableTracking(){return this._tracker=!0,this}disableTracking(){return this._trackerDom&&(this._trackerDom.remove(),this._trackerDom=null),this._tracker=!1,this}allowTrackingLine(options){options=options||{},this.graph.addSerieToTrackingLine(this,options)}getMarkerForLegend(){return!1}get type(){return this._type}getType(){return this._type}excludeFromLegend(){return this._excludedFromLegend=!0,this}includeInLegend(){return this._excludedFromLegend=!1,this}setDataIndices(categories,nb){this.categoryIndices=categories,this.nbCategories=nb}hasErrors(){return!!this.waveform&&this.waveform.hasErrorBars()}}_exports.default=Serie,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(8)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphAxis){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphAxis=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphAxis);class AxisX extends _graphAxis.default{constructor(graph,topbottom,options={}){super(graph,topbottom,options),this.top="top"==topbottom}getAxisPosition(){if(!this.options.display)return 0;let size;return 0==this.options.tickLabelOffset?(size=1==this.options.tickPosition?8:20,size+=1*this.graph.options.fontSize):size=1==this.options.tickPosition?0:12,this.getLabel()&&(size+=this.graph.options.fontSize),size}isX(){return!0}isY(){return!1}forceHeight(height){return this.options.forcedHeight=height,this}setShift(shift){this.shift=shift;void 0!==this.getShift()&&this.graph.getDrawingHeight()&&this.group.setAttribute("transform",`translate(0 ${this.floating?this.getShift():this.top?this.shift:this.graph.getDrawingHeight()-this.shift})`)}getMaxSizeTick(){return(this.top?-1:1)*(1==this.options.tickPosition?10:10)}drawTick(value,level,options,forcedPos){var self=this,val;if(val=forcedPos||this.getPos(value),!(null==val||isNaN(val))){var tick=this.nextTick(level,tick=>{tick.setAttribute("y1",(self.top?1:-1)*self.tickPx1*self.tickScaling[level]),tick.setAttribute("y2",(self.top?1:-1)*self.tickPx2*self.tickScaling[level]),1==level?tick.setAttribute("stroke",self.getPrimaryTicksColor()):tick.setAttribute("stroke",self.getSecondaryTicksColor())});if(tick.setAttribute("x1",val),tick.setAttribute("x2",val),this.nextGridLine(1==level,val,val,0,this.graph.getDrawingHeight()),1==level){var tickLabel=this.nextTickLabel(tickLabel=>{tickLabel.setAttribute("y",(self.top?-1:1)*((1==self.options.tickPosition?8:20)+(self.top?10:0))+this.options.tickLabelOffset),tickLabel.setAttribute("text-anchor","middle"),"black"!==self.getTicksLabelColor()&&tickLabel.setAttribute("fill",self.getTicksLabelColor()),tickLabel.style.dominantBaseline="hanging"});tickLabel.setAttribute("x",val),this.setTickContent(tickLabel,value,options)}return[tick,tickLabel]}}drawLabel(){"black"!==this.getLabelColor()&&this.label.setAttribute("fill",this.getLabelColor()),this.options.labelFont&&this.label.setAttribute("font-family",this.options.labelFont),this.label.setAttribute("text-anchor","middle"),this.label.setAttribute("style","display: initial;"),this.label.setAttribute("x",Math.abs(this.getMaxPx()+this.getMinPx())/2),this.label.setAttribute("y",(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.labelTspan.textContent=this.getLabel()}draw(){var tickWidth=super.draw(...arguments);return this.drawSpecifics(),tickWidth}drawSpecifics(){this.drawLabel(),this.line.setAttribute("x1",this.getMinPx()),this.line.setAttribute("x2",this.getMaxPx()),this.line.setAttribute("y1",0),this.line.setAttribute("y2",0),this.line.setAttribute("stroke",this.getAxisColor()),this.top||(this.labelTspan.style.dominantBaseline="hanging",this.expTspan.style.dominantBaseline="hanging",this.expTspanExp.style.dominantBaseline="hanging",this.unitTspan.style.dominantBaseline="hanging");var span=this.getSpan();this.line.setAttribute("marker-start",this.options.splitMarks&&0!=span[0]?`url(#horionzalsplit_${this.graph.getId()})`:""),this.line.setAttribute("marker-end",this.options.splitMarks&&1!=span[1]?`url(#horionzalsplit_${this.graph.getId()})`:"")}_drawLine(pos,line){let px=this.getPx(pos);return line?line.setAttribute("display","initial"):line=document.createElementNS(this.graph.ns,"line"),line.setAttribute("x1",px),line.setAttribute("x2",px),line.setAttribute("y1",0),line.setAttribute("y2",this.graph.drawingSpaceHeight),line.setAttribute("stroke","black"),this.group.appendChild(line),line}_hideLine(line){line&&line.setAttribute("display","none")}handleMouseMoveLocal(x){x-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(x)}setMinMaxFlipped(){var interval=this.maxPx-this.minPx;if(!isNaN(interval)){var maxPx=interval*this.options.span[1]+this.minPx-this.options.marginMax,minPx=interval*this.options.span[0]+this.minPx+this.options.marginMin;this.minPxFlipped=this.isFlipped()?maxPx:minPx,this.maxPxFlipped=this.isFlipped()?minPx:maxPx}}getZProj(zValue){return zValue*this.graph.options.zAxis.shiftX}}_exports.default=AxisX,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(9),__webpack_require__(10)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphMixinErrorbars,_graphSerie){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphMixinErrorbars=_interopRequireDefault(_graphMixinErrorbars),_graphSerie=_interopRequireDefault(_graphSerie);const defaultOptions={markers:!0,markerStyles:{unselected:{default:{shape:"circle",cx:0,cy:0,r:3,stroke:"transparent",fill:"black"}},selected:{default:{r:4}}}};class SerieScatter extends _graphSerie.default{constructor(graph,name,options,defaultInherited){super(graph,name,options,util.extend(!0,{},defaultOptions,defaultInherited)),this._type="scatter",util.mapEventEmission(this.options,this),this.shapes=[],this.shapesDetails=[],this.shapes=[],this.keys=[],this.groupMarkers=document.createElementNS(this.graph.ns,"g"),this.groupMain.appendChild(this.groupMarkers),this.groupMarkers.addEventListener("mouseenter",e=>{var id=parseInt(e.target.parentElement.getAttribute("data-shapeid"));isNaN(id)||(this.options.selectMarkerOnHover&&this.selectMarker(id,"selected"),this.emit("mouseOverMarker",id,this.waveform.getX(id),this.waveform.getY(id)))},!0),this.groupMarkers.addEventListener("mouseout",e=>{var id=parseInt(e.target.parentElement.getAttribute("data-shapeid"));isNaN(id)||(this.options.selectMarkerOnHover&&this.selectMarker(id,"unselected"),this.emit("mouseOutMarker",id,this.waveform.getX(id),this.waveform.getY(id)))})}setDataCategory(data){let minY=+Infinity,maxY=-Infinity;for(let dataCategory of data)this._checkY(dataCategory.y.getMaxY()),this._checkY(dataCategory.y.getMinY());return this.data=data,this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}empty(){for(;this.groupMarkers.firstChild;)this.groupMarkers.removeChild(this.groupMarkers.firstChild)}getSymbolForLegend(){if(this.markers){const container=super._getSymbolForLegendContainer();this.shapeLegend||(this.shapeLegend=this._makeMarker(container,this.options.markerStyles.unselected.default),container.appendChild(this.shapeLegend));var style=this.getMarkerStyle("unselected",-1,!0);for(var i in style[-1])"shape"!=i&&this.shapeLegend.setAttribute(i,style[-1][i]);return container}}setStyle(style,styleName="unselected"){return this.setMarkerStyle(style,void 0,styleName)}setMarkerStyle(all,modifiers,mode="unselected"){return"string"==typeof modifiers&&(mode=modifiers,modifiers=!1),this.options.markerStyles[mode]=this.options.markerStyles[mode]||{},this.options.markerStyles[mode].all=all,this.options.markerStyles[mode].modifiers=modifiers,this.styleHasChanged(mode),this}draw(force){if(!force&&!this.hasDataChanged()&&!this.hasStyleChanged("unselected")||!this.options.markers)return;let xpx,ypx,j,k;const isCategory="category"==this.getXAxis().getType(),keys=[];if(this.dataHasChanged(!1),this.styleHasChanged(!1),this.groupMain.removeChild(this.groupMarkers),j=0,k=0,this.hasErrors()&&this.errorDrawInit(),isCategory){for(let k=0;j<this.data.length;j++)if(this.categoryIndices.hasOwnProperty(this.data[j].x)){this.error;for(var n=0,l=this.data[j].y.getLength();n<l;n++)ypx=this.getY(this.data[j].y.getY(n)),xpx=this.getX(n/(l-1)*(.8/this.nbCategories)+this.categoryIndices[this.data[j].x]+.1/this.nbCategories),n++,this.shapesDetails[k]=this.shapesDetails[k]||[],this.shapesDetails[k][0]=xpx,this.shapesDetails[k][1]=ypx,keys.push(k),k++}}else for(;j<this.waveform.getLength();j++){if(this.waveform.getX(j)<this.getXAxis().getCurrentMin()||this.waveform.getX(j)>this.getXAxis().getCurrentMax()||this.waveform.getY(j)<this.getYAxis().getCurrentMin()||this.waveform.getY(j)>this.getYAxis().getCurrentMax()){this.shapes[j]&&(this.shapes[j].setAttribute("display","none"),this.shapes[j]._hidden=!0);continue}else this.shapes[j]&&this.shapes[j]._hidden&&(this.shapes[j].setAttribute("display","initial"),this.shapes[j]._hidden=!1);xpx=this.getX(this.waveform.getX(j)),ypx=this.getY(this.waveform.getY(j)),this.hasErrors()&&this.errorAddPoint(j,this.waveform.getX(j),this.waveform.getY(j),xpx,ypx),this.shapesDetails[j]=this.shapesDetails[j]||[],this.shapesDetails[j][0]=xpx,this.shapesDetails[j][1]=ypx,keys.push(j)}this.hasErrors()&&this.errorDraw(),this.applyMarkerStyle(this.selectionType||"unselected",keys),this.keys=keys,this.groupMain.appendChild(this.groupMarkers)}_makeMarker(group,shape){var el=document.createElementNS(this.graph.ns,shape.shape);return group.appendChild(el),el}getMarkerStyle(selection,index,noSetPosition){var selection=selection||"unselected",styles={},indices;"number"==typeof index?indices=[index]:Array.isArray(index)&&(indices=index);var shape,index,modifier,style;this.options.markerStyles[selection]||(selection="unselected");var styleAll=this.options.markerStyles[selection].all;styleAll||(styleAll=this.options.markerStyles[selection].default),"function"==typeof styleAll&&(styleAll=styleAll());const defaultStyle=this.options.markerStyles[selection].default?this.options.markerStyles[selection].default:this.options.markerStyles.unselected.default;styleAll=Object.assign({},defaultStyle,styleAll);for(var i=0,l=indices.length;i<l;i++){if(index=indices[i],shape=this.shapes[index],(modifier=this.options.markerStyles[selection].modifiers)&&("function"==typeof modifier||modifier[index])){if("function"!=typeof modifier)modifier[index]&&(style=modifier[index]);else if(style=modifier(this.waveform.getX(index),this.waveform.getY(index),index,shape,styleAll),!1===style)continue;styles[index]=Object.assign({},styleAll,style)}else styles[index]=void 0===styleAll?this.options.markerStyles[selection].default:styleAll;if(styles[index]||(styles[index]=styleAll),!shape){if(!styles[index].shape)throw console.error(style),`No shape was defined with the style "${style}".`;var g=document.createElementNS(this.graph.ns,"g");g.setAttribute("data-shapeid",index),this.shapes[index]=this._makeMarker(g,styles[index]),this.groupMarkers.appendChild(g),shape=this.shapes[index]}noSetPosition||this.shapesDetails[index][0]!==this.shapesDetails[index][0]||this.shapesDetails[index][1]!==this.shapesDetails[index][1]||shape.parentNode.setAttribute("transform",`translate(${this.shapesDetails[index][0]}, ${this.shapesDetails[index][1]})`)}return styles}applyMarkerStyle(selection,index,noSetPosition){var styles=this.getMarkerStyle(selection,index,noSetPosition),i,j;for(i in styles)for(j in styles[i])"shape"!==j&&this.shapes[i]&&(styles[i][j]?this.shapes[i].setAttribute(j,styles[i][j]):this.shapes[i].removeAttribute(j))}unselectMarker(index){this.selectMarker(index,!1)}selectMarker(index,setOn,selectionType){if(!(this.shapesDetails[index][2]&&this.shapesDetails[index][2]==selectionType)){if("string"==typeof setOn&&(selectionType=setOn,setOn=void 0),Array.isArray(index))return this.selectMarkers(index);if(this.shapes[index]&&this.shapesDetails[index])if((this.shapesDetails[index][2]||!1===setOn)&&!0!==setOn){var selectionStyle=this.shapesDetails[index][2];this.shapesDetails[index][2]=!1;var allStyles=this.getMarkerStyle(selectionStyle,index,!0);for(var i in allStyles[index])this.shapes[index].removeAttribute(i);this.applyMarkerStyle("unselected",index,!0)}else selectionType=selectionType||"selected",this.shapesDetails[index][2]=selectionType,this.applyMarkerStyle(selectionType,index,!0)}}select(selectionType){this.selectionType=selectionType,this.applyMarkerStyle(this.selectionType||"selected",this.keys),super.select(selectionType)}unselect(){this.selectionType="unselected",this.applyMarkerStyle(this.selectionType||"unselected",this.keys),super.unselect()}setMarkers(bln=!0){return this.options.markers=bln,this}showMarkers(){if(!this.options.markers)return this.options.markers=!0,this.groupMarkers.setAttribute("display","initial"),this.shapeLegend&&this.shapeLegend.setAttribute("display","initial"),this}hideMarkers(){if(this.options.markers)return this.options.markers=!1,this.groupMarkers.setAttribute("display","none"),this.shapeLegend&&this.shapeLegend.setAttribute("display","none"),this}getUsedCategories(){return"object"==typeof this.data[0]?this.data.map(d=>d.x):[]}getClosestPointToXY(valX=this.getXAxis().getMouseVal(),valY=this.getYAxis().getMouseVal(),withinPxX=0,withinPxY=0,useAxis=!1,usePx=!0){const xValAllowed=this.getXAxis().getRelVal(withinPxX),yValAllowed=this.getYAxis().getRelVal(withinPxY),closestPointIndex=this.waveform.findWithShortestDistance({x:valX,y:valY,xMax:xValAllowed,yMax:yValAllowed,interpolation:!1,scaleX:usePx?1/this.getXAxis().getRelVal(1):1,scaleY:usePx?1/this.getYAxis().getRelVal(1):1});return{indexBefore:closestPointIndex,indexAfter:closestPointIndex,xBefore:this.waveform.getX(closestPointIndex),xAfter:this.waveform.getX(closestPointIndex),yBefore:this.waveform.getY(closestPointIndex),yAfter:this.waveform.getX(closestPointIndex),xExact:valX,indexClosest:closestPointIndex,interpolatedY:this.waveform.getY(closestPointIndex),xClosest:this.waveform.getX(closestPointIndex),yClosest:this.waveform.getY(closestPointIndex)}}}util.mix(SerieScatter,_graphMixinErrorbars.default);_exports.default=SerieScatter,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphShape){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphShape=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShape);class ShapeLine extends _graphShape.default{constructor(graph,options){super(graph,options)}createDom(){this._dom=document.createElementNS(this.graph.ns,"line"),this.getStrokeColor()||this.setStrokeColor("black"),this.getStrokeWidth()===void 0&&this.setStrokeWidth(1)}createHandles(){this._createHandles(2,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}applyPosition(){var position=this.calculatePosition(0),position2=this.calculatePosition(1);if(position&&position.x&&position.y)return this.setDom("x2",position.x),this.setDom("y2",position.y),this.setDom("y1",position2.y),this.setDom("x1",position2.x),this.currentPos2x=position2.x,this.currentPos2y=position2.y,this.currentPos1x=position.x,this.currentPos1y=position.y,!0}handleMouseMoveImpl(e,deltaX,deltaY){if(!this.isLocked()){var pos=this.getPosition(0),pos2=this.getPosition(1),posToChange;if(1==this.handleSelected?posToChange=pos:2==this.handleSelected&&(posToChange=pos2),posToChange&&(!this._data.vertical&&posToChange.deltaPosition("x",deltaX,this.getXAxis()),!this._data.horizontal&&posToChange.deltaPosition("y",deltaY,this.getYAxis())),this.moving&&(console.log(this._data),pos.x&&!this._data.noX&&pos.deltaPosition("x",deltaX,this.getXAxis()),pos.y&&!this._data.noY&&pos.deltaPosition("y",deltaY,this.getYAxis()),pos2.x&&!this._data.noX&&pos2.deltaPosition("x",deltaX,this.getXAxis()),pos2.y&&!this._data.noY&&pos2.deltaPosition("y",deltaY,this.getYAxis())),this._data.forcedCoords){var forced=this._data.forcedCoords;void 0!==forced.y&&("function"==typeof forced.y?pos2.y=pos.y=forced.y(this):(pos2.y=forced.y,pos.y=forced.y)),void 0!==forced.x&&("function"==typeof forced.x?pos2.x=pos.x=forced.x(this):(pos2.x=forced.x,pos.x=forced.x))}return this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute("x",this.currentPos1x),this.handles[1].setAttribute("y",this.currentPos1y),this.handles[2].setAttribute("x",this.currentPos2x),this.handles[2].setAttribute("y",this.currentPos2y))}setEventReceptacle(){this.currentPos1x&&(!this.rectEvent&&(this.rectEvent=document.createElementNS(this.graph.ns,"line"),this.rectEvent.setAttribute("pointer-events","stroke"),this.rectEvent.setAttribute("stroke","transparent"),this.rectEvent.jsGraphIsShape=this,this.group.appendChild(this.rectEvent)),this.rectEvent.setAttribute("x1",this.currentPos1x),this.rectEvent.setAttribute("y1",this.currentPos1y),this.rectEvent.setAttribute("x2",this.currentPos2x),this.rectEvent.setAttribute("y2",this.currentPos2y),this.rectEvent.setAttribute("stroke-width",this.getProp("strokeWidth")+2))}}_exports.default=ShapeLine,module.exports=exports.default})},function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;class LM{constructor(gH,gnadj,gnpnts,hook){this.LMITER=100,this.LMBOOST=2,this.LMSHRINK=.1,this.LAMBDAZERO=.001,this.LAMBDAMAX=1e9,this.LMTOL=1e-12,this.BIGVAL=9e99,this.sos,this.sosprev,this.lambda,this.myH=null,this.nadj=0,this.npts=0,this.delta,this.beta,this.alpha,this.amatrix,this.myH=gH,this.nadj=gnadj,this.npts=gnpnts,this.delta=Array(this.nadj).fill(0),this.beta=Array(this.nadj).fill(0),this.alpha=Array(this.nadj).fill(0),this.amatrix=Array(this.nadj).fill(0),this.alpha=this.alpha.map(()=>Array(this.nadj)),this.amatrix=this.amatrix.map(()=>Array(this.nadj)),this.lambda=this.LAMBDAZERO;var niter=0,done=!1;do done=this.bLMiter(),hook&&hook(this.myH.params),niter++;while(!done&&niter<this.LMITER)}bLMiter(){for(var k=0;k<this.nadj;k++)this.delta[k]=0;if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error("  bLMiter finds faulty initial nudge()"),!1;if(this.sosprev=this.sos,this.myH.log(`  bLMiter..SumOfSquares= ${this.sos}`),!this.myH.buildJacobian())return console.error("  bLMiter finds buildJacobian()=false"),!1;for(var k=0;k<this.nadj;k++){this.beta[k]=0;for(var i=0;i<this.npts;i++)this.beta[k]-=this.myH.getResidualElement(i)*this.myH.getJacobianElement(i,k)}for(var k=0;k<this.nadj;k++)for(var j=0;j<this.nadj;j++){this.alpha[j][k]=0;for(var i=0;i<this.npts;i++)this.alpha[j][k]+=this.myH.getJacobianElement(i,j)*this.myH.getJacobianElement(i,k)}var rrise=0;do{for(var k=0;k<this.nadj;k++)for(var j=0;j<this.nadj;j++)this.amatrix[j][k]=this.alpha[j][k]+(j==k?this.lambda:0);this.gaussj(this.amatrix,this.nadj);for(var k=0;k<this.nadj;k++){this.delta[k]=0;for(var j=0;j<this.nadj;j++)this.delta[k]+=this.amatrix[j][k]*this.beta[j]}if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error("  LMinner failed SOS step"),!1;if(rrise=(this.sos-this.sosprev)/(1+this.sos),0>=rrise){this.lambda*=this.LMSHRINK;break}for(var q=0;q<this.nadj;q++)this.delta[q]*=-1;if(this.myH.nudge(this.delta),rrise<this.LMTOL)break;this.lambda*=this.LMBOOST}while(this.lambda<this.LAMBDAMAX);return rrise>-this.LMTOL||this.lambda>this.LAMBDAMAX}gaussj(a,N){var det=1,ik=Array(100),jk=Array(100),big,save,i,j,k,L;for(k=0;k<N;k++){for(big=0,i=k;i<N;i++)for(j=k;j<N;j++)Math.abs(big)<=Math.abs(a[i][j])&&(big=a[i][j],ik[k]=i,jk[k]=j);if(0==big)return 0;if(i=ik[k],i>k)for(j=0;j<N;j++)save=a[k][j],a[k][j]=a[i][j],a[i][j]=-save;if(j=jk[k],j>k)for(i=0;i<N;i++)save=a[i][k],a[i][k]=a[i][j],a[i][j]=-save;for(i=0;i<N;i++)i!=k&&(a[i][k]=-a[i][k]/big);for(i=0;i<N;i++)for(j=0;j<N;j++)i!=k&&j!=k&&(a[i][j]+=a[i][k]*a[k][j]);for(j=0;j<N;j++)j!=k&&(a[k][j]/=big);a[k][k]=1/big,det*=big}for(L=0;L<N;L++){if(k=N-L-1,j=ik[k],j>k)for(i=0;i<N;i++)save=a[i][k],a[i][k]=-a[i][j],a[i][j]=save;if(i=jk[k],i>k)for(j=0;j<N;j++)save=a[k][j],a[k][j]=-a[i][j],a[i][j]=save}return det}}_exports.default=class{constructor(options){this.DELTAP=1e-6,this.BIGVAL=9e99,this.WEIGHT=1,this.setYData(options.dataY),this.setXData(options.dataX),this.setWeight(options.weight),this.setInitialParams(options.params),options.subsetIndex&&this.setSubset(...options.subsetIndex),this.setFunction(options.function),options.progress&&this.hookIteration(options.progress),this.options=options}setYData(data){this.data=data}setXData(data){this.dataX=data}setWeight(weight){this.weight=weight}setInitialParams(params){this.parms=params,this.parms=this.parms.map(el=>"function"==typeof el?el(this.data,this.dataX):el),this.NPARMS=params.length}setSubset(fromIndex,toIndex){fromIndex!==void 0&&toIndex!==void 0&&(this._from=fromIndex,this._to=toIndex)}hookIteration(f){this._hookIteration=params=>{let data=this.buildFit(params,200);f(data)}}setFunction(func){this._func=func}init(){if(void 0!==this._from&&void 0!==this._to){if(this._from>=this._to)throw"Impossible to fit negative subranges. The starting index must be lower than the ending index";if(this.NPTS=this._to-this._from+1,this.data&&this.data.getLength()<=this._to)throw`Wave Y has not enough point to be fitted to subrange [${this._from}, ${this._to}]`;if(0>this._from)throw"Impossible to fit a subrange with negative indices"}else this.NPTS=this.data.getLength(),this._from=0,this._to=this.data.getLength()-1;if(this.dataX&&this.dataX.getLength()<=this._to)throw`Wave X has not enough point to be fitted to subrange [${this._from}, ${this._to}]`;this.arrY=this.data.getDataY(),this.arrX=this.dataX?this.dataX.getDataY():this.data.getDataX(),this.resid=Array(this.NPTS).fill(0),this.jac=Array(this.NPTS).fill(0),this.jac=this.jac.map(()=>Array(this.NPARMS))}fit(){return this.log(`Starting the fit with initial parameter list {${this.parms.join()}};`),new LM(this,this.NPARMS,this.NPTS,this._hookIteration),this.log(`Fit successful. Output parameters {${this.parms.join()}};`),this._result=this.buildFit(this.parms,200),this.options.done&&this.options.done(this.parms,this._result),this._result}func(x,param){return this._func(x,param)}computeResiduals(){for(var sumsq=0,i=0;i<this.NPTS;i++)this.resid[i]=(this.func(this.arrX[i+this._from],this.parms)-this.arrY[i+this._from])*this.WEIGHT,sumsq+=this.resid[i]*this.resid[i];return sumsq}log(message){this.options.log&&console.log(message)}nudge(dp){for(var j=0;j<this.NPARMS;j++)this.parms[j]+=dp[j];return this.computeResiduals()}buildJacobian(){for(var delta=Array(this.NPARMS),FACTOR=.5/this.DELTAP,d=0,j=0;j<this.NPARMS;j++){for(var k=0;k<this.NPARMS;k++)delta[k]=k==j?this.DELTAP:0;if(d=this.nudge(delta),d==this.BIGVAL)throw"Bad dBuildJacobian() exit 2";for(var i=0;i<this.NPTS;i++)this.jac[i][j]=this.getResidualElement(i);for(var k=0;k<this.NPARMS;k++)delta[k]=k==j?-2*this.DELTAP:0;if(d=this.nudge(delta),d==this.BIGVAL)throw"Bad dBuildJacobian(). exit 3";for(var i=0;i<this.NPTS;i++)this.jac[i][j]-=this.getResidualElement(i);for(var i=0;i<this.NPTS;i++)this.jac[i][j]*=FACTOR;for(var k=0;k<this.NPARMS;k++)delta[k]=k==j?this.DELTAP:0;if(d=this.nudge(delta),d==this.BIGVAL)throw"Bad dBuildJacobian(). exit 4"}return!0}getResidualElement(i){return this.resid[i]}getJacobianElement(i,j){return this.jac[i][j]}buildFit(parms,length){let x;if(!length)x=this.arrX;else{const xmin=this.dataX.getMin(this._from,this._to),xmax=this.dataX.getMax(this._from,this._to);x=Array(length).fill(0).map((el,index)=>index*(xmax-xmin)/(length-1)+xmin)}for(var fit=Array(x.length),i=0,l=x.length;i<l;i++)fit[i]=this.func(x[i],this.parms);let waveformResult=this.options.waveform;return waveformResult.setData(fit,x),waveformResult}},module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(8)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphAxis){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphAxis=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphAxis);class AxisY extends _graphAxis.default{constructor(graph,leftright,options){super(graph,leftright,options),this.leftright=leftright,this.left="left"==leftright}forceWidth(width){return this.options.forcedWidth=width,this}setAxisPosition(shift){this.shiftPosition=shift}getAxisPosition(){return this.shiftPosition||0}getAdditionalWidth(){let pos=0;return this.getLabel()&&(pos+=this.graph.options.fontSize),this.isShown()&&(pos+=Math.abs(this.tickMargin)),pos}isX(){return!1}isY(){return!0}resetTicksLength(){this.longestTick=[!1,0]}getMaxSizeTick(){return this.longestTick&&this.longestTick[0]?this.longestTick[0].getComputedTextLength()+5:0}draw(){this.tickMargin=this.left?-5-this.tickPx1*this.tickScaling[1]:2-this.tickPx1*this.tickScaling[1];var tickWidth=super.draw(...arguments);return tickWidth+=this.getAdditionalWidth(),this.drawSpecifics(tickWidth),this.fullwidthlabel=tickWidth,tickWidth}equalizePosition(width){return this.placeLabel(this.left?-width:width),this.getLabel()?width+this.graph.options.fontSize:0}drawTick(value,level,options,forcedPos){let pos,tick,tickLabel;pos=forcedPos||this.getPos(value);null==pos||isNaN(pos)||(tick=this.nextTick(level,tick=>{tick.setAttribute("x1",(this.left?1:-1)*this.tickPx1*this.tickScaling[level]),tick.setAttribute("x2",(this.left?1:-1)*this.tickPx2*this.tickScaling[level]),1==level?tick.setAttribute("stroke",this.getPrimaryTicksColor()):tick.setAttribute("stroke",this.getSecondaryTicksColor())}),tick.setAttribute("y1",pos),tick.setAttribute("y2",pos),this.nextGridLine(1==level,0,this.graph.getDrawingWidth(),pos,pos),1==level&&(tickLabel=this.nextTickLabel(tickLabel=>{tickLabel.setAttribute("x",this.tickMargin+this.options.tickLabelOffset),"black"!==this.getTicksLabelColor()&&tickLabel.setAttribute("fill",this.getTicksLabelColor()),this.left?tickLabel.setAttribute("text-anchor","end"):tickLabel.setAttribute("text-anchor","start"),tickLabel.style.dominantBaseline="central"}),tickLabel.setAttribute("y",pos),this.setTickContent(tickLabel,value,options),(tickLabel.textContent+"").length>=this.longestTick[1]&&(this.longestTick[0]=tickLabel,this.longestTick[1]=(tickLabel.textContent+"").length)))}drawLabel(){"black"!==this.getLabelColor()&&this.label.setAttribute("fill",this.getLabelColor()),this.label.setAttribute("dominant-baseline",this.left?"auto":"auto"),this.labelTspan.textContent=this.getLabel()}placeLabel(y){this.label.setAttribute("transform",`translate(${y}, ${Math.abs(this.getMaxPx()+this.getMinPx())/2}) rotate(-90)`)}drawSpecifics(){this.line.setAttribute("y1",this.getMinPx()),this.line.setAttribute("y2",this.getMaxPx()),this.line.setAttribute("x1",0),this.line.setAttribute("x2",0),this.line.setAttribute("stroke",this.getAxisColor());var span=this.getSpan();this.line.setAttribute("marker-start",this.options.splitMarks&&0!=span[0]?`url(#verticalsplit_${this.graph.getId()})`:""),this.line.setAttribute("marker-end",this.options.splitMarks&&1!=span[1]?`url(#verticalsplit_${this.graph.getId()})`:"")}setShift(shift){if(this.shift=shift,!this.shift||!this.graph.getWidth())return;let xshift=this.shift;xshift=this.floating?xshift:this.isLeft()?xshift:this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-xshift,this.group.setAttribute("transform",`translate( ${xshift} 0 )`),this.drawLabel()}isLeft(){return this.left}isRight(){return!this.left}isFlipped(){return!this.options.flipped}_drawLine(pos,line){let px=this.getPx(pos);return line?line.setAttribute("display","initial"):line=document.createElementNS(this.graph.ns,"line"),line.setAttribute("y1",px),line.setAttribute("y2",px),line.setAttribute("x1",0),line.setAttribute("x2",this.graph.drawingSpaceWidth),line.setAttribute("stroke","black"),this.group.appendChild(line),line}_hideLine(line){line&&line.setAttribute("display","none")}handleMouseMoveLocal(x,y){y-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(y)}scaleToFitAxis(axis,excludeSerie,start,end,min,max){axis&&axis.isX()||(axis=this.graph.getXAxis()),isNaN(start)&&(start=axis.getCurrentMin()),isNaN(end)&&(end=axis.getCurrentMax()),min===void 0&&(min=!0),max===void 0&&(max=!0),"number"==typeof excludeSerie&&(end=start,start=excludeSerie,excludeSerie=!1);for(var maxV=-Infinity,minV=1/0,j=0,i=0,l=this.graph.series.length;i<l;i++)this.graph.series[i].isShown()&&this.graph.series[i]!=excludeSerie&&this.graph.series[i].getXAxis()==axis&&this.graph.series[i].getYAxis()===this&&(j++,maxV=max?Math.max(maxV,this.graph.series[i].getMax(start,end)):0,minV=min?Math.min(minV,this.graph.series[i].getMin(start,end)):0);if(0==j)this.setMinMaxToFitSeries();else{minV=min?minV:this.getCurrentMin(),maxV=max?maxV:this.getCurrentMax();var interval=maxV-minV;minV-=this.options.axisDataSpacing.min*interval,maxV+=this.options.axisDataSpacing.max*interval,this._doZoomVal(minV,maxV)}return this}setMinMaxFlipped(){var interval=this.maxPx-this.minPx;if(!isNaN(interval)){var maxPx=this.maxPx-interval*this.options.span[0]-this.options.marginMin,minPx=this.maxPx-interval*this.options.span[1]+this.options.marginMax;this.minPxFlipped=this.isFlipped()?maxPx:minPx,this.maxPxFlipped=this.isFlipped()?minPx:maxPx}}getZProj(zValue){return zValue*this.graph.options.zAxis.shiftY}}_exports.default=AxisY,module.exports=exports.default})},function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports){"use strict";function getZCorrectedValue(serie,x,min){let wf=serie.getWaveforms(),i,l,data,val,valFinal;for(let wave of wf)for(i=0,l=wave.getLength(),data=wave.getData();i<l;i+=1)val=x?serie.getXAxis().getVal(serie.getX(wave.getX(i,!0))):serie.getYAxis().getVal(serie.getY(data[i])),valFinal=0==i?val:min?Math.min(valFinal,val):Math.max(valFinal,val);return valFinal}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;_exports.default={getX:function(val){return(val=this.getXAxis().getPx(val))-val%.2+this.getXAxis().getZProj(this.options.zpos)},getY:function(val){return(val=this.getYAxis().getPx(val))-val%.2+this.getYAxis().getZProj(this.options.zpos)},getZPos:function(){return this.options.zpos},getMinX:function(useZValues){return useZValues?getZCorrectedValue(this,!0,!0):this.minX},getMaxX:function(useZValues){return useZValues?getZCorrectedValue(this,!0,!1):this.maxX},getMinY:function(useZValues){return useZValues?getZCorrectedValue(this,!1,!0):this.minY},getMaxY:function(useZValues){return useZValues?getZCorrectedValue(this,!1,!1):this.maxY}},module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(6),__webpack_require__(0),__webpack_require__(10)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_waveform,_graphUtil,_graphSerie){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphSerie=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphSerie);class SerieZone extends _graphSerie.default{static default(){return{fillColor:"rgba( 0, 0, 0, 0.1 )",lineColor:"rgba( 0, 0, 0, 1 )",lineWidth:"1px"}}constructor(){super(...arguments),this.selectionType="unselected",this.id=(0,_graphUtil.guid)(),this.groupZones=document.createElementNS(this.graph.ns,"g"),this.lineZone=document.createElementNS(this.graph.ns,"path"),this.lineZone.setAttribute("stroke","black"),this.lineZone.setAttribute("stroke-width","1px"),this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.applyLineStyle(this.lineZone),this.styleHasChanged(),this.clip=document.createElementNS(this.graph.ns,"clipPath"),this.clipId=(0,_graphUtil.guid)(),this.clip.setAttribute("id",this.clipId),this.graph.defs.appendChild(this.clip)}setWaveform(...waveforms){return this.waveforms=waveforms,this.waveforms=this.waveforms.map(wave=>wave instanceof _waveform.Waveform?wave:new _waveform.Waveform(wave)),this.minX=this.waveforms[0].getXMin(),this.maxX=this.waveforms[0].getXMax(),this.minY=this.waveforms[0].getMin(),this.maxY=this.waveforms[0].getMax(),this.waveforms.map(wave=>{this.minX=Math.min(wave.getXMin(),this.minX),this.maxX=Math.max(wave.getXMin(),this.maxX),this.minY=Math.min(wave.getMin(),this.minY),this.maxY=Math.max(wave.getMax(),this.maxY)}),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setWaveforms(){return this.setWaveform(...arguments)}getWaveforms(){return this.waveforms}setMinMaxWaveforms(min,max){return this.waveforms=[min,max.reverse()],this}empty(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)}draw(force){if(force||this.hasDataChanged()){if(!this.waveforms)return;let dataX=0,dataY=0,xpx=0,ypx=0,j=0,line="",move=!1,buffer;const xminpx=this.getXAxis().getMinPx(),xmaxpx=this.getXAxis().getMaxPx(),yminpx=this.getYAxis().getMinPx(),ymaxpx=this.getYAxis().getMaxPx(),xmin=this.getXAxis().getCurrentMin(),xmax=this.getXAxis().getCurrentMax(),ymin=this.getYAxis().getCurrentMin(),ymax=this.getYAxis().getCurrentMax();this.groupMain.removeChild(this.groupZones);for(let waveform of this.waveforms)for(j=0;j<waveform.getLength();j+=1)if(dataX=waveform.getX(j,!0),dataY=waveform.getY(j,!0),dataY[j]<ymin?ypx=this.getY(ymin):dataY[j]>ymax&&(ypx=this.getY(ymax)),dataX===dataX){if(dataY!==dataY){if(0==line.length)continue;line+=`L ${xpx}, ${this.getY(waveform.getMinY())}`,move=!0;continue}if(ypx=this.getY(dataY),xpx=this.getX(dataX),dataX<xmin||dataX>xmax){buffer=[dataX,dataY[j],xpx,ypx];continue}move&&(line+=` M ${xpx}, ${this.getY(waveform.getMinY())} `,move=!1),0<line.length&&(line+=" L "),buffer?(line+=`${buffer[2]},${buffer[3]} `,buffer=!1):line+=`${xpx},${ypx} `}""==line?this.lineZone.setAttribute("d",""):this.lineZone.setAttribute("d",`M ${line} z`),this.groupMain.appendChild(this.groupZones)}this.hasStyleChanged(this.selectionType)&&(this.applyLineStyle(this.lineZone),this.styleHasChanged(!1))}applyLineStyle(line){line.setAttribute("stroke",this.getLineColor()),line.setAttribute("stroke-width",this.getLineWidth()),line.setAttribute("fill",this.getFillColor()),line.setAttribute("fill-opacity",this.getFillOpacity()),line.setAttribute("stroke-opacity",this.getLineOpacity())}setLineWidth(width){return this.options.lineWidth=width,this.styleHasChanged(),this}getLineWidth(){return this.options.lineWidth}setLineOpacity(opacity){return this.options.lineOpacity=opacity,this.styleHasChanged(),this}getLineOpacity(){return this.options.lineOpacity}setLineColor(color){return this.options.lineColor=color,this.styleHasChanged(),this}getLineColor(){return this.options.lineColor}setFillOpacity(opacity){return this.options.fillOpacity=opacity,this.styleHasChanged(),this}getFillOpacity(){return this.options.fillOpacity}setFillColor(color){return this.options.fillColor=color,this.styleHasChanged(),this}getFillColor(){return this.options.fillColor}}_exports.default=SerieZone,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphShape){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphShape=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShape);class ShapeRectangle extends _graphShape.default{constructor(graph,options){super(graph,options)}createDom(){return this._dom=document.createElementNS(this.graph.ns,"rect"),this.getStrokeColor()||this.setStrokeColor("black"),void 0===this.getStrokeWidth()&&this.setStrokeWidth(1),this.getFillColor()||this.setFillColor("transparent"),this}createHandles(){if(this.hasHandles()){var handles=this.getProp("handles");switch("object"!=typeof handles&&(handles={}),handles.type||(handles.type="corners"),handles.type){case"sides":util.extend(handles,{sides:{top:!0,bottom:!0,left:!0,right:!0}});var j=0;for(var i in handles.sides)handles.sides[i]&&j++;this._createHandles(j,"g").map(function(g){var r=document.createElementNS(self.graph.ns,"rect");r.setAttribute("x","-3"),r.setAttribute("width","6"),r.setAttribute("y","-6"),r.setAttribute("height","12"),r.setAttribute("stroke","black"),r.setAttribute("fill","white"),r.setAttribute("cursor","pointer"),g.appendChild(r)});var j=1;for(var i in handles.sides)handles.sides[i]&&(this.handles[i]=this[`handle${j}`],this.sides[j]=i,j++);break;case"corners":this._createHandles(4,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white"}),this.handles&&(this.handles[2].setAttribute("cursor","nesw-resize"),this.handles[4].setAttribute("cursor","nesw-resize"),this.handles[1].setAttribute("cursor","nwse-resize"),this.handles[3].setAttribute("cursor","nwse-resize"));break;case"seamlessX":this._createHandles(2,"rect",{transform:"translate(-3 -3)",stroke:"transparent",fill:"transparent",width:"20px",cursor:"ew-resize"});}return super.createHandles(),this}}applyPosition(){var pos=this.computePosition(0),pos2=this.computePosition(1),x,y,width,height;if(pos&&pos2)return pos.x<pos2.x?(x=pos.x,width=pos2.x-pos.x):(x=pos2.x,width=pos.x-pos2.x),pos.y<pos2.y?(y=pos.y,height=pos2.y-pos.y):(y=pos2.y,height=pos.y-pos2.y),this.currentX=x,this.currentY=y,this.currentW=width,this.currentH=height,!(isNaN(x)||isNaN(y)||!1===x||!1===y)&&(this.setDom("width",width),this.setDom("height",height),this.setDom("x",x),this.setDom("y",y),this.setHandles(),this.updateMask(),!0)}handleMouseMoveImpl(e,deltaX,deltaY){var handles=this.getProp("handles");if(this.moving||this.handleSelected){var pos=this.getPosition(0),pos2=this.getPosition(1),invX=this.getXAxis().isFlipped(),invY=this.getYAxis().isFlipped(),posX=pos.x,posY=pos.y,pos2X=pos2.x,pos2Y=pos2.y;if(this.moving)pos.deltaPosition("x",deltaX,this.getXAxis()),pos.deltaPosition("y",deltaY,this.getYAxis()),pos2.deltaPosition("x",deltaX,this.getXAxis()),pos2.deltaPosition("y",deltaY,this.getYAxis());else switch(handles.type){case"seamlessX":switch(this.handleSelected){case 1:pos.deltaPosition("x",deltaX,this.getXAxis());break;case 2:pos2.deltaPosition("x",deltaX,this.getXAxis());}break;case"sides":switch(this.sides[this.handleSelected]){case"left":pos.deltaPosition("x",deltaX,this.getXAxis());break;case"right":pos2.deltaPosition("x",deltaX,this.getXAxis());break;case"top":pos.deltaPosition("y",deltaY,this.getYAxis());break;case"bottom":pos2.deltaPosition("y",deltaY,this.getYAxis());}break;case"corners":default:1==this.handleSelected?(pos.deltaPosition("x",deltaX,this.getXAxis()),pos.deltaPosition("y",deltaY,this.getYAxis())):2==this.handleSelected?(pos2.deltaPosition("x",deltaX,this.getXAxis()),pos.deltaPosition("y",deltaY,this.getYAxis())):3==this.handleSelected?(pos2.deltaPosition("y",deltaY,this.getYAxis()),pos2.deltaPosition("x",deltaX,this.getXAxis())):4==this.handleSelected&&(pos.deltaPosition("x",deltaX,this.getXAxis()),pos2.deltaPosition("y",deltaY,this.getYAxis()));}return this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){if(!this.isLocked()&&(this.isSelectable()||this._staticHandles)&&this.handlesInDom){var pos=this.computePosition(0),pos2=this.computePosition(1),handles=this.getProp("handles");switch(handles.type){case"seamlessX":this.handles[1]&&(this.handles[1].setAttribute("transform",`translate(-10) translate(${pos.x})`),this.handles[1].setAttribute("height",Math.abs(pos2.y-pos.y)),this.handles[1].setAttribute("y",Math.min(pos2.y,pos.y))),this.handles[2]&&(this.handles[2].setAttribute("transform",`translate(-10)  translate(${pos2.x})`),this.handles[2].setAttribute("height",Math.abs(pos2.y-pos.y)),this.handles[2].setAttribute("y",Math.min(pos2.y,pos.y)));break;case"sides":this.handles.left&&this.handles.left.setAttribute("transform",`translate(${this.currentX} ${this.currentY+this.currentH/2})`),this.handles.right&&this.handles.right.setAttribute("transform",`translate( ${this.currentX+this.currentW} ${this.currentY+this.currentH/2})`),this.handles.top&&this.handles.top.setAttribute("transform",`translate( ${this.currentX+this.currentW/2} ${this.currentY})`),this.handles.bottom&&this.handles.bottom.setAttribute("transform",`translate( ${this.currentX+this.currentW/2} ${this.currentY+this.currentH})`);break;case"corners":default:this.handles[1].setAttribute("x",pos.x),this.handles[1].setAttribute("y",pos.y),this.handles[2].setAttribute("x",pos2.x),this.handles[2].setAttribute("y",pos.y),this.handles[3].setAttribute("x",pos2.x),this.handles[3].setAttribute("y",pos2.y),this.handles[4].setAttribute("x",pos.x),this.handles[4].setAttribute("y",pos2.y);}}}}_exports.default=ShapeRectangle,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(7),__webpack_require__(4),__webpack_require__(25),__webpack_require__(11),__webpack_require__(15),__webpack_require__(26),__webpack_require__(27),__webpack_require__(3),__webpack_require__(28),__webpack_require__(29),__webpack_require__(30),__webpack_require__(31),__webpack_require__(12),__webpack_require__(17),__webpack_require__(32),__webpack_require__(33),__webpack_require__(34),__webpack_require__(1),__webpack_require__(35),__webpack_require__(36),__webpack_require__(37),__webpack_require__(38),__webpack_require__(39),__webpack_require__(40),__webpack_require__(13),__webpack_require__(41),__webpack_require__(42),__webpack_require__(18),__webpack_require__(43),__webpack_require__(44),__webpack_require__(45),__webpack_require__(2),__webpack_require__(46),__webpack_require__(47),__webpack_require__(48),__webpack_require__(49),__webpack_require__(50),__webpack_require__(52),__webpack_require__(53),__webpack_require__(54),__webpack_require__(55),__webpack_require__(6),__webpack_require__(14)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphCore,_graphPosition,_graphLegend,_graphAxisX,_graphAxisY,_graphAxisXBar,_graphAxisXTime,_graphSerieLine,_graphSerieLine3d,_graphSerieBar,_graphSerieBox,_graphSerieLineColored,_graphSerieScatter,_graphSerieZone,_graphSerieZone3d,_graphSerieDensitymap,_graphSerieContour,_graphShape,_graphShapeAreaundercurve,_graphShapeArrow,_graphShapeEllipse,_graphShapeLabel,_graphShapePolyline,_graphShapePolygon,_graphShapeLine,_graphShapeNmrintegral,_graphShapePeakintegration2d,_graphShapeRect,_graphShapeCross,_graphShapePeakboundariescenter,_graphShapeHtml,_graphPlugin,_graphPluginDrag,_graphPluginShape,_graphPluginSelectScatter,_graphPluginZoom,_graphPluginTimeseriemanager,_graphPluginSerielinedifference,_graphPluginAxissplitting,_graphPluginMakeTracesDifferent,_graphPluginPeakpicking,_waveform,_fit_lm){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphCore=_interopRequireDefault(_graphCore),_graphPosition=_interopRequireDefault(_graphPosition),_graphLegend=_interopRequireDefault(_graphLegend),_graphAxisX=_interopRequireDefault(_graphAxisX),_graphAxisY=_interopRequireDefault(_graphAxisY),_graphAxisXBar=_interopRequireDefault(_graphAxisXBar),_graphAxisXTime=_interopRequireDefault(_graphAxisXTime),_graphSerieLine=_interopRequireDefault(_graphSerieLine),_graphSerieLine3d=_interopRequireDefault(_graphSerieLine3d),_graphSerieBar=_interopRequireDefault(_graphSerieBar),_graphSerieBox=_interopRequireDefault(_graphSerieBox),_graphSerieLineColored=_interopRequireDefault(_graphSerieLineColored),_graphSerieScatter=_interopRequireDefault(_graphSerieScatter),_graphSerieZone=_interopRequireDefault(_graphSerieZone),_graphSerieZone3d=_interopRequireDefault(_graphSerieZone3d),_graphSerieDensitymap=_interopRequireDefault(_graphSerieDensitymap),_graphSerieContour=_interopRequireDefault(_graphSerieContour),_graphShape=_interopRequireDefault(_graphShape),_graphShapeAreaundercurve=_interopRequireDefault(_graphShapeAreaundercurve),_graphShapeArrow=_interopRequireDefault(_graphShapeArrow),_graphShapeEllipse=_interopRequireDefault(_graphShapeEllipse),_graphShapeLabel=_interopRequireDefault(_graphShapeLabel),_graphShapePolyline=_interopRequireDefault(_graphShapePolyline),_graphShapePolygon=_interopRequireDefault(_graphShapePolygon),_graphShapeLine=_interopRequireDefault(_graphShapeLine),_graphShapeNmrintegral=_interopRequireDefault(_graphShapeNmrintegral),_graphShapePeakintegration2d=_interopRequireDefault(_graphShapePeakintegration2d),_graphShapeRect=_interopRequireDefault(_graphShapeRect),_graphShapeCross=_interopRequireDefault(_graphShapeCross),_graphShapePeakboundariescenter=_interopRequireDefault(_graphShapePeakboundariescenter),_graphShapeHtml=_interopRequireDefault(_graphShapeHtml),_graphPlugin=_interopRequireDefault(_graphPlugin),_graphPluginDrag=_interopRequireDefault(_graphPluginDrag),_graphPluginShape=_interopRequireDefault(_graphPluginShape),_graphPluginSelectScatter=_interopRequireDefault(_graphPluginSelectScatter),_graphPluginZoom=_interopRequireDefault(_graphPluginZoom),_graphPluginTimeseriemanager=_interopRequireDefault(_graphPluginTimeseriemanager),_graphPluginSerielinedifference=_interopRequireDefault(_graphPluginSerielinedifference),_graphPluginAxissplitting=_interopRequireDefault(_graphPluginAxissplitting),_graphPluginMakeTracesDifferent=_interopRequireDefault(_graphPluginMakeTracesDifferent),_graphPluginPeakpicking=_interopRequireDefault(_graphPluginPeakpicking),_fit_lm=_interopRequireDefault(_fit_lm),_graphCore.default.registerConstructor("graph.position",_graphPosition.default),_graphCore.default.registerConstructor("graph.axis.x",_graphAxisX.default),_graphCore.default.registerConstructor("graph.axis.y",_graphAxisY.default),_graphCore.default.registerConstructor("graph.axis.x.bar",_graphAxisXBar.default),_graphCore.default.registerConstructor("graph.axis.x.time",_graphAxisXTime.default),_graphCore.default.registerConstructor("graph.serie.line",_graphSerieLine.default),_graphCore.default.registerConstructor("graph.serie.line.3d",_graphSerieLine3d.default),_graphCore.default.registerConstructor("graph.serie.line.color",_graphSerieLineColored.default),_graphCore.default.registerConstructor("graph.serie.contour",_graphSerieContour.default),_graphCore.default.registerConstructor("graph.serie.bar",_graphSerieBar.default),_graphCore.default.registerConstructor("graph.serie.box",_graphSerieBox.default),_graphCore.default.registerConstructor("graph.serie.scatter",_graphSerieScatter.default),_graphCore.default.registerConstructor("graph.serie.zone",_graphSerieZone.default),_graphCore.default.registerConstructor("graph.serie.zone.3d",_graphSerieZone3d.default),_graphCore.default.registerConstructor("graph.serie.densitymap",_graphSerieDensitymap.default),_graphCore.default.registerConstructor(_graphCore.default.SERIE_LINE,_graphSerieLine.default),_graphCore.default.registerConstructor(_graphCore.default.SERIE_LINE_3D,_graphSerieLine3d.default),_graphCore.default.registerConstructor(_graphCore.default.SERIE_LINE_COLORED,_graphSerieLineColored.default),_graphCore.default.registerConstructor(_graphCore.default.SERIE_CONTOUR,_graphSerieContour.default),_graphCore.default.registerConstructor(_graphCore.default.SERIE_BAR,_graphSerieBar.default),_graphCore.default.registerConstructor(_graphCore.default.SERIE_BOX,_graphSerieBox.default),_graphCore.default.registerConstructor(_graphCore.default.SERIE_SCATTER,_graphSerieScatter.default),_graphCore.default.registerConstructor(_graphCore.default.SERIE_ZONE,_graphSerieZone.default),_graphCore.default.registerConstructor(_graphCore.default.SERIE_ZONE_3D,_graphSerieZone3d.default),_graphCore.default.registerConstructor(_graphCore.default.SERIE_DENSITYMAP,_graphSerieDensitymap.default),_graphCore.default.registerConstructor("graph.plugin.shape",_graphPluginShape.default),_graphCore.default.registerConstructor("graph.plugin.drag",_graphPluginDrag.default),_graphCore.default.registerConstructor("graph.plugin.zoom",_graphPluginZoom.default),_graphCore.default.registerConstructor("graph.plugin.selectScatter",_graphPluginSelectScatter.default),_graphCore.default.registerConstructor("graph.plugin.timeSerieManager",_graphPluginTimeseriemanager.default),_graphCore.default.registerConstructor("graph.plugin.serielinedifference",_graphPluginSerielinedifference.default),_graphCore.default.registerConstructor("graph.plugin.serieLineDifference",_graphPluginSerielinedifference.default),_graphCore.default.registerConstructor("graph.plugin.axissplitting",_graphPluginAxissplitting.default),_graphCore.default.registerConstructor("graph.plugin.makeTracesDifferent",_graphPluginMakeTracesDifferent.default),_graphCore.default.registerConstructor("graph.plugin.peakPicking",_graphPluginPeakpicking.default),_graphCore.default.registerConstructor("graph.shape",_graphShape.default),_graphCore.default.registerConstructor("graph.shape.areaundercurve",_graphShapeAreaundercurve.default),_graphCore.default.registerConstructor("graph.shape.arrow",_graphShapeArrow.default),_graphCore.default.registerConstructor("graph.shape.ellipse",_graphShapeEllipse.default),_graphCore.default.registerConstructor("graph.shape.polygon",_graphShapePolygon.default),_graphCore.default.registerConstructor("graph.shape.label",_graphShapeLabel.default),_graphCore.default.registerConstructor("graph.shape.polyline",_graphShapePolyline.default),_graphCore.default.registerConstructor("graph.shape.line",_graphShapeLine.default),_graphCore.default.registerConstructor("graph.shape.nmrintegral",_graphShapeNmrintegral.default),_graphCore.default.registerConstructor("graph.shape.html",_graphShapeHtml.default),_graphCore.default.registerConstructor("graph.shape.peakintegration2d",_graphShapePeakintegration2d.default),_graphCore.default.registerConstructor("graph.shape.rect",_graphShapeRect.default),_graphCore.default.registerConstructor("graph.shape.rectangle",_graphShapeRect.default),_graphCore.default.registerConstructor("graph.shape.cross",_graphShapeCross.default),_graphCore.default.registerConstructor("graph.shape.peakboundariescenter",_graphShapePeakboundariescenter.default),_graphCore.default.registerConstructor("graph.legend",_graphLegend.default),_graphCore.default.registerConstructor("graph.waveform",_waveform.Waveform);var _default=_graphCore.default;_exports.default=_default,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(21),__webpack_require__(22),__webpack_require__(23)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_style,_axes,_annotations){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_style=_interopRequireDefault(_style),_axes=_interopRequireDefault(_axes),_annotations=_interopRequireDefault(_annotations);const makeGraph=(Graph,graph,json)=>{let axes=[];if(graph.resize(json.width||400,json.height||300),json.axes&&(0,_axes.default)(Graph,graph,json.axes),json.legend){const opts={};json.legend.seriesHideable&&(opts.isSerieHideable=!0),json.legend.seriesSelectable&&(opts.isSerieSelectable=!0);const legend=graph.makeLegend(opts);if(json.legend.position)switch(json.legend.position){case"bottom":legend.setAutoPosition("bottom");break;case"top":legend.setAutoPosition("top");break;case"left":legend.setAutoPosition("left");break;case"right":legend.setAutoPosition("right");break;default:legend.setPosition(json.legend.position);}}json.series&&(!Array.isArray(json.series)&&(json.series=[json.series]),json.series.forEach((jsonSerie,index)=>{let type,data;switch(jsonSerie.type){case"scatter":type=Graph.SERIE_SCATTER;break;case"bar":type=Graph.SERIE_BAR;break;case"box":type=Graph.SERIE_BOX;break;case"line":default:type=Graph.SERIE_LINE;}switch(jsonSerie.type){case"bar":data=Graph.newWaveformHash(),jsonSerie.data.errors?data.setData(jsonSerie.data.values):data.setData(jsonSerie.data);break;default:case"line":case"scatter":data=Graph.newWaveform(),data.setData(jsonSerie.data.y,jsonSerie.data.x);}jsonSerie.data.errors&&(jsonSerie.data.errors.xBar&&data.setErrorBarX(jsonSerie.data.errors.xBar),jsonSerie.data.errors.xBarAbove&&data.setErrorBarXAbove(jsonSerie.data.errors.xBarAbove),jsonSerie.data.errors.xBarBelow&&data.setErrorBarXBelow(jsonSerie.data.errors.xBarBelow),jsonSerie.data.errors.yBar&&data.setErrorBar(jsonSerie.data.errors.yBar),jsonSerie.data.errors.yBarAbove&&data.setErrorBarAbove(jsonSerie.data.errors.yBarAbove),jsonSerie.data.errors.yBarBelow&&data.setErrorBarBelow(jsonSerie.data.errors.yBarBelow),jsonSerie.data.errors.xBox&&data.setErrorBoxX(jsonSerie.data.errors.xBox),jsonSerie.data.errors.xBoxAbove&&data.setErrorBoxXAbove(jsonSerie.data.errors.xBoxAbove),jsonSerie.data.errors.xBoxBelow&&data.setErrorBoxXBelow(jsonSerie.data.errors.xBoxBelow),jsonSerie.data.errors.yBox&&data.setErrorBox(jsonSerie.data.errors.yBox),jsonSerie.data.errors.yBoxAbove&&data.setErrorBoxAbove(jsonSerie.data.errors.yBoxAbove),jsonSerie.data.errors.yBoxBelow&&data.setErrorBoxBelow(jsonSerie.data.errors.yBoxBelow));const serie=graph.newSerie(jsonSerie.name||`_serie_${index}`,jsonSerie.options||{},type);serie.autoAxis(),jsonSerie.excludeFromLegend&&serie.excludeFromLegend(!0),data.xAxis&&axes[data.xAxis]&&serie.setXAxis(axes[data.xAxis]),data.yAxis&&axes[data.yAxis]&&serie.setYAxis(axes[data.yAxis]),data&&serie.setWaveform(data),jsonSerie.style&&(0,_style.default)(Graph,serie,jsonSerie,type),jsonSerie.annotations&&jsonSerie.annotations.forEach(annotation=>{(0,_annotations.default)(graph,annotation,serie,axes)})})),json.annotations&&json.annotations.forEach(annotation=>{(0,_annotations.default)(graph,annotation,void 0,axes)})};_exports.default=makeGraph,module.exports=exports.default})},function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;const setMarkerStyle=(serie,style,styleName)=>{serie.showMarkers();let _default={},modifiers=[];style.default?(_default=style.default,style.modifiers&&(modifiers=style.modifiers)):(_default=style,modifiers=[]),serie.setMarkerStyle(_default,modifiers,styleName)};_exports.default=(Graph,serie,jsonSerie,type)=>{let styles=jsonSerie.style;Array.isArray(styles)||(styles=[{name:"unselected",style:styles}]),styles.map(({name,style})=>{style.line&&(type==Graph.SERIE_LINE||type==Graph.SERIE_BAR)&&(style.line.color&&serie.setLineColor(style.line.color,name),style.line.width&&serie.setLineWidth(style.line.width,name),style.line.dash&&serie.setLineStyle(style.line.dash,name),style.line.fill&&serie.setFillColor(style.line.fill,name),style.line.fillOpacity&&serie.setFillOpacity&&serie.setFillOpacity(style.line.fillOpacity,name)),style.errorBar&&serie.setErrorBarStyle(style.errorBar),style.errorBox&&serie.setErrorBoxStyle(style.errorBox),style.marker&&(type==Graph.SERIE_LINE||type==Graph.SERIE_SCATTER)&&setMarkerStyle(serie,style.marker,name)})},module.exports=exports.default})},function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;const processAxes=(Graph,graph,type,axisOptions,allAxes)=>{Array.isArray(axisOptions)||(axisOptions=[axisOptions]),axisOptions.forEach(options=>{let constructorName;"x"==type?type="bottom":"y"==type&&(type="left"),"bottom"==type||"top"==type?(constructorName="graph.axis.x","category"==options.type&&(constructorName+=".bar")):constructorName="graph.axis.y";var axis=new(Graph.getConstructor(constructorName))(graph,type);axis.init(graph,options),"bottom"==type?graph.setBottomAxis(axis,graph.getNumAxes("bottom")):"top"==type?graph.setTopAxis(axis,graph.getNumAxes("top")):"left"==type?graph.setLeftAxis(axis,graph.getNumAxes("left")):"right"==type&&graph.setRightAxis(axis,graph.getNumAxes("right")),"category"==options.type&&(axis.categories=options.categories),options.name&&(allAxes[name]=axis)})};_exports.default=(Graph,graph,jsonAxes)=>{const allAxes=[];jsonAxes.x&&processAxes(Graph,graph,"x",jsonAxes.x,allAxes),jsonAxes.y&&processAxes(Graph,graph,"y",jsonAxes.y,allAxes),jsonAxes.top&&processAxes(Graph,graph,"top",jsonAxes.top,allAxes),jsonAxes.left&&processAxes(Graph,graph,"left",jsonAxes.left,allAxes),jsonAxes.bottom&&processAxes(Graph,graph,"bottom",jsonAxes.bottom,allAxes),jsonAxes.right&&processAxes(Graph,graph,"right",jsonAxes.right,allAxes)},module.exports=exports.default})},function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;_exports.default=(graph,json,serie,axes)=>{if(json.type){json.properties.label&&(!Array.isArray(json.properties.label)&&(json.properties.label=[json.properties.label]),json.properties.label.forEach((label,index)=>{for(let propertyName in label){let newPropertyName="label"+propertyName.charAt(0).toUpperCase()+propertyName.slice(1);json.properties[newPropertyName]||(json.properties[newPropertyName]=[]),json.properties[newPropertyName][index]=label[propertyName]}}));const shape=graph.newShape(json.type,{},!1,json.properties);json.serie&&shape.setSerie(json.serie),serie&&shape.setSerie(serie),json.layer&&shape.setLayer(json.layer),json.xAxis&&shape.setXAxis(axes[json.xAxis]),json.yAxis&&shape.setYAxis(axes[json.yAxis]),shape.draw(),shape.redraw()}},module.exports=exports.default})},function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;var dataAggregator;if("undefined"==typeof URL||"undefined"==typeof URL.createObjectURL||"undefined"==typeof Blob||"undefined"==typeof Worker)dataAggregator=()=>{};else{var queue={},aggregatorWorker;let string=function(){onmessage=function(e){const data=e.data.data,maxX=e.data.maxX,minX=e.data.minX,maxY=e.data.maxY,minY=e.data.minY,direction=e.data.direction;let numPoints=e.data.numPoints,l=data.length,i=0,k=-4,slots=[],dataAggregatedX=[],dataAggregatedY=[],aggregationSum=[],getX,slotNumber,lastAggregationX,lastAggregation,lastAggregationSum,newAggregation,newAggregationX;getX=e.data.xdata?function(index){return e.data.xdata[index]}:function(index){return index*e.data.xScale+e.data.xOffset};let aggregations={};if("x"==direction)for(const dataPerSlot=numPoints/(maxX-minX);i<l;i++){if(slotNumber=Math.floor((getX(i)-minX)*dataPerSlot),slots[k]!==slotNumber){k+=4,slots[k]=slotNumber;let slotX=(slotNumber+.5)/dataPerSlot+minX;dataAggregatedX[k]=slotX,dataAggregatedX[k+1]=slotX,dataAggregatedX[k+2]=slotX,dataAggregatedX[k+3]=slotX,dataAggregatedY[k]=data[i],dataAggregatedY[k+1]=data[i],dataAggregatedY[k+2]=data[i],dataAggregatedY[k+3]=data[i],aggregationSum[k]=0}dataAggregatedY[k+1]=Math.min(data[i],dataAggregatedY[k+1]),dataAggregatedY[k+2]=Math.max(data[i],dataAggregatedY[k+2]),dataAggregatedY[k+3]=data[i],aggregationSum[k]+=data[i]}else for(const dataPerSlot=numPoints/(maxY-minY);i<l;i++){if(slotNumber=Math.floor((data[i]-minY)*dataPerSlot),slots[k]!==slotNumber){k+=4,slots[k]=slotNumber;let slotY=(slotNumber+.5)/dataPerSlot+minY;dataAggregatedY[k]=slotY,dataAggregatedY[k+1]=slotY,dataAggregatedY[k+2]=slotY,dataAggregatedY[k+3]=slotY,dataAggregatedX[k]=data[i],dataAggregatedX[k+1]=data[i],dataAggregatedX[k+2]=data[i],dataAggregatedX[k+3]=data[i],aggregationSum[k]=0}dataAggregatedX[k+1]=Math.min(getX(i),dataAggregatedX[k+1]),dataAggregatedX[k+2]=Math.max(getX(i),dataAggregatedX[k+2]),dataAggregatedX[k+3]=getX(i),aggregationSum[k]+=getX(i)}for(aggregations[numPoints]={x:dataAggregatedX,y:dataAggregatedY,sums:aggregationSum},lastAggregation=dataAggregatedY,lastAggregationX=dataAggregatedX,lastAggregationSum=aggregationSum;256<numPoints;){if(numPoints/=2,newAggregation=[],newAggregationX=[],k=0,"x"==direction)for(i=0,l=lastAggregation.length-8;i<l;i+=8)newAggregationX[k]=(lastAggregationX[i]+lastAggregationX[i+4])/2,newAggregationX[k+1]=newAggregationX[k],newAggregationX[k+2]=newAggregationX[k],newAggregationX[k+3]=newAggregationX[k],newAggregation[k]=lastAggregation[i],newAggregation[k+1]=Math.min(lastAggregation[i+1],lastAggregation[i+5]),newAggregation[k+2]=Math.max(lastAggregation[i+2],lastAggregation[i+6]),newAggregation[k+3]=lastAggregation[i+7],aggregationSum[k]=(lastAggregationSum[i]+lastAggregationSum[i+4])/2,k+=4;else for(i=0,l=lastAggregation.length-8;i<l;i+=8)newAggregation[k]=(lastAggregation[i]+lastAggregation[i+4])/2,newAggregation[k+1]=newAggregation[k],newAggregation[k+2]=newAggregation[k],newAggregation[k+3]=newAggregation[k],newAggregationX[k]=lastAggregationX[i],newAggregationX[k+1]=Math.min(lastAggregationX[i+1],lastAggregationX[i+5]),newAggregationX[k+2]=Math.max(lastAggregationX[i+2],lastAggregationX[i+6]),newAggregationX[k+3]=lastAggregationX[i+7],aggregationSum[k]=(lastAggregationSum[i]+lastAggregationSum[i+4])/2,k+=4;aggregations[numPoints]={x:newAggregationX,y:newAggregation,sums:aggregationSum},lastAggregation=newAggregation,lastAggregationX=newAggregationX,lastAggregationSum=aggregationSum,aggregationSum=[]}postMessage({aggregates:aggregations,_queueId:e.data._queueId})}}.toString();string=string.replace(/^\s*function\s*\(\s*\)\s*\{/,""),string=string.replace(/}\s*$/,"");var workerUrl=URL.createObjectURL(new Blob([string],{type:"application/javascript"}));aggregatorWorker=new Worker(workerUrl),aggregatorWorker.onmessage=function(e){var id=e.data._queueId;delete e.data._queueId,queue[id](e.data),delete queue[id]},dataAggregator=function(toOptimize){var requestId=Date.now();toOptimize._queueId=requestId;var prom=new Promise(resolver=>{queue[requestId]=resolver});return aggregatorWorker.postMessage(toOptimize),prom}}var _default=dataAggregator;_exports.default=_default,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(4),__webpack_require__(0)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphPosition,util){"use strict";function getBBox(svgElement){try{return svgElement.getBBox()}catch(e){return{height:0,width:0,x:0,y:0}}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphPosition=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphPosition),util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util);var legendDefaults={backgroundColor:"rgba(255, 255, 255, 0.8)",frame:!0,frameWidth:1,frameColor:"black",paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,color:"black",frameRounding:0,movable:!1,shapesToggleable:!0,isSerieHideable:!0,isSerieSelectable:!0};class Legend{constructor(graph,options){this.options=util.extend({},legendDefaults,options),this.graph=graph,this.svg=document.createElementNS(this.graph.ns,"g"),this.subG=document.createElementNS(this.graph.ns,"g"),this.groups=[],this.rect=document.createElementNS(this.graph.ns,"rect"),this.rectBottom=document.createElementNS(this.graph.ns,"rect"),this.rect.setAttribute("x",0),this.rect.setAttribute("y",0),this.rectBottom.setAttribute("x",0),this.rectBottom.setAttribute("y",0),this.series=!1,this.svg.setAttribute("display","none"),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.eyeId=util.guid(),this.eyeCrossedId=util.guid();var eyeClosed=util.SVGParser(`<svg xmlns="http://www.w3.org/2000/svg"><symbol id="${this.eyeCrossedId}" viewBox="0 -256 1850 1850"><rect pointer-events="fill" fill="transparent" x="-256" y="0" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1214.339)"><path d="m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z" fill="#c0c0c0"></path></g></symbol></svg>`),eye=util.SVGParser(`<svg xmlns="http://www.w3.org/2000/svg"><symbol id="${this.eyeId}" viewBox="0 -256 1850 1850"><rect pointer-events="fill" x="-256" y="0" fill="transparent" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1259.8983)"><path d="m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z" fill="#444444" /></g></symbol></svg>`);this.svg.appendChild(document.adoptNode(eye.documentElement.firstChild)),this.svg.appendChild(document.adoptNode(eyeClosed.documentElement.firstChild)),this.svg.appendChild(this.subG),this.applyStyle()}setPosition(position,alignToX,alignToY){position&&(this.position=position,this.alignToX=alignToX||"left",this.alignToY=alignToY||"top")}setDraggable(bln){this.options.movable=bln}setAutoPosition(position){return-1<["bottom","left","top","right"].indexOf(position=position.toLowerCase())?(this.autoPosition=position,this):void(this.requireDelayedUpdate(),this.autoPosition=!1)}autoPosition(){return this.setAutoPosition(...arguments)}kill(){this.autoPosition?this.graph.getDom().removeChild(this.getDom()):this.graph.graphingZone.removeChild(this.getDom())}buildLegendBox(){var series=this.series||this.graph.getSeries(),posX=0,posY=this.options.paddingTop;this.autoPosition?this.graph.getDom().appendChild(this.getDom()):this.graph.graphingZone.appendChild(this.getDom());for(var i=0,l=series.length;i<l;i++)if(!series[i].excludedFromLegend||this.series){if("bottom"==this.autoPosition||"top"==this.autoPosition){var bbox=getBBox(this.groups[i]);posX+bbox.width>this.graph.getDrawingWidth()-this.options.paddingRight&&(posY+=16,posX=0)}this.groups[i].setAttribute("transform",`translate( ${posX}, ${posY})`),"bottom"==this.autoPosition||"top"==this.autoPosition?(posX+=bbox.width+10,posY+=0):(posX=0,posY+=16)}var bbox=getBBox(this.subG);switch(this.width=bbox.width+this.options.paddingRight+this.options.paddingLeft,this.height=bbox.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute("width",this.width),this.rect.setAttribute("height",this.height),this.rect.setAttribute("fill","none"),this.rect.setAttribute("pointer-events","fill"),this.rect.setAttribute("display","none"),this.options.movable&&(this.rectBottom.style.cursor="move"),this.rectBottom.setAttribute("width",this.width),this.rectBottom.setAttribute("height",this.height),this.rectBottom.setAttribute("x",bbox.x-this.options.paddingLeft),this.rectBottom.setAttribute("y",bbox.y-this.options.paddingTop),this.position=this.position||{},this.autoPosition){case"bottom":this.position.y=`${this.graph.getHeight()}px`,this.position.x=`${(this.graph.drawingSpaceWidth-this.width)/2+this.graph.drawingSpaceMinX}px`,this.alignToY="bottom",this.alignToX=!1;break;case"left":this.position.x="6px",this.position.y=`${(this.graph.getHeight()-this.height)/2}px`,this.alignToX="left",this.alignToY=!1;break;case"right":this.position.x=`${this.graph.getWidth()}px`,this.position.y=`${(this.graph.getHeight()-this.height)/2}px`,this.alignToX="right",this.alignToY=!1;break;case"top":this.position.x=`${(this.graph.drawingSpaceWidth-this.width)/2+this.graph.drawingSpaceMinX}px`,this.position.y="10px",this.alignToY="top",this.alignToX=!1;break;default:return void console.error("Position is not supported");}if(this.autoPosition){let redrawGraph;switch(this.autoPosition){case"bottom":this.graph.options.paddingBottom=this.height+10,redrawGraph=this.height!==this.previousHeight;break;case"top":this.graph.options.paddingTop=this.height+14,redrawGraph=this.height!==this.previousHeight;break;case"left":this.graph.options.paddingLeft=this.width+5,redrawGraph=this.width!==this.previousWidth;break;case"right":this.graph.options.paddingRight=this.width+10,redrawGraph=this.width!==this.previousWidth;}redrawGraph&&(this.graph.draw(!0),this.previousHeight=this.height,this.previousWidth=this.width)}this.bbox=bbox}calculatePosition(){var pos=_graphPosition.default.check(this.position);let poscoords=pos.compute(this.graph,this.graph.getXAxis(),this.graph.getYAxis());poscoords&&("max"==pos.y,"max"==pos.x,"right"==this.alignToX&&(poscoords.x-=this.width),"bottom"==this.alignToY&&(poscoords.y-=this.height),this.pos.transformX=poscoords.x,this.pos.transformY=poscoords.y,this._setPosition())}update(onlyIfRequired){if(!(this.graph.isDelayedUpdate()||!this._requiredUpdate&&onlyIfRequired)){this._requiredUpdate=!1;var self=this;for(this.applyStyle();this.subG.hasChildNodes();)this.subG.removeChild(this.subG.lastChild);this.svg.insertBefore(this.rectBottom,this.svg.firstChild);var series=this.series||this.graph.getSeries(),line,text,g;if(0<series.length)this.svg.setAttribute("display","block");else return;if("bottom"==this.autoPosition||"top"==this.autoPosition)var fullWidth=this.graph.getDrawingWidth();for(let i=0,l=series.length;i<l;i++){if(series[i].excludedFromLegend&&!this.series)continue;var g,line,text;const j=i;if("bottom"==this.autoPosition||"top"==this.autoPosition)var fullWidth=this.graph.getDrawingWidth();g=document.createElementNS(self.graph.ns,"g");var rect=document.createElementNS(self.graph.ns,"rect");self.subG.appendChild(g),g.appendChild(rect),series[i].getSymbolForLegend();var line=series[i]._getSymbolForLegendContainer(),marker=series[i].getMarkerForLegend(),text=series[i].getTextForLegend(),dx=35;const eyeUse=document.createElementNS(self.graph.ns,"use");this.isHideable()&&(dx+=20,eyeUse.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#${series[i].isShown()?this.eyeId:this.eyeCrossedId}`),eyeUse.setAttribute("width",15),eyeUse.setAttribute("height",15),eyeUse.setAttribute("x",35),eyeUse.setAttribute("y",-8),eyeUse.addEventListener("click",function(e){e.stopPropagation();var id;series[j].isShown()?(series[j].hide(self.options.hideShapesOnHideSerie),id=self.eyeCrossedId):(series[j].show(self.options.hideShapesOnHideSerie),id=self.eyeId),eyeUse.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#${id}`)})),text.setAttribute("transform",`translate(${dx}, 3)`),text.setAttribute("fill",this.options.color),line&&g.appendChild(line),"scatter"==series[i].getType()&&line.setAttribute("transform","translate( 20, 0 )"),marker&&g.appendChild(marker),eyeUse&&g.appendChild(eyeUse),g.appendChild(text);var bbox=getBBox(g);rect.setAttribute("x",bbox.x),rect.setAttribute("y",bbox.y),rect.setAttribute("width",bbox.width),rect.setAttribute("height",bbox.height),rect.setAttribute("fill","none"),rect.setAttribute("pointer-events","fill"),self.groups[i]=g,g.addEventListener("click",function(e){var serie=series[i];serie.isShown()&&(self.isSelectable()&&!serie.isSelected()?self.graph.selectSerie(serie):self.graph.unselectSerie(serie),e.preventDefault(),e.stopPropagation())})}this.svg.appendChild(this.rect),this.buildLegendBox(),this.calculatePosition()}}isHideable(){return this.options.isSerieHideable}notHideable(){return this.options.isSerieHideable=!1,this}hideable(){return this.options.isSerieHideable=!0,this}set seriesHideable(hideable){this.options.isSerieHideable=!!hideable}get seriesHideable(){return this.options.isSerieHideable}isSelectable(){return this.options.isSerieSelectable}isToggleShapes(){return this.options.shapesToggleable}getDom(){return this.svg}setEvents(){var self=this,pos=this.pos;this.svg.addEventListener("mousedown",function(e){e.stopPropagation(),self.options.movable&&(pos.x=e.clientX,pos.y=e.clientY,e.preventDefault(),self.mousedown=!0,self.graph.elementMoving(self),self.rect.setAttribute("display","block"))}),this.svg.addEventListener("click",function(e){e.stopPropagation()}),this.svg.addEventListener("dblclick",function(e){e.stopPropagation()}),this.svg.addEventListener("mousemove",function(e){self.handleMouseMove(e)})}handleMouseUp(e){e.stopPropagation(),e.preventDefault(),this.mousedown=!1,this.rect.setAttribute("display","none"),this.graph.elementMoving(!1)}handleMouseMove(e){if(this.mousedown){var pos=this.pos,deltaX=e.clientX-pos.x,deltaY=e.clientY-pos.y;pos.transformX+=deltaX,pos.transformY+=deltaY,pos.x=e.clientX,pos.y=e.clientY,e.stopPropagation(),e.preventDefault(),this._setPosition()}}_setPosition(){var pos=this.pos;isNaN(pos.transformX)||isNaN(pos.transformY)||!1===pos.transformX||!1===pos.transformY||this.svg.setAttribute("transform",`translate(${pos.transformX}, ${pos.transformY})`)}applyStyle(){this.options.frame&&(this.rectBottom.setAttribute("stroke",this.options.frameColor),this.rectBottom.setAttribute("stroke-width",`${this.options.frameWidth}px`),this.rectBottom.setAttribute("rx",this.options.frameRounding),this.rectBottom.setAttribute("ry",this.options.frameRounding)),this.rectBottom.setAttribute("fill",this.options.backgroundColor)}fixSeries(){var series=[];if(!1===arguments[0])return this.series=!1,void this.update();for(var i=0,l=arguments.length;i<l;i++)Array.isArray(arguments[i])?series=series.concat(arguments[i]):series.push(arguments[i]);this.update(),this.series=series}fixSeriesAdd(serie){this.series=this.series||[],this.series.push(serie)}requireDelayedUpdate(){this._requiredUpdate=!0}}_exports.default=Legend,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(11)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphAxisX){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphAxisX=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphAxisX);class AxisXBar extends _graphAxisX.default{constructor(graph,topbottom,options={}){super(graph,topbottom,options)}set categories(categories){return this._barCategories=categories,this}draw(){var self=this,elements=this._barCategories,tickLabel;if(this.series&&0!=this.series.length||this.autoSeries(),this.forceMin(0),this.forceMax(1),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),!!elements){Array.isArray(elements)||(elements=[elements]);for(var i=0;i<=elements.length;i++)this.drawTick(i/elements.length,2),i<elements.length&&(tickLabel=this.nextTickLabel(function(tickLabel){tickLabel.setAttribute("y",(self.top?-1:1)*((1==self.options.tickPosition?8:20)+(self.top?10:0))),tickLabel.setAttribute("text-anchor","middle"),"black"!==self.getTicksLabelColor()&&tickLabel.setAttribute("fill",self.getTicksLabelColor()),tickLabel.style.dominantBaseline="hanging"}),tickLabel.setAttribute("x",this.getPos((i+.5)/elements.length)),tickLabel.textContent=elements[i].title);return this.drawSpecifics(),this}}autoSeries(){let series=[];for(let serie of this.graph.series)serie.getXAxis()==this&&series.push(serie);return this.setSeries(...series),this}setSeries(){var self=this;return this.series=arguments,Array.prototype.map.call(this.series,function(serie,index){"object"==typeof serie||(serie=self.graph.getSerie(serie)),serie.setCategoryConfig&&serie.setCategoryConfig(index,self._barCategories,self.series.length)}),this._getUsedCategories(),this}_getUsedCategories(){let categories={},total=0;Array.prototype.map.call(this.series,serie=>{let usedCategories=serie.getUsedCategories();for(let cat of usedCategories)categories.hasOwnProperty(cat)||(categories[cat]=1,total+=1),categories[cat]++,total++});let accumulator=0;for(let i in categories){let temp=categories[i];categories[i]=accumulator,accumulator+=temp}let dispatchedCategories={};Array.prototype.map.call(this.series,serie=>{let scategories=serie.getUsedCategories(),indices={};scategories.forEach(cat=>{dispatchedCategories[cat]=dispatchedCategories[cat]||.5,indices[cat]=(categories[cat]+dispatchedCategories[cat])/total,dispatchedCategories[cat]++}),serie.setDataIndices(indices,total)})}getType(){return"category"}}_exports.default=AxisXBar,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(8),__webpack_require__(0)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphAxis,util){"use strict";function getClosestIncrement(value,basis){return Math.round(value/basis)*basis}function roundDate(date,format){switch(format.unit){case"s":date.setSeconds(getClosestIncrement(date.getSeconds(),format.increment)),date.setMilliseconds(0);break;case"i":date.setMinutes(getClosestIncrement(date.getMinutes(),format.increment)),date.setSeconds(0),date.setMilliseconds(0);break;case"h":date.setHours(getClosestIncrement(date.getHours(),format.increment)),date.setMinutes(0),date.setSeconds(0),date.setMilliseconds(0);break;case"d":date.setMinutes(0),date.setSeconds(0),date.setMilliseconds(0),date.setHours(0),date.setDate(getClosestIncrement(date.getDate(),format.increment));break;case"m":date.setMinutes(0),date.setSeconds(0),date.setMilliseconds(0),date.setHours(0),date.setDate(1),date.setMonth(getClosestIncrement(date.getMonth(),format.increment));break;case"y":date.setMinutes(0),date.setSeconds(0),date.setMilliseconds(0),date.setHours(0),date.setDate(1),date.setMonth(0);break;default:throw new Error("Date format not recognized");}return date}function incrementDate(date,format){switch(format.unit){case"s":date.setSeconds(date.getSeconds()+format.increment),date.setMilliseconds(0);break;case"i":date.setMinutes(date.getMinutes()+format.increment),date.setSeconds(0),date.setMilliseconds(0);break;case"h":date.setHours(date.getHours()+format.increment),date.setMinutes(0),date.setSeconds(0),date.setMilliseconds(0);break;case"d":date.setDate(date.getDate()+format.increment),date.setMinutes(0),date.setSeconds(0),date.setMilliseconds(0),date.setHours(0);break;case"m":date.setMonth(date.getMonth()+format.increment),date.setMinutes(0),date.setSeconds(0),date.setMilliseconds(0),date.setHours(0),date.setDate(1);break;case"y":date.setFullYear(date.getFullYear()+format.increment),date.setMinutes(0),date.setSeconds(0),date.setMilliseconds(0),date.setHours(0),date.setDate(1),date.setMonth(0);break;default:throw new Error("Date format not recognized");}return date}function getGroup(axis,level,number){if(axis.groups[level][number])return axis.groups[level][number].group.setAttribute("display","block"),axis.groups[level][number];var g={group:document.createElementNS(axis.graph.ns,"g"),text:document.createElementNS(axis.graph.ns,"text")},line=document.createElementNS(axis.graph.ns,"line");switch(line.setAttribute("stroke","black"),line.setAttribute("y1",0),level){case 2:line.setAttribute("y2",6),g.text.setAttribute("y",15),g.line=line,g.group.appendChild(g.line);break;default:case 1:line.setAttribute("y2",20),g.text.setAttribute("y",10),g.line1=line,g.line2=line.cloneNode(),g.group.appendChild(g.line1),g.group.appendChild(g.line2);}return g.text.setAttribute("text-anchor","middle"),g.text.setAttribute("dominant-baseline","middle"),g.group.appendChild(g.text),axis.getWrapper(level).appendChild(g.group),axis.groups[level][number]=g}function hideGroups(axis,level,from){for(;from<axis.groups[level].length;from++)hideGroup(axis.groups[level][from])}function hideGroup(group){group.group.setAttribute("display","none")}function getDateText(date,format){return dateFormat(date,format)}function renderGroup(level,group,text,minPx,maxPx,x1,x2){switch(level){case 2:if(x1<minPx||x1>maxPx)return void hideGroup(group);group.line.setAttribute("x1",x1),group.line.setAttribute("x2",x1),group.text.setAttribute("x",x1),group.text.textContent=text;break;default:case 1:var x1B=Math.max(minPx,Math.min(maxPx,x1)),x2B=Math.max(minPx,Math.min(maxPx,x2));if(isNaN(x2B)||isNaN(x1B))return;for(group.line1.setAttribute("x1",x1B),group.line2.setAttribute("x1",x2B),group.line1.setAttribute("x2",x1B),group.line2.setAttribute("x2",x2B),group.text.setAttribute("x",(x1B+x2B)/2);8*text.length>x2B-x1B;)if(text=`${text.substr(0,text.length-2)}.`,1==text.length){text="";break}group.text.textContent=text;}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphAxis=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphAxis),util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util);var axisFormat=[{threshold:20,increments:{1:{increment:1,unit:"i",format:"HH\"h\"MM (dd/mm/yy)"},2:{increment:1,unit:"s",format:"MM:ss\"s\""}}},{threshold:50,increments:{1:{increment:1,unit:"i",format:"HH\"h\"MM (dd/mm/yy)"},2:{increment:2,unit:"s",format:"MM:ss\"s\""}}},{threshold:100,increments:{1:{increment:1,unit:"i",format:"HH\"h\"MM (dd/mm/yy)"},2:{increment:5,unit:"s",format:"MM:ss\"s\""}}},{threshold:600,increments:{1:{increment:10,unit:"i",format:"HH\"h\"MM (dd/mm/yy)"},2:{increment:30,unit:"s",format:"MM:ss\"s\""}}},{threshold:1e3,increments:{1:{increment:1,unit:"h",format:"HH\"h\"MM (dd/mm/yy)"},2:{increment:10,unit:"i",format:"MM\"min\""}}},{threshold:1500,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:1,unit:"i",format:"H\"h\"MM"}}},{threshold:3e3,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:2,unit:"i",format:"H\"h\"MM"}}},{threshold:8e3,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:10,unit:"i",format:"H\"h\"MM"}}},{threshold:26400,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:20,unit:"i",format:"H\"h\"MM"}}},{threshold:86400,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:1,unit:"h",format:"H\"h\"MM"}}},{threshold:2e5,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:2,unit:"h",format:"H\"h\"MM"}}},{threshold:4e5,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:6,unit:"h",format:"H\"h\"MM"}}},{threshold:14e5,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:12,unit:"h",format:"HH\"h\"MM"}}},{threshold:64e5,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:1,unit:"d",format:"dd"}}},{threshold:124e5,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:2,unit:"d",format:"dd"}}},{threshold:.5*864e5,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:7,unit:"d",format:"dd"}}},{threshold:.8*864e5,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:15,unit:"d",format:"dd"}}},{threshold:1*864e5,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:3,unit:"m",format:"mm/yyyy"}}},{threshold:2*864e5,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:4,unit:"m",format:"mm/yyyy"}}},{threshold:10*864e5,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:6,unit:"m",format:"mm/yyyy"}}},{threshold:12*864e5,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:1,unit:"y",format:"yyyy"}}}],dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[WLloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(val,len){for(val+="",len=len||2;val.length<len;)val=`0${val}`;return val},getWeek=function(d,f){var onejan=new Date(d[`${f}FullYear`](),0,1);return Math.ceil(((d-onejan)/864e5+onejan[`${f}Day`]()+1)/7)};return function(date,mask,utc){var dF=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(date)||/\d/.test(date)||(mask=date,date=void 0),date=date?new Date(date):new Date,isNaN(date))throw SyntaxError(`invalid date:${date}`);mask=(dF.masks[mask]||mask||dF.masks.default)+"","UTC:"==mask.slice(0,4)&&(mask=mask.slice(4),utc=!0);var _=utc?"getUTC":"get",d=date[`${_}Date`](),D=date[`${_}Day`](),m=date[`${_}Month`](),y=date[`${_}FullYear`](),H=date[`${_}Hours`](),M=date[`${_}Minutes`](),s=date[`${_}Seconds`](),L=date[`${_}Milliseconds`](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:dF.i18n.dayNames[D],dddd:dF.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dF.i18n.monthNames[m],mmmm:dF.i18n.monthNames[m+12],yy:(y+"").slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(99<L?Math.round(L/10):L),t:12>H?"a":"p",tt:12>H?"am":"pm",T:12>H?"A":"P",TT:12>H?"AM":"PM",Z:utc?"UTC":((date+"").match(timezone)||[""]).pop().replace(timezoneClip,""),o:(0<o?"-":"+")+pad(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),S:["th","st","nd","rd"][3<d%10?0:(10!=d%100-d%10)*d%10],W:getWeek(date,_)};return mask.replace(token,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1)})}}();dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};class GraphTimeAxis extends _graphAxis.default{constructor(){super(...arguments)}init(graph,options){super.init(graph,options),this.wrapper={1:document.createElementNS(graph.ns,"g"),2:document.createElementNS(graph.ns,"g")},this.groups={1:[],2:[]};var rect=document.createElementNS(graph.ns,"rect");rect.setAttribute("fill","#c0c0c0"),rect.setAttribute("stroke","#808080"),rect.setAttribute("height","20"),rect.setAttribute("x","0"),rect.setAttribute("y","0"),this.rect=rect,this.wrapper[1].appendChild(this.rect),this.group.appendChild(this.wrapper[1]),this.group.appendChild(this.wrapper[2]),this.wrapper[1].setAttribute("transform","translate( 0, 25 )"),this.wrapper[2].setAttribute("transform","translate( 0, 00 )")}draw(){this.cacheCurrentMax(),this.cacheCurrentMin(),(null==this.currentAxisMin||null==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0),this.line.setAttribute("x1",this.getMinPx()),this.line.setAttribute("x2",this.getMaxPx()),this.line.setAttribute("y1",0),this.line.setAttribute("y2",0);var widthPx=this.maxPx-this.minPx,widthTime=this.getCurrentInterval(),maxVal=this.getCurrentMax(),minVal=this.getCurrentMin();if(this.rect.setAttribute("width",widthPx),this.rect.setAttribute("x",this.minPx),!maxVal||!minVal)return 0;var currentFormat;for(i=0;i<axisFormat.length;i++)if(axisFormat[i].threshold>widthTime/widthPx){currentFormat=axisFormat[i];break}currentFormat||(currentFormat=axisFormat[axisFormat.length-1]);var level=0,xVal1,xVal2,dateFirst,currentDate,text,group,i;for(level=1;2>=level;level++){if(!util.isNumeric(minVal)){hideGroups(this,level,0);break}dateFirst=new Date(minVal),currentDate=roundDate(dateFirst,currentFormat.increments[level]),i=0;do if(text=getDateText(currentDate,currentFormat.increments[level].format),group=getGroup(this,level,i),xVal1=this.getPx(currentDate.getTime()),currentDate=incrementDate(currentDate,currentFormat.increments[level]),xVal2=this.getPx(currentDate.getTime()),renderGroup(level,group,text,this.getMinPx(),this.getMaxPx(),xVal1,xVal2),i++,100<i)break;while(currentDate.getTime()<maxVal);hideGroups(this,level,i)}}isX(){return!0}getWrapper(level){return this.wrapper[level]}setShift(shift){this.shift=shift,this.group.setAttribute("transform",`translate(0 ${this.top?this.shift:this.graph.getDrawingHeight()-this.shift})`)}getAxisPosition(){return 60}setMinMaxFlipped(){var interval=this.maxPx-this.minPx,maxPx=interval*this.options.span[1]+this.minPx,minPx=interval*this.options.span[0]+this.minPx;this.minPxFlipped=this.isFlipped()?maxPx:minPx,this.maxPxFlipped=this.isFlipped()?minPx:maxPx}}_exports.default=GraphTimeAxis,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(16),__webpack_require__(0),__webpack_require__(3)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphMixinSerie3d,util,_graphSerieLine){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphMixinSerie3d=_interopRequireDefault(_graphMixinSerie3d),util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphSerieLine=_interopRequireDefault(_graphSerieLine);class SerieLine3D extends _graphSerieLine.default{static defaults(){return{zpos:0}}constructor(){super(...arguments)}setZPos(zPos){return this.options.zpos=zPos,this}setz(){return this.setZPos(...arguments)}}util.mix(SerieLine3D,_graphMixinSerie3d.default);_exports.default=SerieLine3D,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(9),__webpack_require__(3)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphMixinErrorbars,_graphSerieLine){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphMixinErrorbars=_interopRequireDefault(_graphMixinErrorbars),_graphSerieLine=_interopRequireDefault(_graphSerieLine);class SerieBar extends _graphSerieLine.default{constructor(){super(...arguments),this.pathDom=document.createElementNS(this.graph.ns,"path"),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,markers:this.options.markers}}setFillColor(fillColor,selectionType,applyToSelected){return selectionType=selectionType||"unselected",this.styles[selectionType]=this.styles[selectionType]||{},this.styles[selectionType].fillColor=fillColor,applyToSelected&&this.setFillColor(fillColor,"selected"),this.styleHasChanged(selectionType),this}getFillColor(selectionType){return this.getStyle(selectionType).fillColor}setFillOpacity(opacity,selectionType,applyToSelected){return selectionType=selectionType||"unselected",this.styles[selectionType]=this.styles[selectionType]||{},this.styles[selectionType].fillOpacity=opacity,applyToSelected&&this.setLineWidth(opacity,"selected"),this.styleHasChanged(selectionType),this}getFillOpacity(selectionType){return this.getStyle(selectionType).fillOpacity||1}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(line){line.setAttribute("stroke",this.getLineColor()),line.setAttribute("stroke-width",this.getLineWidth()),this.getLineDashArray()?line.setAttribute("stroke-dasharray",this.getLineDashArray()):line.removeAttribute("stroke-dasharray"),line.setAttribute("fill",this.getFillColor()),line.setAttribute("fill-opacity",this.getFillOpacity()||1)}draw(){var path="";this.hasErrors()&&this.errorDrawInit();for(var j=0;j<this.waveform.getLength();j++)if(this.categoryIndices[this.waveform.getX(j)]&&(path+=`M ${this.getXAxis().getPos(this.categoryIndices[this.waveform.getX(j)])} ${this.getYAxis().getPos(this.getYAxis().getCurrentMin())} V ${this.getYAxis().getPos(this.waveform.getY(j))} h ${this.getXAxis().getDeltaPx(1/this.nbCategories)} V ${this.getYAxis().getPos(this.getYAxis().getCurrentMin())}`,this.hasErrors())){var xpx=this.getXAxis().getPos(this.categoryIndices[this.waveform.getX(j)])+this.getXAxis().getDeltaPx(1/this.nbCategories)/2,ypx=this.getYAxis().getPos(this.waveform.getY(j));this.errorAddPoint(j,this.waveform.getX(j),this.waveform.getY(j),xpx,ypx)}this.hasErrors()&&this.errorDraw(),this.pathDom.setAttribute("d",path),this.applyLineStyles()}setMarkers(){}getUsedCategories(){return this.waveform.xdata}}_exports.default=SerieBar,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(10)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphUtil,_graphSerie){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphSerie=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphSerie);const defaultOptions={orientation:"y",maxBoxWidth:20,defaultStyle:{meanLineColor:"rgb( 100, 0, 0 )",meanLineWidth:2,boxAboveLineWidth:1,boxAboveLineColor:"rgb( 0, 0, 0 )",boxAboveFillColor:"transparent",boxAboveFillOpacity:1,boxBelowLineWidth:1,boxBelowLineColor:"rgb( 0, 0, 0 )",boxBelowFillColor:"transparent",boxBelowFillOpacity:1,barAboveLineColor:"rgba( 0, 0, 0, 1 )",barAboveLineWidth:1,barBelowLineColor:"rgba( 0, 0, 0, 1 )",barBelowLineWidth:1,outlierLineWidth:1,outlierLineColor:"rgb( 255, 255, 255 )",outlierFillColor:"rgb( 0, 0, 0 )",outlierFillOpacity:1}};class SerieBox extends _graphSerie.default{constructor(graph,name,options,defaultInherited={}){super(graph,name,options,(0,_graphUtil.extend)(!0,{},defaultOptions,defaultInherited)),this.pathDom=document.createElementNS(this.graph.ns,"path"),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected=this.options.defaultStyle}setData(data,noRescale){if(this.data=data,!Array.isArray(data))return;let axisref,axisval,methodref,methodval,blnX;for(var i in"y"==this.options.orientation?(axisref=this.getXAxis(),axisval=this.getYAxis(),methodref=this._checkX.bind(this),methodval=this._checkY.bind(this),blnX=!0,this.minY=data[0].Q2,this.maxY=data[0].Q2,this.maxX=data[0].x,this.minX=data[0].x):(axisref=this.getYAxis(),axisval=this.getXAxis(),methodref=this._checkY.bind(this),methodval=this._checkX.bind(this),blnX=!1,this.minX=data[0].Q2,this.maxX=data[0].Q2,this.maxY=data[0].y,this.minY=data[0].y),noRescale&&(methodref=function(){},methodval=function(){}),axisref&&axisval||(0,_graphUtil.throwError)("Error in setting data of the box serie. The X and Y axes must be set beforehand"),this.data)blnX?(methodref(this.data[i].x),this.data[i].pos=this.data[i].x):(methodref(this.data[i].y),this.data[i].pos=this.data[i].y),this.data[i].Q3&&methodval(this.data[i].Q3),this.data[i].Q1&&methodval(this.data[i].Q1),this.data[i].whiskers?Array.isArray(this.data[i].whiskers)?(0<this.data[i].whiskers.length&&methodval(this.data[i].whiskers[0]),1<this.data[i].whiskers.length&&methodval(this.data[i].whiskers[1])):(methodval(this.data[i].whiskers),this.data[i].whiskers=[this.data[i].whiskers]):this.data[i].whiskers=[],Array.isArray(this.data[i].outliers)?this.data[i].outliers.map(val=>methodval(val)):this.data[i].outliers=[];return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}_style(type,styleValue,selectionType="unselected",applyToSelected=!1){return this.styles[selectionType]=this.styles[selectionType]||{},this.styles[selectionType][type]=styleValue,applyToSelected&&this._set(type,styleValue,"selected"),this.styleHasChanged(selectionType),this}_gstyle(type,selectionType){return this.getStyle(selectionType)[type]}getStyle(selectionType="unselected"){return this.styles[selectionType]||{}}setMeanLineColor(){return this._style("meanLineColor",...arguments)}getMeanLineColor(){return this._gstyle("meanLineColor",...arguments)}setStyle(style,selectionType="unselected"){this.styles[selectionType]=(0,_graphUtil.extend)({},this.default().defaultStyle,this.styles.unselected,style),this.styleHasChanged(selectionType)}setMeanLineWidth(){return this._style("meanLineWidth",...arguments)}getMeanLineWidth(){return this._gstyle("meanLineWidth",...arguments)}setBoxAboveLineColor(){return this._style("boxAboveLineColor",...arguments)}getBoxAboveLineColor(){return this._gstyle("boxAboveLineColor",...arguments)}setBoxBelowLineColor(){return this._style("boxBelowLineColor",...arguments)}getBoxBelowLineColor(){return this._gstyle("boxBelowLineColor",...arguments)}setBoxAboveLineWidth(){return this._style("boxAboveLineWidth",...arguments)}getBoxAboveLineWidth(){return this._gstyle("boxAboveLineWidth",...arguments)}setBoxBelowLineWidth(){return this._style("boxBelowLineWidth",...arguments)}getBoxBelowLineWidth(){return this._gstyle("boxBelowLineWidth",...arguments)}setBoxAboveFillColor(){return this._style("boxAboveFillColor",...arguments)}getBoxAboveFillColor(){return this._gstyle("boxAboveFillColor",...arguments)}setBoxBelowFillColor(){return this._style("boxBelowFillColor",...arguments)}getBoxBelowFillColor(){return this._gstyle("boxBelowFillColor",...arguments)}setBoxAboveFillOpacity(){return this._style("boxAboveFillOpacity",...arguments)}getBoxAboveFillOpacity(){return this._gstyle("boxAboveFillOpacity",...arguments)}setBoxBelowFillOpacity(){return this._style("boxBelowFillOpacity",...arguments)}getBoxBelowFillOpacity(){return this._gstyle("boxBelowFillOpacity",...arguments)}setBarAboveLineColor(){return this._style("barAboveLineColor",...arguments)}getBarAboveLineColor(){return this._gstyle("barAboveLineColor",...arguments)}setBarBelowLineColor(){return this._style("barBelowLineColor",...arguments)}getBarBelowLineColor(){return this._gstyle("barBelowLineColor",...arguments)}setBarAboveLineWidth(){return this._style("barAboveLineWidth",...arguments)}getBarAboveLineWidth(){return this._gstyle("barAboveLineWidth",...arguments)}setBarBelowLineWidth(){return this._style("barBelowLineWidth",...arguments)}getBarBelowLineWidth(){return this._gstyle("barBelowLineWidth",...arguments)}setOutlierLineColor(){return this._style("outlierLineColor",...arguments)}getOutlierLineColor(){return this._gstyle("outlierLineColor",...arguments)}setOutlierLineWidth(){return this._style("outlierLineWidth",...arguments)}getOutlierLineWidth(){return this._gstyle("outlierLineWidth",...arguments)}setOutlierFillColor(){return this._style("outlierFillColor",...arguments)}getOutlierFillColor(){return this._gstyle("outlierFillColor",...arguments)}setOutlierFillOpacity(){return this._style("outlierFillOpacity",...arguments)}getOutlierFillOpacity(){return this._gstyle("outlierFillOpacity",...arguments)}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(line){line.setAttribute("stroke",this.getLineColor()),line.setAttribute("stroke-width",this.getLineWidth()),line.removeAttribute("stroke-dasharray"),line.setAttribute("fill",this.getFillColor()),line.setAttribute("fill-opacity",this.getFillOpacity()||1)}draw(){if(!this.data)return;let axis="y"==this.options.orientation?this.getYAxis():this.getXAxis(),axis2="y"==this.options.orientation?this.getXAxis():this.getYAxis(),useCategories=!1,position,boxOtherDimension,mean,boxAbove,boxBelow,barAbove,barBelow,outliers;if((0,_graphUtil.emptyDom)(this.groupMain),"category"==axis2.getType())boxOtherDimension=axis2.getRelPx(.8/this.nbCategories),useCategories=!0;else{boxOtherDimension=this.options.maxBoxWidth;for(var i=0,l=this.data.length;i<l-1;i++)boxOtherDimension=Math.max(5,Math.min(boxOtherDimension,Math.abs(axis2.getPx(this.data[i+1].x)-axis2.getPx(this.data[i].x))))}for(var i=0,l=this.data.length;i<l;i++){if("category"==axis2.getType()){let cat="y"==this.options.orientation?this.data[i].x:this.data[i].y;if(!!this.categoryIndices.hasOwnProperty(cat))position=[axis2.getPos(this.categoryIndices[cat])+1.2*boxOtherDimension/2];else if(Array.isArray(this._linkedToScatterSeries))for(let scatter_serie of this._linkedToScatterSeries)if(scatter_serie.categoryIndices.hasOwnProperty(cat)){position=[axis2.getPos(scatter_serie.categoryIndices[cat])+1.2*boxOtherDimension/2],axis="y"==this.options.orientation?scatter_serie.getYAxis():scatter_serie.getXAxis();break}}else position=[axis2.getPos("y"==this.options.orientation?this.data[i].x:this.data[i].y),boxOtherDimension];mean=axis.getPos(this.data[i].Q2),boxAbove=axis.getPos(this.data[i].Q3),boxBelow=axis.getPos(this.data[i].Q1),this.data[i].whiskers.map(val=>{val<this.data[i].Q1?barBelow=axis.getPos(val):barAbove=axis.getPos(val)}),outliers=this.data[i].outliers.map(val=>axis.getPos(val));var lineMean=document.createElementNS(this.graph.ns,"line");this.applyMeanStyle(lineMean);var rectAbove=document.createElementNS(this.graph.ns,"rect"),rectBelow=document.createElementNS(this.graph.ns,"rect");"y"==this.options.orientation?(rectAbove.setAttribute("width",boxOtherDimension),rectAbove.setAttribute("x",position[0]-boxOtherDimension/2),rectBelow.setAttribute("width",boxOtherDimension),rectBelow.setAttribute("x",position[0]-boxOtherDimension/2),lineMean.setAttribute("x1",position[0]-boxOtherDimension/2),lineMean.setAttribute("x2",position[0]+boxOtherDimension/2),lineMean.setAttribute("y1",mean),lineMean.setAttribute("y2",mean)):(rectAbove.setAttribute("height",boxOtherDimension),rectAbove.setAttribute("y",position[0]-boxOtherDimension/2),rectBelow.setAttribute("height",boxOtherDimension),rectBelow.setAttribute("y",position[0]-boxOtherDimension/2),lineMean.setAttribute("y1",position[0]-boxOtherDimension/2),lineMean.setAttribute("y2",position[0]+boxOtherDimension/2),lineMean.setAttribute("x1",mean),lineMean.setAttribute("x2",mean)),this.boxPos(rectAbove,mean,boxAbove,"x"==this.options.orientation),this.boxPos(rectBelow,mean,boxBelow,"x"==this.options.orientation),this.applyBoxStyle(rectAbove,rectBelow);var whiskerAbove=document.createElementNS(this.graph.ns,"line"),whiskerBelow=document.createElementNS(this.graph.ns,"line");"y"==this.options.orientation?(void 0!==barAbove&&(whiskerAbove.setAttribute("y1",boxAbove),whiskerAbove.setAttribute("y2",barAbove),whiskerAbove.setAttribute("x1",position[0]),whiskerAbove.setAttribute("x2",position[0])),void 0!==barBelow&&(whiskerBelow.setAttribute("y1",boxBelow),whiskerBelow.setAttribute("y2",barBelow),whiskerBelow.setAttribute("x1",position[0]),whiskerBelow.setAttribute("x2",position[0]))):(void 0!==barAbove&&(whiskerAbove.setAttribute("x1",boxAbove),whiskerAbove.setAttribute("x2",barAbove),whiskerAbove.setAttribute("y1",position[0]),whiskerAbove.setAttribute("y2",position[0])),void 0!==barBelow&&(whiskerBelow.setAttribute("x1",boxBelow),whiskerBelow.setAttribute("x2",barBelow),whiskerBelow.setAttribute("y1",position[0]),whiskerBelow.setAttribute("y2",position[0]))),outliers.map(outliervalue=>{let outlier=document.createElementNS(this.graph.ns,"circle");outlier.setAttribute("r",2),"y"==this.options.orientation?(outlier.setAttribute("cx",position[0]),outlier.setAttribute("cy",outliervalue)):(outlier.setAttribute("cy",position[0]),outlier.setAttribute("cx",outliervalue)),this.setOutlierStyle(outlier),this.groupMain.appendChild(outlier)}),void 0!==barAbove&&this.groupMain.appendChild(whiskerAbove),void 0!==barBelow&&this.groupMain.appendChild(whiskerBelow),void 0!==boxAbove&&this.groupMain.appendChild(rectAbove),void 0!==boxBelow&&this.groupMain.appendChild(rectBelow),this.groupMain.appendChild(lineMean),this.applyWhiskerStyle(whiskerAbove,whiskerBelow)}}applyBoxStyle(above,below){above.setAttribute("stroke",this.getBoxAboveLineColor()),above.setAttribute("stroke-width",this.getBoxAboveLineWidth()),this.getBoxAboveFillColor()!==void 0&&above.setAttribute("fill",this.getBoxAboveFillColor()),this.getBoxAboveFillOpacity()!==void 0&&above.setAttribute("fill-opacity",this.getBoxAboveFillOpacity()),below.setAttribute("stroke",this.getBoxBelowLineColor()),below.setAttribute("stroke-width",this.getBoxBelowLineWidth()),this.getBoxBelowFillColor()!==void 0&&below.setAttribute("fill",this.getBoxBelowFillColor()),this.getBoxAboveFillOpacity()!==void 0&&below.setAttribute("fill-opacity",this.getBoxBelowFillOpacity())}applyWhiskerStyle(above,below){above.setAttribute("stroke",this.getBarAboveLineColor()),above.setAttribute("stroke-width",this.getBarAboveLineWidth()),below.setAttribute("stroke",this.getBarBelowLineColor()),below.setAttribute("stroke-width",this.getBarBelowLineWidth())}applyMeanStyle(line){line.setAttribute("stroke",this.getMeanLineColor()),line.setAttribute("stroke-width",this.getMeanLineWidth())}setOutlierStyle(outlier){outlier.setAttribute("stroke",this.getOutlierLineColor()),outlier.setAttribute("stroke-width",this.getOutlierLineWidth()),this.getBoxBelowFillColor()!==void 0&&outlier.setAttribute("fill",this.getOutlierFillColor()),this.getBoxAboveFillOpacity()!==void 0&&outlier.setAttribute("fill-opacity",this.getOutlierFillOpacity())}getCategoryIndex(name){if(!this.categories)throw new Error("No categories were defined. Probably axis.setSeries was not called");for(var i=0;i<this.categories.length;i++)if(this.categories[i].name==name)return i;return!1}setMarkers(){}boxPos(box,mean,extremity,blnX){mean>extremity?(box.setAttribute(blnX?"x":"y",extremity),box.setAttribute(blnX?"width":"height",mean-extremity)):(box.setAttribute(blnX?"x":"y",mean),box.setAttribute(blnX?"width":"height",extremity-mean))}getUsedCategories(){let xymode="y"==this.options.orientation?"x":"y",categories=this.data.map(d=>d[xymode]);return Array.isArray(this._linkedToScatterSeries)&&this._linkedToScatterSeries.map(scatter_serie=>{scatter_serie.getUsedCategories().map(scatter_serie_cat=>{let index;-1<(index=categories.indexOf(scatter_serie_cat))&&categories.splice(index,1)})}),categories}linkToScatterSerie(...series){this._linkedToScatterSeries=series}}_exports.default=SerieBox,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(9),__webpack_require__(3)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphMixinErrorbars,_graphSerieLine){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphMixinErrorbars=_interopRequireDefault(_graphMixinErrorbars),_graphSerieLine=_interopRequireDefault(_graphSerieLine);class SerieLineColor extends _graphSerieLine.default{constructor(){super(...arguments),this.lines=this.lines||{}}setColors(colors){this.colors=colors}_draw(){var self=this,data=this._dataToUse,i=0,lastX=!1,lastY=!1,xAxis=this.getXAxis(),yAxis=this.getYAxis(),xMin=xAxis.getCurrentMin(),yMin=yAxis.getCurrentMin(),xMax=xAxis.getCurrentMax(),yMax=yAxis.getCurrentMax(),incrXFlip=0,incrYFlip=1,pointOutside=!1,lastPointOutside=!1,j,k,m,x,y,k,xpx,ypx,xpx2,ypx2;for(this.eraseLines(),this.isFlipped()&&(incrXFlip=1,incrYFlip=0),this.currentLine="",m=this.waveform.getLength(),j=0;j<m;j+=2){if(x=this.waveform.getX(j),y=this.waveform.getY(j),x<xMin&&lastX<xMin||x>xMax&&lastX>xMax||(y<yMin&&lastY<yMin||y>yMax&&lastY>yMax)&&!this.options.lineToZero){lastX=x,lastY=y,lastPointOutside=!0;continue}if(this.counter2=j,xpx2=this.getX(x),ypx2=this.getY(y),xpx2!=xpx||ypx2!=ypx){if(pointOutside=x<xMin||y<yMin||x>xMax||y>yMax,isNaN(xpx2)||isNaN(ypx2)){0<this.counter;continue}var color=this.colors[j];this._addPoint(xpx2,ypx2,x,y,xpx,ypx,lastX,lastY,j,color,!1,!0),xpx=xpx2,ypx=ypx2,lastX=x,lastY=y}}if(this.latchLines(),this._tracker){this._trackerDom&&this._trackerDom.remove();var cloned=this.groupLines.cloneNode(!0);this.groupMain.appendChild(cloned);for(var i=0,l=cloned.children.length;i<l;i++)cloned.children[i].setAttribute("stroke","transparent"),cloned.children[i].setAttribute("stroke-width","25px"),cloned.children[i].setAttribute("pointer-events","stroke");self._trackerDom=cloned,self.groupMain.addEventListener("mousemove",function(e){var coords=self.graph._getXY(e),ret=self.handleMouseMove(!1,!1);self._trackingCallback(self,ret,coords.x,coords.y)}),self.groupMain.addEventListener("mouseleave",function(){self._trackingOutCallback(self)})}return this}_addPoint(xpx,ypx,x,y,xpxbefore,ypxbefore,xbefore,ybefore,j,color){if(void 0!==xpxbefore&&void 0!==ypxbefore&&!(isNaN(xpx)||isNaN(ypx))){color._rgb&&(color=`rgba(${color._rgb[0]},${color._rgb[1]},${color._rgb[2]},${color._rgb[3]||1})`);var line=this.lines[color];line||(line=this.lines[color]={object:document.createElementNS(this.graph.ns,"path"),path:"",color:color},line.object.setAttribute("stroke",color),line.color=color,this.groupLines.appendChild(line.object)),line.path+=`M ${xpxbefore} ${ypxbefore} L ${xpx} ${ypx}`,this.hasErrors()&&this.errorAddPoint(j,x,y,xpx,ypx)}}removeExtraLines(){}latchLines(){for(var i in this.lines)this.lines[i].object.setAttribute("d",this.lines[i].path)}eraseLines(){for(var i in this.lines)this.lines[i].path="",this.lines[i].object.setAttribute("d","")}applyLineStyle(line){line.setAttribute("stroke-width",this.getLineWidth()),this.getLineDashArray()?line.setAttribute("stroke-dasharray",this.getLineDashArray()):line.removeAttribute("stroke-dasharray"),line.setAttribute("fill","none")}}_exports.default=SerieLineColor,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(16),__webpack_require__(0),__webpack_require__(17)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphMixinSerie3d,util,_graphSerieZone){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphMixinSerie3d=_interopRequireDefault(_graphMixinSerie3d),util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphSerieZone=_interopRequireDefault(_graphSerieZone);class SerieZone3D extends _graphSerieZone.default{static default(){return{zpos:0}}constructor(){super(...arguments)}setZPos(zPos){return this.options.zpos=zPos,this}setz(){return this.setZPos(...arguments)}}util.mix(SerieZone3D,_graphMixinSerie3d.default);_exports.default=SerieZone3D,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(10)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphSerie){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphSerie=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphSerie);class SerieDensityMap extends _graphSerie.default{constructor(){super(...arguments),util.mapEventEmission(this.options,this),this.rects=[],this.paths=[],this.recalculateBinsOnDraw=!1}setData(data){this.minX=this.maxX=this.minY=this.maxY=0;var i=0,l=data.length;for(this.data=data,this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,i=0;i<l;i++)this._checkX(data[i][0]),this._checkY(data[i][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}calculateDensity(fromX,deltaX,numX,fromY,deltaY,numY){var densitymap=[],l=this.data.length,binMin=Number.POSITIVE_INFINITY,binMax=Number.NEGATIVE_INFINITY,i,indexX,indexY;for(i=0;i<l;i++)(indexX=~~((this.data[i][0]-fromX)/deltaX),indexY=~~((this.data[i][1]-fromY)/deltaY),!(indexX>numX||indexY>numY||0>indexX||0>indexY))&&(densitymap[indexX]=densitymap[indexX]||[],densitymap[indexX][indexY]=densitymap[indexX][indexY]+1||1,binMin=densitymap[indexX][indexY]<binMin?densitymap[indexX][indexY]:binMin,binMax=densitymap[indexX][indexY]>binMax?densitymap[indexX][indexY]:binMax);return this.maxIndexX=numX,this.maxIndexY=numY,this.binMin=binMin,this.binMax=binMax,this.deltaX=deltaX,this.deltaY=deltaY,this.fromX=fromX,this.fromY=fromY,this.numX=numX,this.numY=numY,this.densitymap=densitymap,densitymap}setDensityMap(densitymap,fromX,deltaX,fromY,deltaY){var binMin=Number.POSITIVE_INFINITY,binMax=Number.NEGATIVE_INFINITY,i,j;for(i=0;i<densitymap.length;i++)for(j=0;j<densitymap[i].length;j++)binMin=densitymap[i][j]<binMin?densitymap[i][j]:binMin,binMax=densitymap[i][j]>binMax?densitymap[i][j]:binMax;return this.maxIndexX=densitymap.length,this.maxIndexY=densitymap[0].length,this.binMin=binMin,this.binMax=binMax,this.deltaX=deltaX,this.deltaY=deltaY,this.fromX=fromX,this.fromY=fromY,this.numX=this.maxIndexX,this.numY=this.maxIndexY,this.densitymap=densitymap,densitymap}calculateDensityWeighted(fromX,deltaX,numX,fromY,deltaY,numY){var densitymap=[],l=this.data.length,binMin=Number.POSITIVE_INFINITY,binMax=Number.NEGATIVE_INFINITY,i,indexX,indexY,compX,compY,exactX,exactY,indexXLow,indexXHigh,indexYLow,indexYHigh;for(i=0;i<l;i++)(exactX=(this.data[i][0]-fromX)/deltaX-.5,exactY=(this.data[i][1]-fromY)/deltaY-.5,indexX=Math.floor(exactX),indexY=Math.floor(exactY),indexXLow=indexX,indexYLow=indexY,indexXHigh=indexX+1,indexYHigh=indexY+1,compX=1-(exactX-indexX),compY=1-(exactY-indexY),!(indexX>numX||indexY>numY||0>indexX||0>indexY))&&(densitymap[indexXLow]=densitymap[indexXLow]||[],densitymap[indexXHigh]=densitymap[indexXHigh]||[],densitymap[indexXLow][indexYLow]=densitymap[indexXLow][indexYLow]||0,densitymap[indexXHigh][indexYLow]=densitymap[indexXHigh][indexYLow]||0,densitymap[indexXLow][indexYHigh]=densitymap[indexXLow][indexYHigh]||0,densitymap[indexXHigh][indexYHigh]=densitymap[indexXHigh][indexYHigh]||0,densitymap[indexXLow][indexYLow]+=compX*compY,densitymap[indexXHigh][indexYLow]+=(1-compX)*compY,densitymap[indexXLow][indexYHigh]+=compX*(1-compY),densitymap[indexXHigh][indexYHigh]+=(1-compX)*(1-compY),binMin=densitymap[indexXLow][indexYLow]<binMin?densitymap[indexXLow][indexYLow]:binMin,binMax=densitymap[indexXLow][indexYLow]>binMax?densitymap[indexXLow][indexYLow]:binMax,binMin=densitymap[indexXHigh][indexYLow]<binMin?densitymap[indexXHigh][indexYLow]:binMin,binMax=densitymap[indexXHigh][indexYLow]>binMax?densitymap[indexXHigh][indexYLow]:binMax,binMin=densitymap[indexXLow][indexYHigh]<binMin?densitymap[indexXLow][indexYHigh]:binMin,binMax=densitymap[indexXLow][indexYHigh]>binMax?densitymap[indexXLow][indexYHigh]:binMax,binMin=densitymap[indexXHigh][indexYHigh]<binMin?densitymap[indexXHigh][indexYHigh]:binMin,binMax=densitymap[indexXHigh][indexYHigh]>binMax?densitymap[indexXHigh][indexYHigh]:binMax);return this.maxIndexX=numX,this.maxIndexY=numY,this.binMin=binMin,this.binMax=binMax,this.deltaX=deltaX,this.deltaY=deltaY,this.fromX=fromX,this.fromY=fromY,this.numX=numX,this.numY=numY,this.densitymap=densitymap,densitymap}autoBins(numX,numY){return this.numX=numX||400,this.numY=numY||this.numX,this.calculateDensity(this.minX,(this.maxX-this.minX)/numX,numX,this.minY,(this.maxY-this.minY)/numY,numY),this.recalculateBinsOnDraw=!1,this}setPxPerBin(pxPerBinX,pxPerBinY,weightedDensityMap){return pxPerBinX&&this.calculationDensityMap({from:"min",to:"max",pxPerBin:pxPerBinX,weighted:weightedDensityMap}),pxPerBinY&&this.calculationDensityMap(!1,{from:"min",to:"max",pxPerBin:pxPerBinY,weighted:weightedDensityMap}),this}setBinsFromTo(mode,from,to,num){return this.densityMapCalculation=this.densityMapCalculation||{},this.densityMapCalculation[mode]={from:from,to:to,numBins:num},this.calculationDensityMap(),this}calculationDensityMap(x,y){this.method=this.calculateDensityAdvanced,this.densityMapCalculation=this.densityMapCalculation||{},x&&(this.densityMapCalculation.x=x),y&&(this.densityMapCalculation.y=y)}calculateDensityAdvanced(){var results={x:{from:0,num:0,delta:0,weighing:!1},y:{from:0,num:0,delta:0,weighing:!1}},widthValues={x:this.graph.drawingSpaceWidth,y:this.graph.drawingSpaceHeight},axisGetter={x:this.getXAxis,y:this.getYAxis},weighing=!1;for(var i in this.densityMapCalculation)if(this.densityMapCalculation[i].weighted&&(weighing=!0,results[i].weighing=!0),this.densityMapCalculation[i].pxPerBin){var from="min"==this.densityMapCalculation[i].from?axisGetter[i].call(this).getCurrentMin():this.densityMapCalculation[i].from,to="max"==this.densityMapCalculation[i].to?axisGetter[i].call(this).getCurrentMax():this.densityMapCalculation[i].to,dimension=Math.abs(axisGetter[i].call(this).getRelPx(to-from));results[i].num=Math.ceil(widthValues[i]/this.densityMapCalculation[i].pxPerBin),results[i].from=from-Math.abs(axisGetter[i].call(this).getRelVal((results[i].num*this.densityMapCalculation[i].pxPerBin-dimension)/2)),results[i].delta=Math.abs(axisGetter[i].call(this).getRelVal(this.densityMapCalculation[i].pxPerBin))}else results[i].num=this.densityMapCalculation[i].numBins||400,results[i].from="min"==this.densityMapCalculation[i].from?axisGetter[i].call(this).getCurrentMin():this.densityMapCalculation[i].from,results[i].delta=this.densityMapCalculation[i].to?(("max"==this.densityMapCalculation[i].to?axisGetter[i].call(this).getCurrentMax():this.densityMapCalculation[i].to)-results[i].from)/results[i].num:this.densityMapCalculate[i].delta;(weighing?this.calculateDensityWeighted:this.calculateDensity).call(this,results.x.from,results.x.delta,results.x.num,results.y.from,results.y.delta,results.y.num)}setColorMapBinBoundaries(min,max,_internal){return this.colorMapMin=min,this.colorMapMax=max,_internal||(this.callbackColorMapMinMax="manual"),this}autoColorMapBinBoundaries(){return this.colorMapMin=this.binMin,this.colorMapMax=this.binMax,this}onRedrawColorMapBinBoundaries(callback){return this.callbackColorMapMinMax=callback,this}colorMapHSL(colorStops,numColors,method){method=method||"linear";for(var methods={exp:function(value){return(Math.exp(1*(value/numColors))-Math.exp(0))/(Math.exp(1)-Math.exp(0))},log:function(value){return(Math.log(value+1)-Math.log(1))/(Math.log(numColors+1)-Math.log(1))},linear:function(value){return(value-0)/(numColors-0)}},k=0,colorMap=[],opacities=[],color={h:null,s:null,l:null,a:null},slices=colorStops.length-1,i=0,ratio,first;i<=numColors;i++){for(var j in ratio=methods[method](i),first=Math.floor(ratio*slices),first==colorStops.length-1&&(first=slices-1),ratio=(ratio-first/slices)/(1/slices),color)color[j]=(colorStops[first+1][j]-colorStops[first][j])*ratio+colorStops[first][j];colorMap[k]=`hsl(${color.h}, ${Math.round(100*color.s)}%, ${Math.round(100*color.l)}%)`,opacities[k]=color.a,k++}return this.opacities=opacities,this.colorMap=colorMap,this.colorMapNum=numColors,this}autoColorMapHSL(colorStops,method="linear"){return this.colorMapHSL(colorStops,100,method),this}getColorIndex(binValue){return Math.max(0,Math.min(this.colorMapNum,Math.floor((binValue-this.colorMapMin)/(this.colorMapMax-this.colorMapMin)*this.colorMapNum)))}draw(){var colorIndex;if(this.method&&this.method(),!this.callbackColorMapMinMax||null==this.colorMapMin||null==this.colorMapMax||"auto"==this.callbackColorMapMinMax)this.autoColorMapBinBoundaries();else if("function"==typeof this.callbackColorMapMinMax){var val=this.callbackColorMapMinMax(this.binMin,this.binMax);this.setColorMapBinBoundaries(val[0],val[1],!0)}for(var deltaXPx=this.getXAxis().getRelPx(this.deltaX),deltaYPx=this.getYAxis().getRelPx(this.deltaY),i=0;i<this.paths.length;i++)this.paths[i]="";for(var i=0;i<this.maxIndexX;i++)for(var j=0;j<this.maxIndexY;j++)null!=this.densitymap[i]&&null!=this.densitymap[i][j]&&(colorIndex=this.getColorIndex(this.densitymap[i][j]),this.paths[colorIndex]||(this.paths[colorIndex]=""),this.paths[colorIndex]+=` M ${this.getXAxis().getPx(i*this.deltaX+this.fromX)} ${this.getYAxis().getPx(j*this.deltaY+this.fromY)} h ${deltaXPx} v ${deltaYPx} h -${deltaXPx} z`);this.drawRects()}drawRects(){for(var i=0;i<this.paths.length;i++)this.rects[i]||(this.rects[i]=document.createElementNS(this.graph.ns,"path"),this.rects[i].setAttribute("shape-rendering","crispEdges")),void 0!==this.paths[i]&&(this.rects[i].setAttribute("d",this.paths[i]),this.rects[i].setAttribute("fill",this.colorMap[i]),this.rects[i].setAttribute("fill-opacity",this.opacities[i])),this.groupMain.appendChild(this.rects[i])}setOptions(options){return this.options=util.extend(!0,{},this.defaults(),options||{}),this}}_exports.default=SerieDensityMap,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(3)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphSerieLine){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphSerieLine=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphSerieLine);class SerieContour extends _graphSerieLine.default{constructor(graph){super(...arguments),this.negativeDelta=0,this.positiveDelta=0,this.negativeThreshold=0,this.positiveThreshold=0,this.groupMain.setAttribute("clip-path",`url(#_clipplot${graph._creation})`)}setData(data,arg,type){var arg=arg||"2D",type=type||"float",l=data.length,datas=[],i,j,k,arr;for(data instanceof Array||"object"!=typeof data||(this.minX=data.minX,this.minY=data.minY,this.maxX=data.maxX,this.maxY=data.maxY,data=data.segments,l=data.length),i=0;i<l;i++){for(k=data[i].lines.length,arr=this._addData(type,k),j=0;j<k;j+=2)arr[j]=data[i].lines[j],this._checkX(arr[j]),arr[j+1]=data[i].lines[j+1],this._checkY(arr[j+1]);datas.push({lines:arr,zValue:data[i].zValue})}return this.data=datas,this.graph.updateDataMinMaxAxes(),this.dataHasChanged(!0),this}draw(force){if(force||this.hasDataChanged()){this.currentLine=0;var i=0,l=this.data.length,j=0,xpx,ypx,xpx2,ypx2,k,m,domLine,arr;this.minZ=1/0,this.maxZ=-Infinity;var next=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var incrXFlip=0,incrYFlip=1;this.getFlip()&&(incrXFlip=0,incrYFlip=1);var minY=this.getYAxis().getCurrentMin(),minX=this.getXAxis().getCurrentMin(),maxX=this.getXAxis().getCurrentMax(),maxY=this.getYAxis().getCurrentMax();for(this.counter=0,this.currentLineId=0;i<l;i++){for(this.currentLine="",j=0,k=0,(arr=this.data[i].lines,m=arr.length);j<m;j+=4){var lastxpx,lastypx;arr[j+incrXFlip]<minX&&arr[j+2+incrXFlip]<minX||arr[j+incrYFlip]<minY&&arr[j+2+incrYFlip]<minY||arr[j+incrYFlip]>maxY&&arr[j+2+incrYFlip]>maxY||arr[j+incrXFlip]>maxX&&arr[j+2+incrXFlip]>maxX||(xpx2=this.getX(arr[j+incrXFlip]),ypx2=this.getY(arr[j+incrYFlip]),xpx=this.getX(arr[j+2+incrXFlip]),ypx=this.getY(arr[j+2+incrYFlip]),xpx!=xpx2||ypx!=ypx2)&&(this.currentLine+="M ",this.currentLine+=xpx2,this.currentLine+=" ",this.currentLine+=ypx2,this.currentLine+="L ",this.currentLine+=xpx,this.currentLine+=" ",this.currentLine+=ypx,this.counter++,lastxpx=xpx,lastypx=ypx,k++)}this.currentLine+=" z",domLine=this._createLine(),domLine.setAttribute("data-zvalue",this.data[i].zValue),this.zValues[this.data[i].zValue]={dom:domLine},this.minZ=Math.min(this.minZ,this.data[i].zValue),this.maxZ=Math.max(this.maxZ,this.data[i].zValue)}for(i++,i=this.currentLine+1;i<this.lines.length;i++)this.groupLines.removeChild(this.lines[i]),this.lines.splice(i,1);for(i=0;i<l;i++)this.setColorTo(this.lines[i],this.data[i].zValue,this.minZ,this.maxZ);this.onMouseWheel(0,{shiftKey:!1}),this.groupMain.insertBefore(this.groupLines,next)}else if(this.hasStyleChanged(this.selectionType))for(;i<l;i++)this.setColorTo(this.lines[i],this.data[i].zValue,this.minZ,this.maxZ)}onMouseWheel(delta,e,fixed,positive){for(var i in delta/=250,void 0===fixed?e.shiftKey&&this.options.hasNegative?(this.negativeDelta=Math.min(0,Math.max(-1,this.negativeDelta+Math.min(.1,Math.max(-.1,delta)))),this.negativeThreshold=-this.minZ*Math.pow(this.negativeDelta,3)):(this.positiveDelta=Math.min(1,Math.max(0,this.positiveDelta+Math.min(.1,Math.max(-.1,delta)))),this.positiveThreshold=this.maxZ*Math.pow(this.positiveDelta,3)):(!positive&&(this.negativeThreshold=-fixed*this.minZ,this.negativeDelta=-Math.pow(Math.abs(this.negativeThreshold/-this.minZ),1/3)),positive&&(this.positiveThreshold=fixed*this.maxZ,this.positiveDelta=Math.pow(this.positiveThreshold/this.maxZ,1/3))),isNaN(this.positiveDelta)&&(this.positiveDelta=0),isNaN(this.negativeDelta)&&(this.negativeDelta=0),this.zValues)this.zValues[i].dom.setAttribute("display",0<=i&&i>=this.positiveThreshold||0>=i&&i<=this.negativeThreshold?"block":"none");this._shapeZoom&&(this.options.hasNegative?(this._shapeZoom.setHandleNeg(-Math.pow(this.negativeDelta,3),this.minZ),this._shapeZoom.showHandleNeg()):this._shapeZoom.hideHandleNeg(),this._shapeZoom.setHandlePos(Math.pow(this.positiveDelta,3),this.maxZ))}handleMouseMove(xValue,doMarker,yValue){var valX=xValue||this.getXAxis().getMouseVal(),valY=yValue||this.getYAxis().getMouseVal();return{trueX:valX,interpolatedY:valY,xClosest:valX,yClosest:valY}}setDynamicColor(colors){this.lineColors=colors,this.styleHasChanged()}setNegative(bln){this.options.hasNegative=bln,bln&&(this.negativeThreshold=0)}setColorTo(line,zValue,min,max){if(this.lineColors){var hsl={h:0,s:0,l:0};for(var i in hsl)hsl[i]=0<zValue?this.lineColors.fromPositive[i]+(this.lineColors.toPositive[i]-this.lineColors.fromPositive[i])*(zValue/max):this.lineColors.fromNegative[i]+(this.lineColors.toNegative[i]-this.lineColors.fromNegative[i])*(zValue/min);hsl.h/=360;var rgb=util.hslToRgb(hsl.h,hsl.s,hsl.l);line.setAttribute("stroke",`rgb(${rgb.join()})`)}}getSymbolForLegend(){if(!this.lineForLegend){var line=document.createElementNS(this.graph.ns,"ellipse");line.setAttribute("cx",7),line.setAttribute("cy",0),line.setAttribute("rx",8),line.setAttribute("ry",3),line.setAttribute("cursor","pointer"),this.lineForLegend=line}return this.applyLineStyle(this.lineForLegend,this.maxZ),this.lineForLegend}applyLineStyle(line,overwriteValue){line.setAttribute("stroke",this.getLineColor()),line.setAttribute("stroke-width",this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&line.setAttribute("stroke-dasharray",this.getLineDashArray()),line.setAttribute("fill","none"),this.setColorTo(line,overwriteValue===void 0?line.getAttribute("data-zvalue"):overwriteValue,this.minZ,this.maxZ),this.hasStyleChanged(!1)}setShapeZoom(shape){this._shapeZoom=shape}}_exports.default=SerieContour,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphShape){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphShape=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShape);class ShapeSurfaceUnderCurve extends _graphShape.default{createDom(){this._dom=document.createElementNS(this.graph.ns,"path")}createHandles(){this._createHandles(2,"line",{"stroke-width":"3",stroke:"transparent","pointer-events":"stroke",cursor:"ew-resize"})}handleMouseMoveImpl(e,deltaX){if(!this.isLocked()){if(this.moving)this.getPosition(0).deltaPosition("x",deltaX,this.getXAxis()),this.getPosition(1).deltaPosition("x",deltaX,this.getXAxis());else if(this.serie&&this.handleSelected){this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1);var value=this.serie.getClosestPointToXY(this.getXAxis().getVal(this.graph._getXY(e).x-this.graph.getPaddingLeft()));if(!value)return;this.resizingPosition.x!=value.xMin&&(this.preventUnselect=!0),this.resizingPosition.x=value.xMin}else this.handleSelected&&(this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1),this.resizingPosition.deltaPosition("x",deltaX,this.getXAxis()));this.applyPosition()}}applyPosition(){if(this.serie){var posXY=this.computePosition(0),posXY2=this.computePosition(1),w=Math.abs(posXY.x-posXY2.x),x=Math.min(posXY.x,posXY2.x);if(2>w||0>x+w||x>this.graph.getDrawingWidth())return this.setDom("d",""),!1;var v1=this.serie.getClosestPointToXY(this.getPosition(0).x),v2=this.serie.getClosestPointToXY(this.getPosition(1).x),maxY=0,minY=Number.MAX_VALUE,v3,i,j,init,max,k,x,y;if(!v1||!v2)return!1;for(v1.xBeforeIndex>v2.xBeforeIndex&&(v3=v1,v1=v2,v2=v3),this.counter=0,i=v1.dataIndex;i<=v2.dataIndex;i++){for(this.currentLine="",init=i==v1.dataIndex?v1.xBeforeIndexArr:0,max=i==v2.dataIndex?v2.xBeforeIndexArr:this.serie.data[i].length,k=0,init==max&&max++,j=init;j<=max;j+=2)x=this.serie.getX(this.serie.data[i][j+0]),y=this.serie.getY(this.serie.data[i][j+1]),maxY=Math.max(this.serie.data[i][j+1],maxY),minY=Math.min(this.serie.data[i][j+1],minY),j==init&&(this.firstX=x,this.firstY=y),this.currentLine+=0<k?` L ${x} ${y} `:` M ${x} ${y} `,k++;if(this.lastX=x,this.lastY=y,!this.firstX||!this.firstY||!this.lastX||!this.lastY)return;this.currentLine+=` V ${this.getYAxis().getPx(0)} H ${this.firstX} z`,this.setDom("d",this.currentLine)}return this.maxY=this.serie.getY(maxY),this.setHandles(),this.changed(),!0}}setHandles(){if(this.firstX){var posXY=this.computePosition(0),posXY2=this.computePosition(1);posXY.x<posXY2.x?(this.handles[1].setAttribute("x1",this.firstX),this.handles[1].setAttribute("x2",this.firstX),this.handles[2].setAttribute("x1",this.lastX),this.handles[2].setAttribute("x2",this.lastX)):(this.handles[1].setAttribute("x1",this.lastX),this.handles[1].setAttribute("x2",this.lastX),this.handles[2].setAttribute("x1",this.firstX),this.handles[2].setAttribute("x2",this.firstX)),this.handles[1].setAttribute("y1",this.getYAxis().getMaxPx()),this.handles[1].setAttribute("y2",this.serie.getY(0)),this.handles[2].setAttribute("y1",this.getYAxis().getMaxPx()),this.handles[2].setAttribute("y2",this.serie.getY(0))}}}_exports.default=ShapeSurfaceUnderCurve,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(13)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphShapeLine){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphShapeLine=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShapeLine);class ShapeArrow extends _graphShapeLine.default{constructor(graph){super(graph)}createDom(){this._dom=document.createElementNS(this.graph.ns,"line"),this._dom.setAttribute("marker-end",`url(#arrow${this.graph._creation})`),this.createHandles(this.nbHandles,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"}),this.setStrokeColor("black"),this.setStrokeWidth(1)}}_exports.default=ShapeArrow,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphShape){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphShape=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShape);class ShapeEllipse extends _graphShape.default{constructor(graph,options){super(graph,options)}createDom(){this._dom=document.createElementNS(this.graph.ns,"ellipse")}applyPosition(){var pos=this.computePosition(0);if(!pos)return;this.setDom("cx",pos.x||0),this.setDom("cy",pos.y||0);let posR=this.graph.newPosition({dx:this.getProp("rx"),dy:this.getProp("ry")||this.getProp("rx")}),posComputed=this.calculatePosition(posR);return this.setDom("rx",Math.abs(posComputed.x)||0),this.setDom("ry",Math.abs(posComputed.y)||0),!0}setR(rx,ry){return this.setProp("rx",rx),this.setProp("ry",ry),this}handleMouseUpImpl(){this.triggerChange()}handleMouseMoveImpl(){}}_exports.default=ShapeEllipse,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphShape){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphShape=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShape);class ShapeLabel extends _graphShape.default{constructor(graph,options){super(graph,options)}createDom(){return!1}applyPosition(){return!0}}_exports.default=ShapeLabel,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphShape){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphShape=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShape);class ShapePolyline extends _graphShape.default{constructor(graph,options){super(graph,options),this.setProp("fillColor","none")}createDom(){this._dom=document.createElementNS(this.graph.ns,"path"),this.getStrokeColor()||this.setStrokeColor("black"),this.getStrokeWidth()===void 0&&this.setStrokeWidth(1)}createHandles(){}setPointsPx(){return this}applyPosition(){let str="",index=0;for(;;){let pos=this.getPosition(index);if(void 0===pos)break;let posXY;if(posXY=this.serie?pos.compute(this.graph,this.serie.getXAxis(),this.serie.getYAxis(),this.serie):pos.compute(this.graph,this.getXAxis(),this.getYAxis()),isNaN(posXY.x)||isNaN(posXY.y))return;str+=0==index?" M ":" L ",str+=`${posXY.x} ${posXY.y}`,index++}return this.setDom("d",str),this.changed(),!0}}_exports.default=ShapePolyline,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphShape){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphShape=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShape);class ShapePolyline extends _graphShape.default{constructor(graph,options){super(graph,options)}createDom(){this._dom=document.createElementNS(this.graph.ns,"path"),this.getStrokeColor()||this.setStrokeColor("black"),this.getStrokeWidth()===void 0&&this.setStrokeWidth(1)}createHandles(){}setPointsPx(points){return this.setProp("pxPoints",points),this}applyPosition(){let str="",index=0;for(;;){let pos=this.getPosition(index);if(void 0===pos)break;let posXY;if(posXY=this.serie?pos.compute(this.graph,this.serie.getXAxis(),this.serie.getYAxis(),this.serie):pos.compute(this.graph,this.getXAxis(),this.getYAxis()),isNaN(posXY.x)||isNaN(posXY.y))return;str+=0==index?" M ":" L ",str+=`${posXY.x} ${posXY.y}`,index++}return str+="z",this.setDom("d",str),this.changed(),!0}}_exports.default=ShapePolyline,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(4),__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphPosition,_graphShape){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphPosition=_interopRequireDefault(_graphPosition),_graphShape=_interopRequireDefault(_graphShape);class ShapeNMRIntegral extends _graphShape.default{constructor(graph,options){super(graph,options),this.nbHandles=2}createDom(){this._dom=document.createElementNS(this.graph.ns,"path"),this._domShadow=document.createElementNS(this.graph.ns,"path"),this._domShadow.jsGraphIsShape=this,this._dom.setAttribute("pointer-events","stroke"),this._domShadow.setAttribute("pointer-events","stroke"),this._domShadow.setAttribute("stroke-width","12"),this._domShadow.setAttribute("fill","transparent"),this._domShadow.setAttribute("stroke","transparent"),this.group.appendChild(this._domShadow)}initImpl(){this.setFillColor("transparent"),this.setStrokeColor("black")}createHandles(){this._createHandles(2,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white"}),this.handles[1].setAttribute("fill","red")}xor(a,b){return a&&!b||!a&&b}applyPosition(){let axis=this.getAxis(),points=[],currentLine="",baseLine=this.getProp("baseLine",0)||300,x,y,xVal,yVal,ratio;if(!this.serie)throw"No serie exists for this shape";let pos1=this.getPosition(0),pos2=this.getPosition(1);if(pos1.x<this.serie.getXAxis().getCurrentMin()&&pos2.x<this.serie.getXAxis().getCurrentMin()||pos1.x>this.serie.getXAxis().getCurrentMax()&&pos2.x>this.serie.getXAxis().getCurrentMax())return this.setDom("d",""),this._domShadow.setAttribute("d",""),this.hideLabel(0),!1;this.showLabel(0);let sum=0,waveform=this.serie.getWaveform(),j;if(!waveform)return;let index1=waveform.getIndexFromX(pos1[axis],!0,Math.floor),index2=waveform.getIndexFromX(pos2[axis],!0,Math.ceil),flipped=!1,index3;index1==index2&&("aggregate"==waveform.getReductionType()?index2+=4:index2++),index2<index1&&(index3=index1,index1=index2,index2=index3,flipped=!0);let data=waveform.getDataInUse(),normalSums=!0,firstX,firstY,firstXVal,firstYVal,lastX,lastXVal,lastY,lastYVal,condition,incrementation;for("aggregate"==waveform.getReductionType()&&(normalSums=!1),waveform.getXMonotoneousAscending()&&1==1||!waveform.getXMonotoneousAscending()&&1==2?(j=index2,condition=!0,incrementation=-1):(j=index1,condition=!1,incrementation=1);condition?j>=index1:j<=index2;j+=incrementation){if(xVal=waveform.getX(j,!0),yVal=waveform.getY(j,!0),x=this.serie.getX(xVal),y=this.serie.getY(yVal),sum+=waveform.getY(j,!0),firstX||(firstX=x,firstY=y,firstXVal=waveform.getX(j),firstYVal=waveform.getY(j)),null==lastX){lastX=x,lastY=y,lastXVal=waveform.getX(j),lastYVal=waveform.getY(j);continue}x!=lastX||y!=lastY,lastX=x,lastY=y,points.push([x,y,sum]),lastXVal=xVal}lastXVal=!1,lastYVal=!1,lastX=!1,lastY=!1,0==sum&&(sum=1),this._sumVal=waveform.integrate(pos1.x,pos2.x),ratio=this.ratio?this.ratio*(this.sumVal/sum):200/sum;let py;if(0!=points.length){for(var i=0,l=points.length;i<l;i++){if(py=baseLine-points[i][2]*ratio,0<i&&(points[i-1][2]>sum/2&&points[i][2]<=sum/2||points[i-1][2]<sum/2&&points[i][2]>=sum/2)){let pos=baseLine-(points[i-1][2]+points[i][2])/2*ratio;this.setPosition({x:`${points[i][0]}px`,y:`${pos}px`},3),this.setLabelPosition(this.getPosition(3),0)}currentLine+=` L ${points[i][0]}, ${py} `,this.lastPointX=points[i][0],this.lastPointY=py}return this.points=points,this._sum=sum,currentLine=this.serie.isFlipped()?` M ${baseLine}, ${firstX} ${currentLine}`:` M ${firstX}, ${baseLine} ${currentLine}`,this.firstPointX=firstX,this.firstPointY=baseLine,this.setDom("d",currentLine),this._domShadow.setAttribute("d",currentLine),this.firstX=firstX,this.firstY=firstY,this.serie.ratioLabel&&this.updateIntegralValue(this.serie.ratioLabel)||this.updateLabels(),this.changed(),this.handleCondition=!this.xor(-1==incrementation,flipped),this.setHandles(),this.updateIntegralValue(),!0}}updateIntegralValue(ratioLabel=this.serie.ratioLabel,forceValue){return console.log(ratioLabel),ratioLabel&&(this.serie.ratioLabel=ratioLabel),isNaN(forceValue)||isNaN(this.sumVal)||!this.sumVal||(this.serie.ratioLabel=forceValue/this.sumVal),this.setLabelText(ratioLabel?(Math.round(100*this.sumVal*ratioLabel)/100).toPrecision(3):"N/A",0),this.updateLabels(),this.serie.ratioLabel}getAxis(){return this._data.axis||"x"}set ratio(r){this._ratio=r}get ratio(){return this._ratio}get sum(){return this._sum}get sumVal(){return this._sumVal}selectStyle(){this.setDom("stroke-width","2px")}selectHandles(){}setHandles(){null!=this.points&&this.isSelected()&&(this.addHandles(),this.handleCondition?(this.handles[1].setAttribute("x",this.firstPointX),this.handles[1].setAttribute("y",this.firstPointY),this.handles[2].setAttribute("x",this.lastPointX),this.handles[2].setAttribute("y",this.lastPointY)):(this.handles[2].setAttribute("x",this.firstPointX),this.handles[2].setAttribute("y",this.firstPointY),this.handles[1].setAttribute("x",this.lastPointX),this.handles[1].setAttribute("y",this.lastPointY)))}handleMouseMoveImpl(e,deltaX){if(!this.isLocked()){var pos=this.getPosition(0),pos2=this.getPosition(1),posToChange;return 1==this.handleSelected?posToChange=pos:2==this.handleSelected&&(posToChange=pos2),posToChange&&!this._data.vertical&&posToChange.deltaPosition("x",deltaX,this.getXAxis()),this.moving&&(pos.x&&pos.deltaPosition("x",deltaX,this.getXAxis()),pos2.x&&pos2.deltaPosition("x",deltaX,this.getXAxis())),this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),!0}}}_exports.default=ShapeNMRIntegral,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(18)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphShapeRect){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphShapeRect=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShapeRect);class ShapePeakIntegration2D extends _graphShapeRect.default{constructor(graph,options){super(graph,options),this.nbHandles=4}createDom(){this._dom=document.createElementNS(this.graph.ns,"rect"),this._dom.element=this,this.createHandles(this.nbHandles,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}redrawImpl(){this.setPosition(),this.setHandles(),this.setBindableToDom(this._dom)}}_exports.default=ShapePeakIntegration2D,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphShape){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphShape=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShape);class ShapeCross extends _graphShape.default{constructor(graph,options){super(graph,options),this.nbHandles=1}get width(){return this.options.width||10}set width(l){this.options.width=l}createDom(){this._dom=document.createElementNS(this.graph.ns,"path"),this._dom.setAttribute("d",`M -${this.width/2} 0 h ${this.width} m -${this.width/2} -${this.width/2} v ${this.width}`)}createHandles(){this._createHandles(this.nbHandles,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}applyPosition(){var position=this.calculatePosition(0);if(position&&position.x&&position.y)return this.setDom("transform",`translate( ${position.x}, ${position.y})`),this.currentPos1x=position.x,this.currentPos1y=position.y,!0}redrawImpl(){this.setHandles()}handleCreateImpl(){}handleMouseDownImpl(){return this.moving=!0,!0}handleMouseUpImpl(){return this.triggerChange(),!0}handleMouseMoveImpl(e,deltaX,deltaY){if(!this.isLocked()){var pos=this.getFromData("pos");return this.moving&&(pos.x=this.graph.deltaPosition(pos.x,deltaX,this.getXAxis()),pos.y=this.graph.deltaPosition(pos.y,deltaY,this.getYAxis())),this.redrawImpl(),!0}}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute("x",this.currentPos1x),this.handles[1].setAttribute("y",this.currentPos1y))}selectStyle(){this.setDom("stroke","red"),this.setDom("stroke-width","2")}}_exports.default=ShapeCross,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(13)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphShapeLine){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphShapeLine=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShapeLine);class ShapePeakBoundaries extends _graphShapeLine.default{constructor(graph){super(graph),this.lineHeight=6}createDom(){this._dom=document.createElementNS(this.graph.ns,"line"),this.line1=document.createElementNS(this.graph.ns,"line"),this.line2=document.createElementNS(this.graph.ns,"line"),this.line3=document.createElementNS(this.graph.ns,"line"),this.rectBoundary=document.createElementNS(this.graph.ns,"path"),this.rectBoundary.setAttribute("fill","transparent"),this.rectBoundary.setAttribute("stroke","none"),this.rectBoundary.setAttribute("pointer-events","fill"),this.rectBoundary.jsGraphIsShape=!0,this.group.appendChild(this.rectBoundary),this.group.appendChild(this.line1),this.group.appendChild(this.line2),this.group.appendChild(this.line3),this._dom.element=this}createHandles(){this._createHandles(3,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}redrawImpl(){this.line1.setAttribute("stroke",this.getStrokeColor()),this.line2.setAttribute("stroke",this.getStrokeColor()),this.line3.setAttribute("stroke",this.getStrokeColor()),this.line1.setAttribute("stroke-width",this.getStrokeWidth()),this.line2.setAttribute("stroke-width",this.getStrokeWidth()),this.line3.setAttribute("stroke-width",this.getStrokeWidth()),this.setHandles(),this.redrawLines()}redrawLines(){var posLeft=this.computePosition(0),posRight=this.computePosition(1),posCenter=this.computePosition(2);if(posLeft.x&&posRight.x&&posCenter.x&&this.posYPx){var height=this.lineHeight;this.rectBoundary.setAttribute("d",`M ${posLeft.x} ${this.posYPx-height} v ${2*height} H ${posRight.x} v ${-2*height}z`),this.line1.setAttribute("x1",posLeft.x),this.line1.setAttribute("x2",posLeft.x),this.line2.setAttribute("x1",posRight.x),this.line2.setAttribute("x2",posRight.x),this.line3.setAttribute("x1",posCenter.x),this.line3.setAttribute("x2",posCenter.x),this._dom.setAttribute("x1",posLeft.x),this._dom.setAttribute("x2",posRight.x),this.redrawY(height)}return this}redrawY(){if(!this.posYPx)return this;var height=this.lineHeight;return this.line1.setAttribute("y1",this.posYPx-height),this.line1.setAttribute("y2",this.posYPx+height),this.line2.setAttribute("y1",this.posYPx-height),this.line2.setAttribute("y2",this.posYPx+height),this.line3.setAttribute("y1",this.posYPx-height),this.line3.setAttribute("y2",this.posYPx+height),this._dom.setAttribute("y1",this.posYPx),this._dom.setAttribute("y2",this.posYPx),this}setHandles(){if(this.posYPx){var posLeft=this.computePosition(0),posRight=this.computePosition(1),posCenter=this.computePosition(2);posLeft.x&&posRight.x&&posCenter.x&&(this.handles[1].setAttribute("x",posLeft.x),this.handles[1].setAttribute("y",this.posYPx),this.handles[2].setAttribute("x",posRight.x),this.handles[2].setAttribute("y",this.posYPx),this.handles[3].setAttribute("x",posCenter.x),this.handles[3].setAttribute("y",this.posYPx))}}setY(y){return this.posYPx=y,this}setLineHeight(height){this.lineHeihgt=height}handleMouseMoveImpl(e,deltaX){if(!this.isLocked()){var posLeft=this.getPosition(0),posRight=this.getPosition(1),posCenter=this.getPosition(2);switch(this.handleSelected){case 1:posLeft.deltaPosition("x",deltaX,this.getXAxis()),(Math.abs(posCenter.x-posRight.x)>Math.abs(posRight.x-posLeft.x)||Math.abs(posCenter.x-posLeft.x)>Math.abs(posRight.x-posLeft.x))&&(posCenter.x=posLeft.x+.1*(posRight.x-posLeft.x));break;case 2:posRight.deltaPosition("x",deltaX,this.getXAxis()),(Math.abs(posCenter.x-posRight.x)>Math.abs(posRight.x-posLeft.x)||Math.abs(posCenter.x-posLeft.x)>Math.abs(posRight.x-posLeft.x))&&(posCenter.x=posRight.x+.1*(posLeft.x-posRight.x));break;case 3:if(posCenter.deltaPosition("x",deltaX,this.getXAxis()),Math.abs(posCenter.x-posRight.x)>Math.abs(posRight.x-posLeft.x)||Math.abs(posCenter.x-posLeft.x)>Math.abs(posRight.x-posLeft.x))return;}this.setLabelPosition({y:this.getLabelPosition(0).y,x:posCenter.x}),this.updateLabels(),this.redrawLines(),this.setHandles()}}applyPosition(){return this.redrawLines(),!0}}_exports.default=ShapePeakBoundaries,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphUtil,_graphShape){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphShape=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphShape);class ShapeHTML extends _graphShape.default{constructor(graph,options){super(graph,options)}createDom(){this._dom=document.createElement("div"),this._dom.setAttribute("style","position: absolute");let div=document.createElement("div");this._dom.appendChild(div),this.div=div}createHandles(){}setHeight(height){this.setProp("height",height)}setWidth(width){this.setProp("width",width)}setContent(content){this.setProp("content",content)}setRenderer(method){this._renderer=method}redraw(){this._renderer?this._renderer(this.div):this.div.innerHTML=this.getProp("content"),super.redraw(...arguments)}applyPosition(){var position=this.calculatePosition(0);if(position&&(0,_graphUtil.isNumeric)(position.x)&&(0,_graphUtil.isNumeric)(position.y))return this._dom.style.left=`${position.x}px`,this._dom.style.top=`${position.y}px`,this.currentPosX=position.x,this.currentPosY=position.y,!0}handleMouseMoveImpl(){return!0}setHandles(){}isHTML(){return!0}}_exports.default=ShapeHTML,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphPlugin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphPlugin=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphPlugin);class PluginDrag extends _graphPlugin.default{static default(){return{dragX:!0,dragY:!0,persistanceX:!1,persistanceY:!1}}init(graph){this.graph=graph,this.time=null,this.totaltime=2e3}onMouseDown(graph,x,y){return this._draggingX=x,this._draggingY=y,this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this.stopAnimation=!0,this.moved=!1,!0}onMouseMove(graph,x,y){var deltaX=x-this._draggingX,deltaY=y-this._draggingY;this.options.dragX&&graph._applyToAxes(function(axis){axis.setCurrentMin(axis.getVal(axis.getMinPx()-deltaX)),axis.setCurrentMax(axis.getVal(axis.getMaxPx()-deltaX))},!1,!0,!1),this.options.dragY&&graph._applyToAxes(function(axis){axis.setCurrentMin(axis.getVal(axis.getMinPx()-deltaY)),axis.setCurrentMax(axis.getVal(axis.getMaxPx()-deltaY))},!1,!1,!0),this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this._draggingX=x,this._draggingY=y,this.moved=!0,this.time=Date.now(),this.emit("dragging"),graph.draw(!0)}onMouseUp(graph,x,y){var dt=Date.now()-this.time;return x==this._lastDraggingX||y==this._lastDraggingY?void(this.moved&&this.emit("dragged")):(this.speedX=(x-this._lastDraggingX)/dt,this.speedY=(y-this._lastDraggingY)/dt,isNaN(this.speedX)||isNaN(this.speedY)?void this.emit("dragged"):void(graph._applyToAxes(function(axis){axis._pluginDragMin=axis.getCurrentMin(),axis._pluginDragMax=axis.getCurrentMax()},!1,!0,!0),this.stopAnimation=!1,this.accelerationX=-this.speedX/this.totaltime,this.accelerationY=-this.speedY/this.totaltime,this.options.persistanceX||this.options.persistanceY?this._persistanceMove(graph):this.emit("dragged")))}_persistanceMove(graph){var self=this;return self.stopAnimation?void self.emit("dragged"):void window.requestAnimationFrame(function(){var dt=Date.now()-self.time,dx=(.5*self.accelerationX*dt+self.speedX)*dt,dy=(.5*self.accelerationY*dt+self.speedY)*dt;self.options.persistanceX&&graph._applyToAxes(function(axis){axis.setCurrentMin(-axis.getRelVal(dx)+axis._pluginDragMin),axis.setCurrentMax(-axis.getRelVal(dx)+axis._pluginDragMax),axis.cacheCurrentMin(),axis.cacheCurrentMax(),axis.cacheInterval()},!1,!0,!1),self.options.persistanceY&&graph._applyToAxes(function(axis){axis.setCurrentMin(-axis.getRelVal(dy)+axis._pluginDragMin),axis.setCurrentMax(-axis.getRelVal(dy)+axis._pluginDragMax),axis.cacheCurrentMin(),axis.cacheCurrentMax(),axis.cacheInterval()},!1,!1,!0),graph.draw(),dt<self.totaltime?(self.emit("dragging"),self._persistanceMove(graph)):self.emit("dragged")})}}_exports.default=PluginDrag,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphPlugin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphPlugin=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphPlugin);class PluginShape extends _graphPlugin.default{constructor(){super(...arguments)}static default(){return{}}init(graph,options){super.init(graph,options),this.shapeType=options.type}setShape(shapeType){this.shapeInfo.shapeType=shapeType}onMouseDown(graph,x,y,e){if(this.shapeType||this.options.url){var self=this,selfPlugin=this,xVal,yVal;this.count=this.count||0,x-=graph.getPaddingLeft(),y-=graph.getPaddingTop(),xVal=graph.getXAxis().getVal(x),yVal=graph.getYAxis().getVal(y);var shapeInfo={position:[{x:xVal,y:yVal},{x:xVal,y:yVal}],onChange:function(newData){graph.triggerEvent("onAnnotationChange",newData)},locked:!1,selectable:!0,resizable:!0,movable:!0};let shapeProperties=this.options.properties;if(util.extend(!0,shapeInfo,this.options),this.emit("beforeNewShape",e,shapeInfo),!this.graph.prevent(!1)){var shape=graph.newShape(shapeInfo.type,shapeInfo,!1,shapeProperties);this.emit("createdShape",e,shape),shape&&(self.currentShape=shape,self.currentShapeEvent=e),graph.once("mouseUp",()=>{this.currentShape||self.emit("newShape",e,shape)})}}}onMouseMove(graph,x,y,e){if(this.currentShape){this.count++;var shape=this.currentShape;this.currentShape=!1,graph.selectedSerie&&!shape.serie&&shape.setSerie(graph.selectedSerie),shape.resizing=!0,shape.options&&shape.options.onCreate&&shape.options.onCreate.call(shape),shape.draw(),graph.selectShape(shape),shape.handleMouseDown(this.currentShapeEvent,!0),shape.handleSelected=this.options.handleSelected||1,shape.handleMouseMove(e,!0)}}onMouseUp(){this.currentShape&&(this.currentShape.kill(),this.currentShape=!1)}}_exports.default=PluginShape,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphPlugin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphPlugin=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphPlugin);class PluginSelectScatter extends _graphPlugin.default{constructor(){super(...arguments)}static default(){return{}}init(graph){this._path=document.createElementNS(graph.ns,"path"),util.setAttributeTo(this._path,{display:"none",fill:"rgba(0,0,0,0.1)",stroke:"rgba(0,0,0,1)","shape-rendering":"crispEdges",x:0,y:0,height:0,width:0,d:""}),this.graph=graph,graph.dom.appendChild(this._path)}setSerie(serie){this.options.serie=serie}onMouseDown(graph,x,y){if(this.options.serie){const serie=graph.getSerie(this.options.serie);this.path=`M ${x} ${y} `,this.currentX=x,this.currentY=y,this.xs=[serie.getXAxis().getVal(x-graph.getPaddingLeft())],this.ys=[serie.getYAxis().getVal(y-graph.getPaddingTop())],this._path.setAttribute("d",""),this._path.setAttribute("display","block")}}onMouseMove(graph,x,y){if(this.options.serie){const serie=graph.getSerie(this.options.serie);25<Math.pow(x-this.currentX,2)+Math.pow(y-this.currentY,2)&&(this.path+=` L ${x} ${y} `,this.currentX=x,this.currentY=y,this.xs.push(serie.getXAxis().getVal(x-graph.getPaddingLeft())),this.ys.push(serie.getYAxis().getVal(y-graph.getPaddingTop())),this._path.setAttribute("d",`${this.path} z`),this.findPoints())}}findPoints(){if(this.options.serie){const serie=this.graph.getSerie(this.options.serie);for(var data=serie.waveform,selected=[],counter=0,i=0,l=data.getLength(),j2;i<l;i+=1){counter=0;for(var j=0,k=this.xs.length;j<k;j+=1)j2=j==k-1?0:j+1,(this.ys[j]<data.getY(i)&&this.ys[j2]>data.getY(i)||this.ys[j]>data.getY(i)&&this.ys[j2]<data.getY(i))&&data.getX(i)>(data.getY(i)-this.ys[j])/(this.ys[j2]-this.ys[j])*(this.xs[j2]-this.xs[j])+this.xs[j]&&counter++;1==counter%2?(selected.push(i),serie.selectMarker(i,!0,"selected")):serie.unselectMarker(i)}this.selected=selected,this.emit("selectionProcess",selected)}}onMouseUp(){this._path.setAttribute("display","none"),this.emit("selectionEnd",this.selected)}}_exports.default=PluginSelectScatter,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphPlugin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphPlugin=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphPlugin);class PluginZoom extends _graphPlugin.default{constructor(){super(...arguments)}static default(){return{axes:"all"}}init(graph){this._zoomingGroup=document.createElementNS(graph.ns,"g"),this._zoomingSquare=document.createElementNS(graph.ns,"rect"),this._zoomingSquare.setAttribute("display","none"),util.setAttributeTo(this._zoomingSquare,{display:"none",fill:"rgba(171,12,12,0.2)",stroke:"rgba(171,12,12,1)","shape-rendering":"crispEdges",x:0,y:0,height:0,width:0,"pointer-events":"none"}),this.graph=graph,graph.groupEvent.appendChild(this._zoomingGroup),this._zoomingGroup.appendChild(this._zoomingSquare)}onMouseDown(graph,x,y,e,mute){var zoomMode=this.options.zoomMode;if(zoomMode){switch(this._zoomingMode=zoomMode,void 0===x&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode="y",x=0),void 0===y&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode="x",y=0),this._zoomingXStart=x,this._zoomingYStart=y,this.x1=x-graph.getPaddingLeft(),this.y1=y-graph.getPaddingTop(),this._zoomingSquare.setAttribute("width",0),this._zoomingSquare.setAttribute("height",0),this._zoomingSquare.setAttribute("display","block"),this._zoomingMode){case"x":this._zoomingSquare.setAttribute("y",graph.options.paddingTop),this._zoomingSquare.setAttribute("height",graph.getDrawingHeight()-graph.shift.bottom);break;case"y":this._zoomingSquare.setAttribute("x",graph.options.paddingLeft),this._zoomingSquare.setAttribute("width",graph.getDrawingWidth());break;case"forceY2":this.y2=graph.getYAxis().getPx(this.options.forcedY)+graph.options.paddingTop;}this.options.onZoomStart&&!mute&&this.options.onZoomStart(graph,x,y,e,mute)}}onMouseMove(graph,x,y,e,mute){switch(this._zoomingMode){case"xy":this._zoomingSquare.setAttribute("x",Math.min(this._zoomingXStart,x)),this._zoomingSquare.setAttribute("y",Math.min(this._zoomingYStart,y)),this._zoomingSquare.setAttribute("width",Math.abs(this._zoomingXStart-x)),this._zoomingSquare.setAttribute("height",Math.abs(this._zoomingYStart-y));break;case"forceY2":this._zoomingSquare.setAttribute("y",Math.min(this._zoomingYStart,this.y2)),this._zoomingSquare.setAttribute("height",Math.abs(this._zoomingYStart-this.y2)),this._zoomingSquare.setAttribute("x",Math.min(this._zoomingXStart,x)),this._zoomingSquare.setAttribute("width",Math.abs(this._zoomingXStart-x));break;case"x":this._zoomingSquare.setAttribute("x",Math.min(this._zoomingXStart,x)),this._zoomingSquare.setAttribute("width",Math.abs(this._zoomingXStart-x));break;case"y":this._zoomingSquare.setAttribute("y",Math.min(this._zoomingYStart,y)),this._zoomingSquare.setAttribute("height",Math.abs(this._zoomingYStart-y));}this.options.onZoomMove&&!mute&&this.options.onZoomMove(graph,x,y,e,mute)}onMouseUp(graph,x,y,e,mute){var self=this;this.removeZone();var _x=x-graph.options.paddingLeft,_y=y-graph.options.paddingTop;if((this.emit("beforeZoom",{graph:graph,x:x,y:y,e:e,mute:mute}),!graph.prevent(!1))&&(0!=x-this._zoomingXStart||"y"==this._zoomingMode)&&(0!=y-this._zoomingYStart||"x"==this._zoomingMode))if(this.options.transition||this.options.smooth){let modeX=!1,modeY=!1;("x"==this._zoomingMode||"xy"==this._zoomingMode||"forceY2"==this._zoomingMode)&&(this.fullX=!1,this.toAxes(function(axis){axis._pluginZoomMin=axis.getCurrentMin(),axis._pluginZoomMax=axis.getCurrentMax(),axis._pluginZoomMinFinal=Math.min(axis.getVal(_x),axis.getVal(self.x1)),axis._pluginZoomMaxFinal=Math.max(axis.getVal(_x),axis.getVal(self.x1))},!1,!0,!1),modeX=!0),("y"==this._zoomingMode||"xy"==this._zoomingMode)&&(this.fullY=!1,this.toAxes(function(axis){axis._pluginZoomMin=axis.getCurrentMin(),axis._pluginZoomMax=axis.getCurrentMax(),axis._pluginZoomMinFinal=Math.min(axis.getVal(_y),axis.getVal(self.y1)),axis._pluginZoomMaxFinal=Math.max(axis.getVal(_y),axis.getVal(self.y1))},!1,!1,!0),modeY=!0),"forceY2"==this._zoomingMode&&(this.fullY=!1,this.toAxes(function(axis){axis._pluginZoomMin=axis.getCurrentMin(),axis._pluginZoomMax=axis.getCurrentMax(),axis._pluginZoomMinFinal=Math.min(axis.getVal(self.y2),axis.getVal(self.y1)),axis._pluginZoomMaxFinal=Math.max(axis.getVal(self.y2),axis.getVal(self.y1))},!1,!1,!0),modeY=!0),this.transition(modeX,modeY,"zoomEnd")}else{switch(this._zoomingMode){case"x":this.fullX=!1,this.toAxes("_doZoom",[_x,this.x1],!0,!1);break;case"y":this.fullY=!1,this.toAxes("_doZoom",[_y,this.y1],!1,!0);break;case"xy":this.fullX=!1,this.fullY=!1,this.toAxes("_doZoom",[_x,this.x1],!0,!1),this.toAxes("_doZoom",[_y,this.y1],!1,!0);break;case"forceY2":this.fullX=!1,this.fullY=!1,this.toAxes("_doZoom",[_x,this.x1],!0,!1),this.toAxes("_doZoom",[this.y1,this.y2],!1,!0);}graph.draw(),this._backedUpZoomMode&&(this._zoomingMode=this._backedUpZoomMode),this.emit("zoomed"),graph.pluginYieldActiveState()}}removeZone(){this._zoomingSquare.setAttribute("display","none")}onMouseWheel(delta,e,coordX,coordY,options){options||(options={}),options.baseline||(options.baseline=0);let baseline=options.baseline;"mousePosition"==options.baseline&&(baseline=this.graph.getYAxis().getVal(coordY));var doX="x"==options.direction,doY="y"===options.direction;this.toAxes("handleMouseWheel",[delta,e,baseline],doX,doY),this.graph.drawSeries()}onDblClick(x,y,e,pref,mute){var graph=this.graph;if(this.emit("beforeDblClick",{graph:graph,x:x,y:y,pref:pref,e:e,mute:mute}),!graph.prevent(!1)){if(this.options.transition||this.options.smooth){var modeX=!1,modeY=!1;("xtotal"==pref.mode||"total"==pref.mode)&&(this.toAxes(function(axis){axis._pluginZoomMin=axis.getCurrentMin(),axis._pluginZoomMax=axis.getCurrentMax(),axis._pluginZoomMinFinal=axis.getMinValue()-axis.options.axisDataSpacing.min*axis.getInterval(),axis._pluginZoomMaxFinal=axis.getMaxValue()+axis.options.axisDataSpacing.max*axis.getInterval()},!1,!0,!1),modeX=!0),("ytotal"==pref.mode||"total"==pref.mode)&&(this.toAxes(function(axis){axis._pluginZoomMin=axis.getCurrentMin(),axis._pluginZoomMax=axis.getCurrentMax(),axis._pluginZoomMinFinal=axis.getMinValue()-axis.options.axisDataSpacing.min*axis.getInterval(),axis._pluginZoomMaxFinal=axis.getMaxValue()+axis.options.axisDataSpacing.max*axis.getInterval()},!1,!1,!0),modeY=!0);let x,y;return("gradualX"==pref.mode||"gradualY"==pref.mode||"gradual"==pref.mode||"gradualXY"==pref.mode)&&(x=!1,y=!1,("gradualX"==pref.mode||"gradual"==pref.mode||"gradualXY"==pref.mode)&&(x=!0,modeX=!0),("gradualY"==pref.mode||"gradual"==pref.mode||"gradualXY"==pref.mode)&&(y=!0,modeY=!0),this.toAxes(function(axis){axis._pluginZoomMin=axis.getCurrentMin(),axis._pluginZoomMax=axis.getCurrentMax(),axis._pluginZoomMinFinal=axis.getCurrentMin()-(axis.getCurrentMax()-axis.getCurrentMin()),axis._pluginZoomMaxFinal=axis.getCurrentMax()+(axis.getCurrentMax()-axis.getCurrentMin())},!1,x,y)),void this.transition(modeX,modeY,"dblClick")}var xAxis=this.graph.getXAxis(),yAxis=this.graph.getYAxis();if("xtotal"==pref.mode)this.toAxes("setMinMaxToFitSeries",null,!0,!1),this.fullX=!0,this.fullY=!1;else if("ytotal"==pref.mode)this.toAxes("setMinMaxToFitSeries",null,!1,!0),this.fullX=!1,this.fullY=!0;else if("total"==pref.mode)this.toAxes("setMinMaxToFitSeries",null,!0,!0),this.fullX=!0,this.fullY=!0;else{x-=this.graph.options.paddingLeft,y-=this.graph.options.paddingTop;var xMin=xAxis.getCurrentMin(),xMax=xAxis.getCurrentMax(),xActual=xAxis.getVal(x),diffX=xMax-xMin,yMin=yAxis.getCurrentMin(),yMax=yAxis.getCurrentMax(),yActual=yAxis.getVal(y),diffY=yMax-yMin;if("gradualXY"==pref.mode||"gradualX"==pref.mode){var ratio=(xActual-xMin)/(xMax-xMin);xMin=Math.max(xAxis.getMinValue()-xAxis.getInterval()*xAxis.options.axisDataSpacing.min,xMin-diffX*ratio),xMax=Math.min(xAxis.getMaxValue()+xAxis.getInterval()*xAxis.options.axisDataSpacing.max,xMax+diffX*(1-ratio)),xAxis.setCurrentMin(xMin),xAxis.setCurrentMax(xMax),xAxis.options.onZoom&&xAxis.options.onZoom(xMin,xMax),xAxis.cacheCurrentMin(),xAxis.cacheCurrentMax(),xAxis.cacheInterval()}if("gradualXY"==pref.mode||"gradualY"==pref.mode){var ratio=(yActual-yMin)/(yMax-yMin);yMin=Math.max(yAxis.getMinValue()-yAxis.getInterval()*yAxis.options.axisDataSpacing.min,yMin-diffY*ratio),yMax=Math.min(yAxis.getMaxValue()+yAxis.getInterval()*yAxis.options.axisDataSpacing.max,yMax+diffY*(1-ratio)),yAxis.setCurrentMin(yMin),yAxis.setCurrentMax(yMax),yAxis.options.onZoom&&yAxis.options.onZoom(yMin,yMax),yAxis.cacheCurrentMin(),yAxis.cacheCurrentMax(),yAxis.cacheInterval()}}graph.pluginYieldActiveState(),this.graph.draw()}}transition(modeX,modeY,eventName){var self=this,maxTime=500;self.gradualUnzoomStart||(self.gradualUnzoomStart=Date.now()),window.requestAnimationFrame(function(){var dt=Date.now()-self.gradualUnzoomStart;dt>maxTime&&(dt=maxTime);var progress=Math.sin(dt/maxTime*Math.PI/2);self.toAxes(function(axis){axis.setCurrentMin(axis._pluginZoomMin+(axis._pluginZoomMinFinal-axis._pluginZoomMin)*progress),axis.setCurrentMax(axis._pluginZoomMax+(axis._pluginZoomMaxFinal-axis._pluginZoomMax)*progress),axis.cacheCurrentMin(),axis.cacheCurrentMax(),axis.cacheInterval()},!1,modeX,modeY),self.graph.draw(),dt<maxTime?(self.transition(modeX,modeY,eventName),self.emit("zooming")):(self.emit("zoomed"),self.graph.pluginYieldActiveState(),eventName&&self.emit(eventName),self.gradualUnzoomStart=0)})}isFullX(){return this.fullX}isFullY(){return this.fullY}toAxes(func,params,tb,lr){var axes=this.options.axes;switch(axes&&("serieSelected"!=axes||this.graph.getSelectedSerie())||(axes="all"),axes){case"all":this.graph._applyToAxes.apply(this.graph,arguments);break;case"serieSelected":var serie=this.graph.getSelectedSerie();serie&&(tb&&("string"==typeof func?serie.getXAxis()[func].apply(serie.getXAxis(),params):func.apply(serie.getXAxis(),params)),lr&&("string"==typeof func?serie.getYAxis()[func].apply(serie.getYAxis(),params):func.apply(serie.getYAxis(),params)));break;default:Array.isArray(axes)||(axes=[axes]);for(let axis of axes)axis.isX()&&tb?"string"==typeof func?axis[func].apply(axis,params):func.apply(axis,params):axis.isY()&&lr&&("string"==typeof func?axis[func].apply(axis,params):func.apply(axis,params));}}}_exports.default=PluginZoom,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(7),__webpack_require__(51),__webpack_require__(0),__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphCore,_graphLru,util,_graphPlugin){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphCore=_interopRequireDefault(_graphCore),_graphLru=_interopRequireDefault(_graphLru),util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphPlugin=_interopRequireDefault(_graphPlugin);class PluginTimeSerieManager extends _graphPlugin.default{constructor(){super(...arguments),this.series=[],this.plugins=[],this.currentSlots={},this.requestLevels=new Map,this.update=(noRecalculate,force)=>{this.series.forEach(function(serie){this.updateSerie(serie,noRecalculate)}),noRecalculate||this.recalculateSeries(force)}}static default(){return{LRUName:"PluginTimeSerieManager",intervals:[1e3,15e3,6e4,9e5,36e5,864e4],maxParallelRequests:3,optimalPxPerPoint:2,nbPoints:1e3,url:""}}init(graph){this.graph=graph,_graphLru.default.create(this.options.LRUName,200),this.requestsRunning=0}setURL(url){return this.options.url=url,this}setAvailableIntervals(){this.options.intervals=arguments}newSerie(serieName,serieOptions,serieType,dbElements,noZoneSerie){var s=this.graph.newSerie(serieName,serieOptions,serieType);return this.currentSlots[serieName]={min:0,max:0,interval:0},s.on("hide",function(){s._zoneSerie&&s._zoneSerie.hide()}),s.on("show",function(){s._zoneSerie&&s._zoneSerie.show()}),s.setInfo("timeSerieManagerDBElements",dbElements),noZoneSerie||(s._zoneSerie=this.graph.newSerie(`${serieName}_zone`,{},_graphCore.default.SERIE_ZONE)),this.series.push(s),s}registerPlugin(plugin){var index;if(-1<(index=this.plugins.indexOf(plugin)))for(var i=1;i<arguments.length;i++)plugin.removeListener(arguments[i],this.update);for(var i=1;i<arguments.length;i++)plugin.on(arguments[i],this.update)}updateSerie(serie,noRecalculate){var self=this,from=serie.getXAxis().getCurrentMin(),to=serie.getXAxis().getCurrentMax(),optimalInterval=this.getOptimalInterval(to-from),optimalIntervalIndex=this.options.intervals.indexOf(optimalInterval),interval;this.cleanRegister(optimalIntervalIndex);for(var i=optimalIntervalIndex;i<=optimalIntervalIndex+1;i++){interval=this.options.intervals[i];var startSlotId=self.computeSlotID(from,interval),endSlotId=self.computeSlotID(to,interval);[[2,5,6],[1,2,4],[0,1,3]].forEach(function(multiplier){for(var firstSlotId=startSlotId-multiplier[0]*(endSlotId-startSlotId),lastSlotId=endSlotId+multiplier[0]*(endSlotId-startSlotId),slotId=firstSlotId;slotId<=lastSlotId&&!(self.computeTimeMin(slotId,interval)>Date.now());)self.register(serie,slotId,interval,interval==optimalInterval?multiplier[1]:multiplier[2],!0,noRecalculate),slotId++})}this.processRequests()}cleanRegister(interval){this.requestLevels&&this.requestLevels.forEach(levelArray=>{levelArray.forEach((levelElement,levelIndex)=>{levelElement[4]<interval&&levelArray.splice(levelIndex,1)})})}register(serie,slotId,interval,priority,noProcess,noRecalculate){var id=this.computeUniqueID(serie,slotId,interval),data=_graphLru.default.get(this.options.LRUName,id);(!data||this.computeTimeMax(slotId,interval)>Date.now()&&data.timeout<Date.now()-(noRecalculate?5e3:1e5)&&1==priority)&&this.request(serie,slotId,interval,priority,id,noProcess)}request(serie,slotId,interval,priority,slotName,noProcess){for(var i in this.requestLevels)i!=priority&&this.requestLevels[i][slotName]&&(1===this.requestLevels[i][slotName][0]?this.requestLevels[i][slotName][5]=priority:delete this.requestLevels[i][slotName]);this.requestLevels[priority]&&this.requestLevels[priority][slotName]||(this.requestLevels[priority]=this.requestLevels[priority]||{},this.requestLevels[priority][slotName]=[0,slotName,serie.getName(),slotId,interval,priority,serie.getInfo("timeSerieManagerDBElements")],!noProcess&&this.processRequests())}processRequests(){if(!(this.requestsRunning>=this.options.maxParallelRequests)){for(var self=this,currentLevelChecking=1,requestToMake;;){for(var i in this.requestLevels[currentLevelChecking])if(1!=this.requestLevels[currentLevelChecking][i][0]){requestToMake=this.requestLevels[currentLevelChecking][i];break}if(requestToMake)break;if(currentLevelChecking++,10<currentLevelChecking)return}this.requestsRunning++,requestToMake&&(requestToMake[0]=1,util.ajaxGet({url:this.getURL(requestToMake),method:"GET",json:!0}).done(function(data){1==data.status&&(self.requestsRunning--,delete self.requestLevels[currentLevelChecking][i],_graphLru.default.store(self.options.LRUName,requestToMake[1],data.data),self.processRequests(),1==requestToMake[5]&&0==Object.keys(self.requestLevels[1]).length&&self.recalculateSeries(!0))}))}}computeTimeMax(slotId,interval){return(slotId+1)*(interval*this.options.nbPoints)}computeTimeMin(slotId,interval){return slotId*(interval*this.options.nbPoints)}getURL(requestElements){var url=this.options.url.replace("<measurementid>",requestElements[2]).replace("<from>",this.computeTimeMin(requestElements[3],requestElements[4])).replace("<to>",this.computeTimeMax(requestElements[3],requestElements[4])).replace("<interval>",requestElements[4]),dbElements=requestElements[6]||{};for(var i in dbElements)url=url.replace(`<${i}>`,dbElements[i]);return url}getOptimalInterval(totalspan){var optimalInterval=(this.options.optimalPxPerPoint||1)*totalspan/this.graph.getDrawingWidth(),diff=1/0,optimalIntervalAmongAvailable;return this.options.intervals.forEach(function(interval){var newDiff=Math.min(diff,Math.abs(interval-optimalInterval));diff!==newDiff&&(optimalIntervalAmongAvailable=interval,diff=newDiff)}),optimalIntervalAmongAvailable||1e3}computeUniqueID(serie,slotId,interval){var extra="",info=serie.getInfo("timeSerieManagerDBElements");for(var i in info)extra+=`;${i}:${info[i]}`;return`${serie.getName()};${slotId};${interval}${extra}`}computeSlotID(time,interval){return Math.floor(time/(interval*this.options.nbPoints))}computeSlotTime(slotId,interval){return slotId*(interval*this.options.nbPoints)}getZoneSerie(serie){return serie._zoneSerie}updateZoneSerie(serieName){var serie=this.graph.getSerie(serieName);serie&&serie._zoneSerie&&(serie._zoneSerie.setXAxis(serie.getXAxis()),serie._zoneSerie.setYAxis(serie.getYAxis()),serie._zoneSerie.setFillColor(serie.getLineColor()),serie._zoneSerie.setLineColor(serie.getLineColor()),serie._zoneSerie.setFillOpacity(.2),serie._zoneSerie.setLineOpacity(.3))}recalculateSeries(force){var self=this;this.locked||(this.changed=!1,this.series.map(function(serie){self.recalculateSerie(serie,force)}),this.changed=!1,self.graph.draw())}recalculateSerie(serie,force){var from=serie.getXAxis().getCurrentMin(),to=serie.getXAxis().getCurrentMax(),interval=this.getOptimalInterval(to-from),startSlotId=this.computeSlotID(from,interval),endSlotId=this.computeSlotID(to,interval),data=[],dataMinMax=[];if(!(!force&&interval==this.currentSlots[serie.getName()].interval&&this.currentSlots[serie.getName()].min<=startSlotId&&this.currentSlots[serie.getName()].max>=endSlotId)){startSlotId-=2,endSlotId+=2,this.currentSlots[serie.getName()].min=startSlotId,this.currentSlots[serie.getName()].max=endSlotId,this.currentSlots[serie.getName()].interval=interval;for(var slotId=startSlotId;slotId<=endSlotId;){const lruData=_graphLru.default.get(this.options.LRUName,this.computeUniqueID(serie,slotId,interval));lruData?(data=data.concat(lruData.data.mean),dataMinMax=dataMinMax.concat(lruData.data.minmax)):this.recalculateSerieUpwards(serie,slotId,interval,data,dataMinMax),slotId++}this.changed=!0,serie.setData(data),serie._zoneSerie&&serie._zoneSerie.setData(dataMinMax)}}setIntervalCheck(interval){this.interval&&clearInterval(this.interval),this.update(!0,!0),this.interval=setInterval(()=>{this.update(!0,!1)},interval)}recalculateSerieUpwards(serie,downSlotId,downInterval,data,dataMinMax){var intervals=this.options.intervals.slice(0);intervals.sort();var nextInterval=intervals[intervals.indexOf(downInterval)+1]||-1;if(0>nextInterval)return[];var newSlotTime=this.computeSlotTime(downSlotId,downInterval),newSlotTimeEnd=this.computeSlotTime(downSlotId+1,downInterval),newSlotId=this.computeSlotID(newSlotTime,nextInterval),start=!1;const lruData=_graphLru.default.get(this.options.LRUName,this.computeUniqueID(serie,newSlotId,nextInterval));if(lruData)for(var i=0,l=lruData.data.mean.length;i<l;i+=2){if(lruData.data.mean[i]<newSlotTime)continue;else!1===start&&(start=i);if(lruData.data.mean[i]>=newSlotTimeEnd)return data=data.concat(lruData.data.mean.slice(start,i)),void(dataMinMax=data.concat(lruData.data.minmax.slice(start,i)))}return this.recalculateSerieUpwards(serie,newSlotId,nextInterval,data,dataMinMax)}lockRedraw(){this.locked=!0}unlockRedraw(){this.locked=!1}isRedrawLocked(){return!!this.locked}}_exports.default=PluginTimeSerieManager,module.exports=exports.default})},function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports){"use strict";function emptyMemory(store){memory[store]={},memoryCount[store]=0}function createStoreMemory(store,limit){limit=limit||50,memory[store]||(memory[store]={},memoryCount[store]=0),memoryLimit[store]=limit}function getFromMemory(store,index){var obj,head;if(memory[store]&&memory[store][index])return head=memoryHead[store],obj=memory[store][index],obj.prev=head,obj.next=head.next,head.next.prev=obj,head.next=obj,memoryHead[store]=obj,obj.data}function storeInMemory(store,index,data){var toStore,toDelete,head;if(memory[store]&&void 0!==memoryCount[store]&&memoryLimit[store])return head=memoryHead[store],memory[store][index]?(getFromMemory(store,index),memory[store][index].data.data=data,memory[store][index].data.timeout=Date.now()):(toStore={data:{data:data,timeout:Date.now()}},"undefined"==typeof head?(toStore.prev=toStore,toStore.next=toStore):(toStore.prev=head.prev,toStore.next=head.next,head.next.prev=toStore,head.next=toStore),memoryHead[store]=toStore,memory[store][index]=toStore,memoryCount[store]++),memoryCount[store]>memoryLimit[store]&&head&&(toDelete=head.next,head.next.next.prev=head,head.next=head.next.next,toDelete.next.next=void 0,toDelete.next.prev=void 0,memoryCount[store]--),data}function get(store,index){var result;if((result=getFromMemory(store,index))!=null)return result}function store(store,index,value){return storeInMemory(store,index,value),value}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.create=function(store,limitMemory){createStoreMemory(store,limitMemory)},_exports.get=get,_exports.store=store,_exports.empty=function(store){emptyMemory(store)},_exports.exist=function(store){return memory[store]},_exports.default=void 0;var memory={},memoryHead={},memoryCount={},memoryLimit={};_exports.default=get})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(2),__webpack_require__(6)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphPlugin,_waveform){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphPlugin=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphPlugin);class PluginSerieLineDifference extends _graphPlugin.default{constructor(){super(...arguments)}static default(){return{positiveStyle:{fillColor:"green",fillOpacity:.2,strokeWidth:0},negativeStyle:{fillColor:"red",fillOpacity:.2,strokeWidth:0},from:0,to:0}}init(graph){this.graph=graph,this.series=[],this.pathsPositive=[],this.pathsNegative=[],this.positivePolyline=this.graph.newShape("polyline").draw(),this.positivePolyline.setFillColor(this.options.positiveStyle.fillColor).setFillOpacity(this.options.positiveStyle.fillOpacity).setStrokeWidth(this.options.positiveStyle.strokeWidth).applyStyle(),this.negativePolyline=this.graph.newShape("polyline").draw(),this.negativePolyline.setFillColor(this.options.negativeStyle.fillColor).setFillOpacity(this.options.negativeStyle.fillOpacity).setStrokeWidth(this.options.negativeStyle.strokeWidth).applyStyle()}setSeries(serieTop,serieBottom){this.serie1=serieTop,this.serie2=serieBottom}setBoundaries(from,to){this.options.from=from,this.options.to=to}getFrom(){return this.options.from}getTo(){return this.options.to}draw(){this;const w1=this.serie1.getWaveform(),w2=this.serie2.getWaveform(),wFinal=w1.duplicate(!0).subtract(w2).add(w2),wFinal2=w1.duplicate(!0).subtract(w1.duplicate(!0).subtract(w2)),chunks=[];let currentChunk;var newChunk=(force=!1)=>{(force||0!=currentChunk.wave1.length||0!=currentChunk.wave2.length)&&(currentChunk={above:void 0,wave1:[],wave2:[]},chunks.push(currentChunk))};newChunk(!0);for(var i=0;i<wFinal.getLength();i++){if(isNaN(wFinal.getY(i))||isNaN(wFinal2.getY(i))){newChunk();continue}if(0<i&&0<currentChunk.wave1.length){if(wFinal.getY(i)>wFinal2.getY(i)&&!currentChunk.above){const crossing=this.computeCrossing(wFinal.getX(i-1),wFinal.getY(i-1),wFinal.getX(i),wFinal.getY(i),wFinal2.getX(i-1),wFinal2.getY(i-1),wFinal2.getX(i),wFinal2.getY(i));currentChunk.wave1.push([crossing.x,crossing.y]),newChunk(),currentChunk.wave1.push([crossing.x,crossing.y]),currentChunk.above=!0}if(wFinal.getY(i)<wFinal2.getY(i)&&currentChunk.above){const crossing=this.computeCrossing(wFinal.getX(i-1),wFinal.getY(i-1),wFinal.getX(i),wFinal.getY(i),wFinal2.getX(i-1),wFinal2.getY(i-1),wFinal2.getX(i),wFinal2.getY(i));currentChunk.wave1.push([crossing.x,crossing.y]),newChunk(),currentChunk.wave1.push([crossing.x,crossing.y]),currentChunk.above=!1}}0==currentChunk.wave1.length&&(currentChunk.above=wFinal.getY(i)>wFinal2.getY(1)),currentChunk.wave1.push([wFinal.getX(i),wFinal.getY(i)]),currentChunk.wave2.push([wFinal2.getX(i),wFinal2.getY(i)])}this.series.forEach(serie=>serie.kill()),this.series=chunks.forEach((chunk,index)=>{const serie=this.graph.newSerie("__graph_serielinedifference_"+this.serie1.getName()+"_"+this.serie2.getName()+"_"+index),wave=new _waveform.Waveform;wave.setData(chunk.wave1.map(el=>el[1]).concat(chunk.wave2.reverse().map(el=>el[1])),chunk.wave1.map(el=>el[0]).concat(chunk.wave2.map(el=>el[0]))),chunk.wave1[0]&&wave.append(chunk.wave1[0][0],chunk.wave1[0][1]),serie.setWaveform(wave),serie.setXAxis(this.serie1.getXAxis()),serie.setYAxis(this.serie1.getYAxis()),chunk.above?serie.setFillColor(this.options.positiveStyle.fillColor):serie.setFillColor(this.options.negativeStyle.fillColor)})}computeCrossing(x11,y11,x12,y12,x21,y21,x22,y22){var a1=(y12-y11)/(x12-x11),a2=(y22-y21)/(x22-x21),b1=y12-a1*x12;if(x11==x12||x21==x22)return!1;if(a1==a2)return{x:x11,y1:y11,y2:y11,y:y11};var x=(b1-(y22-a2*x22))/(a2-a1);return!(x>x12||x<x11||x<x21||x>x22)&&{x:x,y:a1*x+b1}}getPositivePolyline(){return this.positivePolyline}getNegativePolyline(){return this.negativePolyline}}_exports.default=PluginSerieLineDifference,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(7),__webpack_require__(11),__webpack_require__(15),__webpack_require__(0),__webpack_require__(3),__webpack_require__(12),__webpack_require__(8),__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,_graphCore,_graphAxisX,_graphAxisY,util,_graphSerieLine,_graphSerieScatter,_graphAxis,_graphPlugin){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_graphCore=_interopRequireDefault(_graphCore),_graphAxisX=_interopRequireDefault(_graphAxisX),_graphAxisY=_interopRequireDefault(_graphAxisY),util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphSerieLine=_interopRequireDefault(_graphSerieLine),_graphSerieScatter=_interopRequireDefault(_graphSerieScatter),_graphAxis=_interopRequireDefault(_graphAxis),_graphPlugin=_interopRequireDefault(_graphPlugin);class SerieLineExtended extends _graphSerieLine.default{constructor(){super(...arguments),this.subSeries=[]}draw(){return this}}class SerieScatterExtended extends _graphSerieScatter.default{constructor(){super(...arguments),this.subSeries=[]}draw(){return this}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}var excludingMethods=["constructor","init","draw","setLineColor","setLineWidth","setLineStyle","getLineColor","getLineWidth","getLineStyle","setMarkers","getMarkerDom","getMarkerDomIndependant","getMarkerPath","_recalculateMarkerPoints","getSymbolForLegend","_getSymbolForLegendContainer"],addMethods=[];Object.getOwnPropertyNames(_graphSerieLine.default.prototype).concat(addMethods).map(function(i){-1<excludingMethods.indexOf(i)||(SerieLineExtended.prototype[i]=function(j){return function(){var args=arguments;this.subSeries.map(subSerie=>{subSerie[j](...args)})}}(i))});var returnMethods=["getSymbolForLegend"],addMethods=["_getSymbolForLegendContainer"];Object.getOwnPropertyNames(_graphSerieLine.default.prototype).map(function(i){-1==returnMethods.indexOf(i)||(SerieLineExtended.prototype[i]=function(j){return function(){var args=arguments;return this.subSeries[0][j](...args)}}(i),SerieScatterExtended.prototype[i]=function(j){return function(){var args=arguments;return this.subSeries[0][j](...args)}}(i))}),addMethods.map(method=>{SerieLineExtended.prototype[method]=function(j){return function(){var args=arguments;return this.subSeries[0][j](...args)}}(method),SerieScatterExtended.prototype[method]=function(j){return function(){var args=arguments;return this.subSeries[0][j](...args)}}(method)});class PluginAxisSplitting extends _graphPlugin.default{constructor(){super(...arguments),this.series=new Map}static default(){return{axes:{margins:{high:5,low:5}}}}init(graph){this.graph=graph}newXAxis(options){return this.newBottomAxis(options)}newYAxis(options){return this.newLeftAxis(options)}newTopAxis(options){return options=this.getOptions(options),new SplitXAxis(this.graph,"top",options)}newBottomAxis(options){return options=this.getOptions(options),new SplitXAxis(this.graph,"bottom",options)}newLeftAxis(options){return options=this.getOptions(options),new SplitYAxis(this.graph,"left",options)}newRightAxis(options){return options=this.getOptions(options),new SplitYAxis(this.graph,"right",options)}getOptions(options){var defaults={marginMin:this.options.axes.margins.low,marginMax:this.options.axes.margins.high};return util.extend(!0,defaults,options)}preDraw(){var xAxis,yAxis;this.series.forEach(({serie})=>{xAxis=serie.getXAxis(),yAxis=serie.getYAxis();let splits=1;for(xAxis.splitNumber&&(splits*=xAxis.splitNumber),yAxis.splitNumber&&(splits*=yAxis.splitNumber);serie.subSeries.length<splits;){const name=`${serie.getName()}_${serie.subSeries.length}`,s=this.graph.newSerie(name,{},serie.getType()||_graphCore.default.SERIE_LINE);s.excludedFromLegend=!0,s.styles=serie.styles,s.waveform=serie.waveform,serie.getType()==_graphCore.default.SERIE_LINE&&(s.markerPoints=serie.markerPoints,s.markerFamilies=serie.markerFamilies),serie.subSeries.push(s),serie.postInit()}for(;serie.subSeries.length>splits;){let subserie=this.graph.getSerie(`${serie.getName()}_${serie.subSeries.length-1}`);subserie&&subserie.kill&&subserie.kill(),serie.subSeries.pop()}!serie.getXAxis().splitNumber&&serie.getXAxis().splitAxis&&serie.getXAxis().splitAxis(),!serie.getYAxis().splitNumber&&serie.getYAxis().splitAxis&&serie.getYAxis().splitAxis(),serie.subSeries.map((sserie,index)=>{var xSubAxis,ySubAxis;if(serie.getXAxis().getSubAxis){let subAxisIndex=index%(xAxis.splitNumber||1);xSubAxis=serie.getXAxis().getSubAxis(subAxisIndex)}else xSubAxis=serie.getXAxis();if(sserie.setXAxis(xSubAxis),serie.getYAxis().getSubAxis){let subAxisIndex=Math.floor(index/(xAxis.splitNumber||1));ySubAxis=serie.getYAxis().getSubAxis(subAxisIndex)}else ySubAxis=serie.getYAxis();sserie.setYAxis(ySubAxis),sserie.draw(!0)})})}newSerie(name,options={},type){switch(type){case"line":return this.newLineSerie(name,options);break;case"scatter":return this.newScatterSerie(name,options);}throw`Cannot create a split serie of type ${type}`}newLineSerie(name,options){var serieObj={type:"lineSerie",serie:new SerieLineExtended(this.graph,name,options,"line")};return this.series.set(name,serieObj),this.graph.series.push(serieObj.serie),serieObj.serie}newScatterSerie(name,options){var serieObj={type:"scatterSerie",serie:new SerieScatterExtended(this.graph,name,options,"scatter")};return this.series.set(name,serieObj),this.graph.series.push(serieObj.serie),serieObj.serie}}var defaultAxisConstructorOptions={splitMarks:!0},SplitAxis=function(mixin){var cl=class extends mixin{constructor(graph,position,options={}){super(graph,position,options),this.axes=[],this.position=position,this.constructorOptions=util.extend(!0,{},defaultAxisConstructorOptions,options),this._splitVal=[]}all(callback){if("function"==typeof callback)return this.axes.map(callback),this}splitAxis(...splits){splits.push(1);let splitNumber=splits.length;for(;this.axes.length>splitNumber;)this.axes.pop().kill(!0,!0);for(;this.axes.length<splitNumber;){let axis=new(this.getConstructor())(this.graph,this.position,this.constructorOptions);this.axes.push(axis),axis.zoomLock=!0,axis.init(this.graph,this.constructorOptions)}let from=0,i=0;for(let axis of this.axes)axis.options.marginMin=10,axis.options.marginMax=10,0==i&&(axis.options.marginMin=0),i==this.axes.length-1&&(axis.options.marginMax=0),axis.setSpan(from,from=splits[i]),axis.setMinMaxFlipped(),i++;return this._splits=splits,this}fixGridIntervalBasedOnAxis(axisIndex){return this.fixGridFor=axisIndex,this.graph._axisHasChanged(),this}splitSpread(bln){return this.autoSpread=!!bln,this}hasAxis(axis){return-1<this.axes.indexOf(axis)}_splitSpread(){let splits=[],total=0,currentSplit=0;for(let split of this._splitVal)total+=split[1]-split[0];for(let split of this._splitVal)splits.push(currentSplit+=(split[1]-split[0])/total);splits.pop(),this.splitAxis(...splits)}setChunkBoundaries(values){let index=0,baseWidth,baseWidthIndex;for(let axis of this.axes)Array.isArray(values[index])&&1<values[index].length&&!baseWidth&&(baseWidth=values[index][1]-values[index][0],baseWidthIndex=index),1!=values[index].length&&Array.isArray(values[index])?axis.forceMin(values[index][0]).forceMax(values[index][1]):(axis._mean=values[index],Array.isArray(axis._mean)&&(axis._mean=axis._mean[0])),index++;return this._baseWidthVal=baseWidth,this._baseWidthIndex=baseWidthIndex,this._splitVal=values,this.graph._axisHasChanged(),this}setMinMaxToFitSeries(){(!this._splitVal||1>this._splitVal.length)&&(super.setMinMaxToFitSeries(...arguments),this._splitVal[0]=this._splitVal[0]||[],this._splitVal[this._splitVal.length-1]=this._splitVal[this._splitVal.length-1]||[],this._splitVal[0][0]=this.getCurrentMin(),this._splitVal[this._splitVal.length-1][1]=this.getCurrentMax(),this.setChunkBoundaries(this._splitVal))}draw(){this.autoSpread&&this._splitSpread();let max=0,unit,subAxis,spanReference;if(0<=this._baseWidthIndex&&(subAxis=this.getSubAxis(this._baseWidthIndex))&&(spanReference=subAxis.getSpan()),subAxis=void 0,0<=this.fixGridFor&&(subAxis=this.getSubAxis(this.fixGridFor))){if(void 0!==subAxis._mean){let width=(subAxis.getSpan()[1]-subAxis.getSpan()[0])/(spanReference[1]-spanReference[0])*this._baseWidthVal;subAxis.forceMin(subAxis._mean-width/2),subAxis.forceMax(subAxis._mean+width/2)}max=subAxis.draw(),unit=subAxis.getPrimaryTickUnit()}return this.axes.map(axis=>{if(subAxis!==axis){if(void 0!==axis._mean){let width=(axis.getSpan()[1]-axis.getSpan()[0])/(spanReference[1]-spanReference[0])*this._baseWidthVal;axis.forceMin(axis._mean-width/2),axis.forceMax(axis._mean+width/2)}unit&&axis.forcePrimaryTickUnit(unit),max=Math.max(max,axis.draw())}}),this.writeUnit(),max}setMinPx(min){super.setMinPx(min);for(let axis of this.axes)axis.setMinPx(min)}setMaxPx(max){super.setMaxPx(max);for(let axis of this.axes)axis.setMaxPx(max)}setShift(){super.setShift(...arguments);for(let axis of this.axes)axis.setShift(...arguments)}init(){super.init(...arguments),this.splitAxis()}getAxisPosition(){var max=0;return this.axes.map(axis=>{max=Math.max(max,axis.getAxisPosition())}),max}getSubAxis(index){if(this.axes.length<=index)throw`Impossible to reach axis. Index ${index} is out of range`;return this.axes[index]}get splitNumber(){return this._splits.length}};return["turnGridsOff","turnGridsOn","gridsOff","gridsOn","setEngineering","setScientificScaleExponent","setScientific","setLabelColor","setSecondaryGridDasharray","setPrimaryGridDasharray","setSecondaryGridsOpacity","setPrimaryGridOpacity","setSecondaryGridWidth","setPrimaryGridWidth","setSecondaryGridColor","setPrimaryGridColor","setTicksLabelColor","setSecondaryTicksColor","setPrimaryTicksColor","setAxisColor","secondaryGridOn","secondaryGridOff","primaryGridOff","primaryGridOn","setSecondaryGrid","setPrimaryGrid","setGrids","setTickPosition","setExponentialFactor","setExponentialLabelFactor","setGridLinesStyle","forcePrimaryTickUnitMin","forcePrimaryTickUnitMax","forcePrimaryTickUnit","flip","show","hide","setDisplay"].map(methodName=>{cl.prototype[methodName]=function(method){return function(){return this.axes.map(axis=>{axis[method](...arguments)}),this}}(methodName)}),cl};class SplitXAxis extends SplitAxis(_graphAxisX.default){constructor(graph,topbottom){super(...arguments),this.topbottom=topbottom}getConstructor(){return _graphAxisX.default}getAxisPosition(){var max=super.getAxisPosition(...arguments);return this.labelPosY=max,this.getLabel()&&(max+=this.graph.options.fontSize),max}drawLabel(){super.drawLabel(),this.label.setAttribute("y",(this.top?-1:1)*(this.graph.options.fontSize+this.labelPosY))}draw(){var height=super.draw(...arguments);return this.drawLabel(),height}}class SplitYAxis extends SplitAxis(_graphAxisY.default){constructor(){super(...arguments)}getConstructor(){return _graphAxisY.default}drawLabel(){super.drawLabel()}equalizePosition(width){var widthAfter=width;if(this.getLabel()&&this.axes.map(axis=>{widthAfter=Math.max(axis.equalizePosition(width),widthAfter)}),this.getLabel())return this.placeLabel(this.left?-widthAfter:widthAfter),widthAfter+this.graph.options.fontSize}}util.mix(SplitXAxis,new _graphAxisX.default),util.mix(SplitYAxis,new _graphAxisY.default);_exports.default=PluginAxisSplitting,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphPlugin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphPlugin=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphPlugin);class PluginMakeTracesDifferent extends _graphPlugin.default{constructor(){super(...arguments)}init(graph,options){super.init(graph,options)}static default(){return{}}checkHSL(color){let result={},hue,saturation,lightness;return(hue=color.h||color.hue)?(1>hue&&(hue=Math.round(360*hue)),result.hue=hue):result.h=0,(saturation=color.s||color.saturation)?(1<saturation&&(saturation/=100),result.saturation=saturation):result.saturation=.75,(lightness=color.lightness||color.l)?(1<lightness&&(lightness/=100),result.lightness=lightness):result.lightness=.5,result}buildHSLString(hsl){return`hsl( ${Math.round(hsl.h)}, ${Math.round(100*hsl.s)}%, ${Math.round(100*hsl.l)}%)`}colorizeAll(options,callback=!1){let series,seriesLength;if(options.serieTypes?(!Array.isArray(options.serieTypes)&&(options.serieTypes=[options.serieTypes]),series=this.graph.allSeries(...options.serieTypes)):series=this.graph.getSeries(),seriesLength=series.length,!options.startingColorHSL)if(options.colorHSL)options.startingColorHSL=this.checkHSL(options.colorHSL);else throw"No starting color was provided. There must exist either options.colorHSL or options.startingColorHSL";if(!options.endingColorHSL)switch(options.affect&&["h","s","l","hue","saturation","lightness"].include(options.affect)||(options.affect="h"),options.affect){case"h":case"hue":options.endingColorHSL={h:options.startingColorHSL.h+300,s:options.startingColorHSL.s,l:options.startingColorHSL.l};break;case"saturation":case"s":let endS;endS=.5<options.startingColorHSL.s?0:1,options.endingColorHSL={h:options.startingColorHSL.h,s:endS,l:options.startingColorHSL.l};break;case"lightness":case"l":let endL;endL=.5<options.startingColorHSL.l?0:.75,options.endingColorHSL={h:options.startingColorHSL.h,s:options.startingColorHSL.s,l:endL};}else options.endingColorHSL=Object.assign({},options.startingColorHSL,options.endingColorHSL);return series.map((serie,index)=>{if(!serie.setLineColor)throw`The serie ${serie.getName()} does not implement the method \`startingColor\``;let colorString;return colorString=1==seriesLength?this.buildHSLString({h:options.startingColorHSL.h,s:options.startingColorHSL.s,l:options.startingColorHSL.l}):this.buildHSLString({h:options.startingColorHSL.h+index/(seriesLength-1)*(options.endingColorHSL.h-options.startingColorHSL.h),s:options.startingColorHSL.s+index/(seriesLength-1)*(options.endingColorHSL.s-options.startingColorHSL.s),l:options.startingColorHSL.l+index/(seriesLength-1)*(options.endingColorHSL.l-options.startingColorHSL.l)}),serie.setLineColor(colorString),"function"==typeof callback&&callback(index,colorString),colorString})}}_exports.default=PluginMakeTracesDifferent,module.exports=exports.default})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__(0),__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(this,function(_exports,util,_graphPlugin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,util=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(util),_graphPlugin=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_graphPlugin);class PluginPeakPicking extends _graphPlugin.default{constructor(){super(...arguments)}static default(){return{autoPeakPicking:!1,autoPeakPickingNb:4,autoPeakPickingMinDistance:10,autoPeakPickingFormat:!1,autoPeakPickingAllowAllY:!1}}init(graph,options){super.init(graph,options),this.picks=[];for(var n=0,m=this.options.autoPeakPickingNb,shape;n<m;n++)shape=this.graph.newShape({type:"label",label:{text:"",position:{x:0},anchor:"middle"},selectable:!0,shapeOptions:{minPosY:15}}),shape.draw(),this.picks.push(shape)}setSerie(serie){this.serie=serie,this.picks.map(pick=>{pick.show()})}serieRemoved(serie){this.serie==serie&&this.picks.map(pick=>{pick.hide()})}preDraw(){this.serie&&(this.detectedPeaks=[],this.lastYPeakPicking=!1)}postDraw(){if(!this.serie)return;let lookForMaxima=!0,lookForMinima=!1,peaks=[],waveform=this.serie.getWaveform(),lastYPeakPicking;if(!waveform)throw"The serie must have a waveform for the peak picking to work";let length=waveform.getLength(),i=0,y;for(;i<length;i++){if(y=waveform.getY(i),this.serie.options.lineToZero){peaks.push([waveform.getX(i),y]);continue}if(!lastYPeakPicking){lastYPeakPicking=[waveform.getX(i),y];continue}y>=lastYPeakPicking[1]&&lookForMaxima||y<=lastYPeakPicking[1]&&lookForMinima?lastYPeakPicking=[waveform.getX(i),y]:(y<lastYPeakPicking[1]&&lookForMaxima||y>lastYPeakPicking[1]&&lookForMinima)&&(lookForMinima?(lookForMinima=!1,lookForMaxima=!0):(lookForMinima=!0,lookForMaxima=!1,peaks.push(lastYPeakPicking),lastYPeakPicking=!1),lastYPeakPicking=[waveform.getX(i),y])}var ys=peaks,passed=[],l=ys.length,x,px,px,k,m,index;i=0;var selected=this.graph.selectedShapes.map(function(shape){return shape.getProp("xval")});for(ys.sort(function(a,b){return b[1]-a[1]}),m=0;i<l;i++)if((x=ys[i][0],px=this.serie.getX(x),k=0,y=this.serie.getY(ys[i][1]),!(px<this.serie.getXAxis().getMinPx()||px>this.serie.getXAxis().getMaxPx()))&&!(!this.options.autoPeakPickingAllowAllY&&(y>this.serie.getYAxis().getMinPx()||y<this.serie.getYAxis().getMaxPx()))){for(;k<passed.length&&!(Math.abs(passed[k]-px)<this.options.autoPeakPickingMinDistance);k++);if(!(k<passed.length)){if(-1<(index=selected.indexOf(x))){passed.push(px);continue}if(!this.picks[m])return;for(0>this.serie.getYAxis().getPx(ys[i][1])-20?(this.picks[m].setLabelPosition({x:x,y:"5px"}),this.picks[m].setLabelBaseline("hanging")):(this.picks[m].setLabelBaseline("no-change"),this.picks[m].setLabelPosition({x:x,y:ys[i][1],dy:"-15px"})),this.picks[m].setProp("xval",x),this.options.autoPeakPickingFormat?this.picks[m].setLabelText(this.options.autoPeakPickingFormat.call(this.picks[m],x,m)):this.picks[m].setLabelText(Math.round(1e3*x)/1e3+""),this.picks[m].makeLabels(),m++;this.picks[m]&&this.picks[m].isSelected();)m++;if(passed.length==this.options.autoPeakPickingNb)break}}}hidePeakPicking(lock){if(this._hidePeakPickingLocked||(this._hidePeakPickingLocked=lock),!!this.picks)for(var i=0;i<this.picks.length;i++)this.picks[i].hide()}showPeakPicking(unlock){if((!this._hidePeakPickingLocked||unlock)&&this.picks)for(var i=0;i<this.picks.length;i++)this.picks[i].show()}killPeakPicking(){if(this.picks)for(var i=0,l=this.picks.length;i<l;i++)this.picks[i].kill()}getSerie(){return this.serie}}_exports.default=PluginPeakPicking,module.exports=exports.default})}])});
//# sourceMappingURL=jsgraph-es6.min.js.map
