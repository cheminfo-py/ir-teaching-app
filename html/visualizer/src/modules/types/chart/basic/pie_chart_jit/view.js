'use strict';define(["modules/default/defaultview","jquery","src/util/api","src/util/util","components/jit/Jit/jit"],function(a,b,c,d,e){"use strict";function f(){this._id=d.getNextUniqueId()}function g(){this.chart.canvas.clear()}function h(a){var b,c=a.data;if(1===c.length){c=c[0];var d=c.y,e=d.length;b={values:Array(e)};var f,g,h=c.info||[];if(h[0]){if(h[0].color){f=Array(e);for(var k=0;k<e;k++)f[k]=h[k].color;b.color=f}if(h[0].name){g=Array(e);for(var k=0;k<e;k++)g[k]=h[k].name}}for(var k=0;k<e;k++)b.values[k]={values:[d[k]],label:g[k]||`label_${k}`}}else{b={};var e=c.length,l=c[0].y.length;b.values=Array(l),b.label=Array(l);for(var k=0;k<e;k++)for(var m=0;m<l;m++){var n=c[k],d=n.y;0==k&&(b.values[m]={values:Array(e),label:`label2 ${m}`},b.label[m]=n.label),b.values[m].values[k]=d[m]}}return b}function i(a){for(var b=a.length,c={values:Array(b)},d=0;d<b;d++)c.values[d]={values:[a[d]],label:`label_${d}`};return c}return b.extend(!0,f.prototype,a,{init:function(){this.dom||(this.dom=b(`<div id="${this._id}"></div>`).css({height:"100%",width:"100%"}),this.module.getDomContent().html(this.dom));var a,c=this.module.getConfiguration("labelColor");c&&0!==c[3]&&(a=d.rgbToHex(c[0],c[1],c[2])),this.chartOptions={injectInto:this._id,animate:!1,showLabels:this.module.getConfiguration("showLabels"),labelOffset:20,offset:30,hoveredColor:!1,updateHeights:this.module.getConfiguration("updateHeights"),sliceOffset:this.module.getConfiguration("sliceOffset"),Label:{color:a}}},onResize:function(){this.dom.empty(),this.chart=new e.PieChart(this.chartOptions),this._data&&this.setData(this._data),this.resolveReady()},update:{chart:function(a){if(a){var b=h(a.get());this._data=b,this.setData(b)}},yArray:function(a){if(a){var b=i(a.get());this._data=b,this.setData(b)}}},setData:function(a){this.chart.loadJSON(a)},blank:{chart:g,yArray:g}}),f});
