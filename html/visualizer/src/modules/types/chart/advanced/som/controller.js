'use strict';define(["jquery","modules/default/defaultcontroller","src/util/datatraversing","src/util/util"],function(a,b,c,d){"use strict";function e(){}return a.extend(!0,e.prototype,b),e.prototype.moduleInformation={name:"Self-organizing map",description:"Display the result of a SOM analysis",author:"Micha\xEBl Zasso",date:"01.12.2014",license:"MIT"},e.prototype.references={model:{label:"The SOM model"},dataset:{label:"Projected dataset",type:["chart","object"]},element:{label:"Dataset element"},elementList:{label:"Lists of dataset elements"},cellInfo:{label:"Cell information"},coords:{label:"Coordinates"}},e.prototype.events={onCellHover:{label:"Hover a cell",refVariable:["elementList","cellInfo"]},onElementHover:{label:"Hover a dataset element",refVariable:["element","coords"]}},e.prototype.variablesIn=["model","dataset"],e.prototype.onElementHover=function(a,b,c){this.createDataFromEvent("onElementHover","coords",[a,b]),this.createDataFromEvent("onElementHover","element",c)},e.prototype.onCellHover=function(a){const b=a.position[0].x,c=a.position[0].y,d=this.module.model.getAllDataFromRel("dataset"),e={};for(const f in d){const a=d[f].getChildSync(["data",0]);e[f]=[];for(let d=0,g=a.x.length;d<g;d++)Math.floor(a.x[d])===b&&Math.floor(a.y[d])===c&&e[f].push(a.info[d])}this.createDataFromEvent("onCellHover","elementList",e),this.createDataFromEvent("onCellHover","cellInfo",{x:b,y:c,info:a.info})},e.prototype.configurationStructure=function(){const a=[],b=this.module.getDataFromRel("model");if(b){const c=b.options.fields;if(0|c)for(let b=0;b<c;b++)a.push({key:b,title:b});else for(let b=0,d=c.length;b<d;b++)a.push({key:c[b].name,title:c[b].name})}const e=[],f=this.module.model.getAllDataFromRel("dataset");if(f)for(const a in f)e.push({key:a,title:a});const g=[],h=this.module.getDataFromRel("dataset");if(h){const a=h.getChildSync(["data","0","info","0"]);c.getJPathsFromElement(a,g)}return{sections:{background:{options:{title:"Background (grid)",multiple:!1},groups:{group:{options:{type:"list"},fields:{colorType:{type:"combo",title:"Color type",options:[{key:"fixed",title:"Fixed color"},{key:"range",title:"Color range"},{key:"inter",title:"RGB interpolation"}],default:"fixed",displaySource:{inter:"i0",fixed:"f0",range:"r0"}},colorSpace:{type:"combo",title:"Color space",options:[{key:"rgb",title:"RGB"},{key:"hsl",title:"HSL"},{key:"hsv",title:"HSV"},{key:"lab",title:"CIELab"},{key:"lch",title:"CIELCH"}],default:"rgb",displayTarget:["r0"]},color1:{type:"spectrum",title:"Color",default:[255,255,255,1],displayTarget:["i0","r0","f0"]},color2:{type:"spectrum",title:"Color 2",default:[0,0,0,1],displayTarget:["i0","r0"]},field1:{type:"combo",title:"Field for color 1",options:a,default:a[0]?a[0].key:"",displayTarget:["r0","i0"]},field2:{type:"combo",title:"Field for color 2",options:a,default:a[1]?a[1].key:"",displayTarget:["i0"]},field3:{type:"combo",title:"Field for color 3",options:a,default:a[2]?a[2].key:"",displayTarget:["i0"]}}}}},dataset:{options:{title:"Dataset",multiple:!0},groups:{group:{options:{type:"list"},fields:{dataset:{type:"combo",title:"Variable",options:e},colorType:{type:"combo",title:"Color type",options:[{key:"fixed",title:"Fixed color"},{key:"range",title:"Color range"},{key:"inter",title:"RGB interpolation"},{key:"jpath",title:"Color jpath"}],default:"fixed",displaySource:{inter:"i0",fixed:"f0",range:"r0",jpath:"j0"}},colorSpace:{type:"combo",title:"Color space",options:[{key:"rgb",title:"RGB"},{key:"hsl",title:"HSL"},{key:"hsv",title:"HSV"},{key:"lab",title:"CIELab"},{key:"lch",title:"CIELCH"}],default:"rgb",displayTarget:["r0"]},color1:{type:"spectrum",title:"Color",default:[255,0,0,1],displayTarget:["i0","r0","f0"]},color2:{type:"spectrum",title:"Color 2",default:[0,0,0,1],displayTarget:["i0","r0"]},jpath1:{type:"combo",title:"jpath for color 1",options:g,extractValue:d.jpathToArray,insertValue:d.jpathToString,displayTarget:["r0","i0","j0"]},jpath2:{type:"combo",title:"jpath for color 2",options:g,extractValue:d.jpathToArray,insertValue:d.jpathToString,displayTarget:["i0"]},jpath3:{type:"combo",title:"jpath for color 3",options:g,extractValue:d.jpathToArray,insertValue:d.jpathToString,displayTarget:["i0"]}}}}}}}},e.prototype.configAliases={bgType:["sections","background",0,"groups","group",0,"colorType",0],bgColor1:["sections","background",0,"groups","group",0,"color1",0],bgColor2:["sections","background",0,"groups","group",0,"color2",0],bgSpace:["sections","background",0,"groups","group",0,"colorSpace",0],bgField1:["sections","background",0,"groups","group",0,"field1",0],bgField2:["sections","background",0,"groups","group",0,"field2",0],bgField3:["sections","background",0,"groups","group",0,"field3",0],datasets:["sections","dataset"]},e});
