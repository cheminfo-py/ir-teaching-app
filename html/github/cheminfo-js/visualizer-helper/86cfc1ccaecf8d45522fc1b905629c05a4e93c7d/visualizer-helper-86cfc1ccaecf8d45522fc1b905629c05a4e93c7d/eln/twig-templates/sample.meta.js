"use strict";

define(["module"], function (module) {
  module.exports = "\n{% if meta is empty %}\n<span onclick=\"addParameter(this)\" style=\"font-size: 2em; padding: 10px; color: darkgreen\" class=\"far fa-plus-square\"></span>\n{% endif %}\n<table>\n    {% for key, value in meta %}\n        <tr data-name=\"{{key}}\">\n            <td onclick=\"addParameter(this)\"><span style=\"color: darkgreen\" class=\"far fa-plus-square\"></span></td>\n            <td onclick=\"deleteMeta(this)\"><span style=\"color: darkred\" class=\"far fa-minus-square\"></span></td>\n            \n            <td>{{key}}</td>\n            <td><input name=\"{{key}}\"></td>\n        </tr>\n    {% endfor %} \n</table>\n\n<script>\n    var deleteMeta;\n    var addParameter;\n    require(['jquery', 'src/util/api', 'modules/modulefactory', 'src/util/ui'], function (\n      $,\n      API,\n      Module,\n      UI,\n    ) {\n        deleteMeta = function (target) {\n            target=$(target);\n            let variableName = target.parent('tr').attr('data-name');\n            let sample=API.getData('sample');\n            delete sample.$content.general.meta[variableName];\n            sample.triggerChange();\n            target.parent('tr').remove();\n        }\n        \n        addParameter = async function(target) {\n            let parameterName = await UI.enterValue({\n                label: 'Enter the parameter name: '\n            })\n            if (! parameterName) return;\n            let sample=API.getData('sample');\n            if (! sample.$content.general.meta) {\n                sample.setChildSync(['$content', 'general', 'meta'], {});\n            }\n            sample.setChildSync(['$content', 'general', 'meta', parameterName], '');\n        }\n    })\n</script>\n";
});